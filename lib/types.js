(function() {
  'use strict';
  var Bounded_list, Hollerith_typespace, SFMODULES, Type, Typespace, _test_monotony, debug, hide, nameit, regex, rpr, set_getter, type_of;

  //===========================================================================================================
  SFMODULES = require('bricabrac-single-file-modules');

  ({type_of} = SFMODULES.unstable.require_type_of());

  ({
    show_no_colors: rpr
  } = SFMODULES.unstable.require_show());

  ({debug} = console);

  ({regex} = require('regex'));

  ({hide, set_getter} = SFMODULES.require_managed_property_tools());

  ({nameit} = SFMODULES.require_nameit());

  Bounded_list = (function() {
    //===========================================================================================================
    /* NOTE Future Single-File Module */
    class Bounded_list {
      //---------------------------------------------------------------------------------------------------------
      constructor(max_size = 3) {
        this.max_size = max_size;
        this.data = [];
        return void 0;
      }

      //---------------------------------------------------------------------------------------------------------
      create(...P) {
        this.data.push(Object.assign({}, ...P));
        if (this.size > this.max_size) {
          this.data.shift();
        }
        return this.current;
      }

      //---------------------------------------------------------------------------------------------------------
      assign(...P) {
        return Object.assign(this.current, ...P);
      }

      //---------------------------------------------------------------------------------------------------------
      at(idx) {
        return this.data.at(idx);
      }

    };

    //---------------------------------------------------------------------------------------------------------
    set_getter(Bounded_list.prototype, 'size', function() {
      return this.data.length;
    });

    set_getter(Bounded_list.prototype, 'is_empty', function() {
      return this.data.length === 0;
    });

    set_getter(Bounded_list.prototype, 'current', function() {
      if (this.is_empty) {
        return this.create();
      } else {
        return this.at(-1);
      }
    });

    return Bounded_list;

  }).call(this);

  //===========================================================================================================
  /* NOTE Future Single-File Module */
  Type = class Type {
    //---------------------------------------------------------------------------------------------------------
    constructor(typespace, name, isa) {
      var assign, create, fail;
      hide(this, 'name', name);
      hide(this, 'T', typespace);
      hide(this, '_isa', isa);
      this.data = new Bounded_list();
      create = (...P) => {
        return this.data.create(...P);
      };
      assign = (...P) => {
        return this.data.assign(...P);
      };
      fail = (message, ...P) => {
        this.data.assign({message}, ...P);
        return false;
      };
      hide(this, '_ctx', {
        T: typespace,
        me: this,
        create,
        assign,
        fail
      });
      set_getter(this._ctx, 'data', () => {
        return this.data.current;
      });
      return void 0;
    }

    //---------------------------------------------------------------------------------------------------------
    isa(x) {
      this.data.create();
      return this._isa.call(this._ctx, x);
    }

  };

  //===========================================================================================================
  _test_monotony = function(x, cmp) {
    var R, chr, chrs, i, idx, prv_chr, ref;
    debug('Ωbsk___8', this.data);
    ({chrs} = this.data); // = @create data
    if (chrs.length === 0) {
      return this.fail("empty is not monotonic");
    }
    if (chrs.length === 1) {
      return true;
    }
    for (idx = i = 1, ref = chrs.length; (1 <= ref ? i < ref : i > ref); idx = 1 <= ref ? ++i : --i) {
      prv_chr = chrs[idx - 1];
      chr = chrs[idx];
      R = (function() {
        switch (cmp) {
          case '>':
            return prv_chr > chr;
          case '<':
            return prv_chr < chr;
          default:
            throw new Error(`Ωbsk___8 (internal) expected '>' or '<', got ${rpr(cmp)}`);
        }
      })();
      if (R) {
        continue;
      }
      this.assign({
        fail: {x, idx, prv_chr, chr}
      });
      return false;
    }
    return true;
  };

  //===========================================================================================================
  Typespace = class Typespace {
    //---------------------------------------------------------------------------------------------------------
    constructor() {
      var Typeclass, clasz, i, isa, len, name, ref;
      clasz = this.constructor;
      ref = Object.getOwnPropertyNames(clasz);
      for (i = 0, len = ref.length; i < len; i++) {
        name = ref[i];
        Typeclass = class Typeclass extends Type {};
        nameit(name, Typeclass);
        this[name] = new Typeclass(this, name, isa = clasz[name]);
      }
      return void 0;
    }

  };

  //===========================================================================================================
  Hollerith_typespace = class Hollerith_typespace extends Typespace {
    //=========================================================================================================
    static text(x) {
      return (type_of(x)) === 'text';
    }

    static nonempty_text(x) {
      return (this.T.text.isa(x)) && x.length > 0;
    }

    static float(x) {
      return Number.isFinite(x);
    }

    static integer(x) {
      return Number.isSafeInteger(x);
    }

    static pinteger(x) {
      return (this.T.integer.isa(x)) && x > 0;
    }

    static zpinteger(x) {
      return (this.T.integer.isa(x)) && x >= 0;
    }

    static cardinal(x) {
      return this.T.zpinteger.isa(x);
    }

    //---------------------------------------------------------------------------------------------------------
    static dimension(x) {
      return this.T.pinteger.isa(x);
    }

    //---------------------------------------------------------------------------------------------------------
    static incremental_text(x) {
      var data;
      if (!this.T.text.isa(x)) {
        return false;
      }
      data = this.create({
        chrs: Array.from(x)
      });
      return _test_monotony.call(this, x, '<');
    }

    //---------------------------------------------------------------------------------------------------------
    static decremental_text(x) {
      var data;
      if (!this.T.text.isa(x)) {
        return false;
      }
      data = this.create({
        chrs: Array.from(x)
      });
      return _test_monotony.call(this, x, '>');
    }

    //---------------------------------------------------------------------------------------------------------
    static nmag_bare_reversed(x) {
      if (!this.T.nonempty_text.isa(x)) {
        return false;
      }
    }

    //---------------------------------------------------------------------------------------------------------
    static pmag_bare(x) {}

    //---------------------------------------------------------------------------------------------------------
    static magnifiers(x) {
      var nmag, nmag_bare_reversed, pmag, pmag_bare;
      if (!this.T.nonempty_text.isa(x)) {
        return false;
      }
      [nmag_bare_reversed, pmag_bare] = x.split(/\s+/v);
      if (!this.T.nmag_bare_reversed.isa(nmag_bare_reversed)) {
        return false;
      }
      if (!this.T.pmag_bare.isa(pmag_bare)) {
        return false;
      }
      nmag = ' ' + nmag_bare_reversed.reverse();
      pmag = ' ' + pmag_bare;
      this.create({nmag, pmag});
      return true;
    }

  };

  //===========================================================================================================
  Object.assign(module.exports, {
    types: new Hollerith_typespace(),
    internals: {Type, Typespace, Hollerith_typespace, Bounded_list}
  });

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL3R5cGVzLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQTtFQUFBO0FBQUEsTUFBQSxZQUFBLEVBQUEsbUJBQUEsRUFBQSxTQUFBLEVBQUEsSUFBQSxFQUFBLFNBQUEsRUFBQSxjQUFBLEVBQUEsS0FBQSxFQUFBLElBQUEsRUFBQSxNQUFBLEVBQUEsS0FBQSxFQUFBLEdBQUEsRUFBQSxVQUFBLEVBQUEsT0FBQTs7O0VBR0EsU0FBQSxHQUE0QixPQUFBLENBQVEsK0JBQVI7O0VBQzVCLENBQUEsQ0FBRSxPQUFGLENBQUEsR0FBNEIsU0FBUyxDQUFDLFFBQVEsQ0FBQyxlQUFuQixDQUFBLENBQTVCOztFQUNBLENBQUE7SUFBRSxjQUFBLEVBQWdCO0VBQWxCLENBQUEsR0FBNEIsU0FBUyxDQUFDLFFBQVEsQ0FBQyxZQUFuQixDQUFBLENBQTVCOztFQUNBLENBQUEsQ0FBRSxLQUFGLENBQUEsR0FBNEIsT0FBNUI7O0VBQ0EsQ0FBQSxDQUFFLEtBQUYsQ0FBQSxHQUE0QixPQUFBLENBQVEsT0FBUixDQUE1Qjs7RUFDQSxDQUFBLENBQUUsSUFBRixFQUNFLFVBREYsQ0FBQSxHQUM0QixTQUFTLENBQUMsOEJBQVYsQ0FBQSxDQUQ1Qjs7RUFFQSxDQUFBLENBQUUsTUFBRixDQUFBLEdBQTRCLFNBQVMsQ0FBQyxjQUFWLENBQUEsQ0FBNUI7O0VBS007OztJQUFOLE1BQUEsYUFBQSxDQUFBOztNQUdFLFdBQWEsQ0FBRSxXQUFXLENBQWIsQ0FBQTtRQUNYLElBQUMsQ0FBQSxRQUFELEdBQWM7UUFDZCxJQUFDLENBQUEsSUFBRCxHQUFjO0FBQ2QsZUFBTztNQUhJLENBRGY7OztNQU9FLE1BQVEsQ0FBQSxHQUFFLENBQUYsQ0FBQTtRQUNOLElBQUMsQ0FBQSxJQUFJLENBQUMsSUFBTixDQUFXLE1BQU0sQ0FBQyxNQUFQLENBQWMsQ0FBQSxDQUFkLEVBQWtCLEdBQUEsQ0FBbEIsQ0FBWDtRQUNBLElB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QixDQUFyQixDQUFwQjtBQUFBLGVBQU8sTUFBUDs7TUFDQSxDQUFFLGtCQUFGLEVBQ0UsU0FERixDQUFBLEdBQ2tCLENBQUMsQ0FBQyxLQUFGLENBQVEsTUFBUjtNQUNsQixLQUFvQixJQUFDLENBQUEsQ0FBQyxDQUFDLGtCQUFrQixDQUFDLEdBQXRCLENBQTBCLGtCQUExQixDQUFwQjtBQUFBLGVBQU8sTUFBUDs7TUFDQSxLQUFvQixJQUFDLENBQUEsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxHQUFiLENBQTBCLFNBQTFCLENBQXBCO0FBQUEsZUFBTyxNQUFQOztNQUNBLElBQUEsR0FBa0IsR0FBQSxHQUFNLGtCQUFrQixDQUFDLE9BQW5CLENBQUE7TUFDeEIsSUFBQSxHQUFrQixHQUFBLEdBQU07TUFDeEIsSUFBQyxDQUFBLE1BQUQsQ0FBUSxDQUFFLElBQUYsRUFBUSxJQUFSLENBQVI7QUFDQSxhQUFPO0lBVEk7O0VBakNmLEVBaEdBOzs7RUE2SUEsTUFBTSxDQUFDLE1BQVAsQ0FBYyxNQUFNLENBQUMsT0FBckIsRUFDRTtJQUFBLEtBQUEsRUFBWSxJQUFJLG1CQUFKLENBQUEsQ0FBWjtJQUNBLFNBQUEsRUFBVyxDQUNULElBRFMsRUFFVCxTQUZTLEVBR1QsbUJBSFMsRUFJVCxZQUpTO0VBRFgsQ0FERjtBQTdJQSIsInNvdXJjZXNDb250ZW50IjpbIlxuJ3VzZSBzdHJpY3QnXG5cbiM9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuU0ZNT0RVTEVTICAgICAgICAgICAgICAgICA9IHJlcXVpcmUgJ2JyaWNhYnJhYy1zaW5nbGUtZmlsZS1tb2R1bGVzJ1xueyB0eXBlX29mLCAgICAgICAgICAgICAgfSA9IFNGTU9EVUxFUy51bnN0YWJsZS5yZXF1aXJlX3R5cGVfb2YoKVxueyBzaG93X25vX2NvbG9yczogcnByLCAgfSA9IFNGTU9EVUxFUy51bnN0YWJsZS5yZXF1aXJlX3Nob3coKVxueyBkZWJ1ZywgICAgICAgICAgICAgICAgfSA9IGNvbnNvbGVcbnsgcmVnZXgsICAgICAgICAgICAgICAgIH0gPSByZXF1aXJlICdyZWdleCdcbnsgaGlkZSxcbiAgc2V0X2dldHRlciwgICAgICAgICAgIH0gPSBTRk1PRFVMRVMucmVxdWlyZV9tYW5hZ2VkX3Byb3BlcnR5X3Rvb2xzKClcbnsgbmFtZWl0LCAgICAgICAgICAgICAgIH0gPSBTRk1PRFVMRVMucmVxdWlyZV9uYW1laXQoKVxuXG5cbiM9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuIyMjIE5PVEUgRnV0dXJlIFNpbmdsZS1GaWxlIE1vZHVsZSAjIyNcbmNsYXNzIEJvdW5kZWRfbGlzdFxuXG4gICMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgY29uc3RydWN0b3I6ICggbWF4X3NpemUgPSAzICkgLT5cbiAgICBAbWF4X3NpemUgICA9IG1heF9zaXplXG4gICAgQGRhdGEgICAgICAgPSBbXVxuICAgIHJldHVybiB1bmRlZmluZWRcblxuICAjLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIGNyZWF0ZTogKCBQLi4uICkgLT5cbiAgICBAZGF0YS5wdXNoIE9iamVjdC5hc3NpZ24ge30sIFAuLi5cbiAgICBAZGF0YS5zaGlmdCgpIGlmIEBzaXplID4gQG1heF9zaXplXG4gICAgcmV0dXJuIEBjdXJyZW50XG5cbiAgIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBhc3NpZ246ICggUC4uLiApIC0+IE9iamVjdC5hc3NpZ24gQGN1cnJlbnQsIFAuLi5cblxuICAjLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIGF0OiAoIGlkeCApIC0+XG4gICAgQGRhdGEuYXQgaWR4XG5cbiAgIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBzZXRfZ2V0dGVyIEA6OiwgJ3NpemUnLCAgICAgLT4gQGRhdGEubGVuZ3RoXG4gIHNldF9nZXR0ZXIgQDo6LCAnaXNfZW1wdHknLCAtPiBAZGF0YS5sZW5ndGggaXMgMFxuICBzZXRfZ2V0dGVyIEA6OiwgJ2N1cnJlbnQnLCAgLT4gaWYgQGlzX2VtcHR5IHRoZW4gQGNyZWF0ZSgpIGVsc2UgQGF0IC0xXG5cblxuIz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4jIyMgTk9URSBGdXR1cmUgU2luZ2xlLUZpbGUgTW9kdWxlICMjI1xuY2xhc3MgVHlwZVxuXG4gICMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgY29uc3RydWN0b3I6ICggdHlwZXNwYWNlLCBuYW1lLCBpc2EgKSAtPlxuICAgIGhpZGUgQCwgJ25hbWUnLCAgIG5hbWVcbiAgICBoaWRlIEAsICdUJywgICAgICB0eXBlc3BhY2VcbiAgICBoaWRlIEAsICdfaXNhJywgICBpc2FcbiAgICBAZGF0YSAgICAgICAgICAgPSBuZXcgQm91bmRlZF9saXN0KClcbiAgICBjcmVhdGUgICAgICAgICAgPSAoICAgICAgICAgICBQLi4uICkgPT4gQGRhdGEuY3JlYXRlIFAuLi5cbiAgICBhc3NpZ24gICAgICAgICAgPSAoICAgICAgICAgICBQLi4uICkgPT4gQGRhdGEuYXNzaWduIFAuLi5cbiAgICBmYWlsICAgICAgICAgICAgPSAoIG1lc3NhZ2UsICBQLi4uICkgPT4gQGRhdGEuYXNzaWduIHsgbWVzc2FnZSwgfSwgUC4uLjsgZmFsc2VcbiAgICBoaWRlIEAsICdfY3R4JywgeyBUOiB0eXBlc3BhY2UsIG1lOiBALCBjcmVhdGUsIGFzc2lnbiwgZmFpbCwgfVxuICAgIHNldF9nZXR0ZXIgQF9jdHgsICdkYXRhJywgPT4gQGRhdGEuY3VycmVudFxuICAgIHJldHVybiB1bmRlZmluZWRcblxuICAjLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIGlzYTogKCB4ICkgLT4gQGRhdGEuY3JlYXRlKCk7IEBfaXNhLmNhbGwgQF9jdHgsIHhcblxuXG4jPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbl90ZXN0X21vbm90b255ID0gKCB4LCBjbXAgKSAtPlxuICBkZWJ1ZyAnzqlic2tfX184JywgQGRhdGFcbiAgeyBjaHJzLCB9ID0gQGRhdGEgIyA9IEBjcmVhdGUgZGF0YVxuICByZXR1cm4gKCBAZmFpbCBcImVtcHR5IGlzIG5vdCBtb25vdG9uaWNcIiApIGlmIGNocnMubGVuZ3RoIGlzIDBcbiAgcmV0dXJuIHRydWUgICBpZiBjaHJzLmxlbmd0aCBpcyAxXG4gIGZvciBpZHggaW4gWyAxIC4uLiBjaHJzLmxlbmd0aCBdXG4gICAgcHJ2X2NociA9IGNocnNbIGlkeCAtIDEgXVxuICAgIGNociAgICAgPSBjaHJzWyBpZHggICAgIF1cbiAgICBSICAgICAgID0gc3dpdGNoIGNtcFxuICAgICAgd2hlbiAnPicgdGhlbiBwcnZfY2hyID4gY2hyXG4gICAgICB3aGVuICc8JyB0aGVuIHBydl9jaHIgPCBjaHJcbiAgICAgIGVsc2UgdGhyb3cgbmV3IEVycm9yIFwizqlic2tfX184IChpbnRlcm5hbCkgZXhwZWN0ZWQgJz4nIG9yICc8JywgZ290ICN7cnByIGNtcH1cIlxuICAgIGNvbnRpbnVlIGlmIFJcbiAgICBAYXNzaWduIHsgZmFpbDogeyB4LCBpZHgsIHBydl9jaHIsIGNociwgfSwgfVxuICAgIHJldHVybiBmYWxzZVxuICByZXR1cm4gdHJ1ZVxuXG5cbiM9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuY2xhc3MgVHlwZXNwYWNlXG5cbiAgIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBjb25zdHJ1Y3RvcjogLT5cbiAgICBjbGFzeiA9IEBjb25zdHJ1Y3RvclxuICAgIGZvciBuYW1lIGluIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzIGNsYXN6XG4gICAgICBjbGFzcyBUeXBlY2xhc3MgZXh0ZW5kcyBUeXBlXG4gICAgICBuYW1laXQgbmFtZSwgVHlwZWNsYXNzXG4gICAgICBAWyBuYW1lIF0gPSBuZXcgVHlwZWNsYXNzIEAsIG5hbWUsIGlzYSA9IGNsYXN6WyBuYW1lIF1cbiAgICByZXR1cm4gdW5kZWZpbmVkXG5cblxuIz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5jbGFzcyBIb2xsZXJpdGhfdHlwZXNwYWNlIGV4dGVuZHMgVHlwZXNwYWNlXG5cbiAgIz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICBAdGV4dDogICAgICAgICAgICggeCApIC0+ICggdHlwZV9vZiB4ICkgaXMgJ3RleHQnXG4gIEBub25lbXB0eV90ZXh0OiAgKCB4ICkgLT4gKCBAVC50ZXh0LmlzYSB4ICkgYW5kIHgubGVuZ3RoID4gMFxuICBAZmxvYXQ6ICAgICAgICAgICggeCApIC0+IE51bWJlci5pc0Zpbml0ZSB4XG4gIEBpbnRlZ2VyOiAgICAgICAgKCB4ICkgLT4gTnVtYmVyLmlzU2FmZUludGVnZXIgeFxuICBAcGludGVnZXI6ICAgICAgICggeCApIC0+ICggQFQuaW50ZWdlci5pc2EgeCApIGFuZCB4ID4gMFxuICBAenBpbnRlZ2VyOiAgICAgICggeCApIC0+ICggQFQuaW50ZWdlci5pc2EgeCApIGFuZCB4ID49IDBcbiAgQGNhcmRpbmFsOiAgICAgICAoIHggKSAtPiBAVC56cGludGVnZXIuaXNhIHhcbiAgIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBAZGltZW5zaW9uOiAgICAgICggeCApIC0+IEBULnBpbnRlZ2VyLmlzYSAgeFxuXG4gICMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgQGluY3JlbWVudGFsX3RleHQ6ICggeCApIC0+XG4gICAgcmV0dXJuIGZhbHNlIHVubGVzcyBAVC50ZXh0LmlzYSB4XG4gICAgZGF0YSA9IEBjcmVhdGUgeyBjaHJzOiAoIEFycmF5LmZyb20geCApLCB9XG4gICAgcmV0dXJuIF90ZXN0X21vbm90b255LmNhbGwgQCwgeCwgJzwnXG5cbiAgIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBAZGVjcmVtZW50YWxfdGV4dDogKCB4ICkgLT5cbiAgICByZXR1cm4gZmFsc2UgdW5sZXNzIEBULnRleHQuaXNhIHhcbiAgICBkYXRhID0gQGNyZWF0ZSB7IGNocnM6ICggQXJyYXkuZnJvbSB4ICksIH1cbiAgICByZXR1cm4gX3Rlc3RfbW9ub3RvbnkuY2FsbCBALCB4LCAnPidcblxuICAjLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIEBubWFnX2JhcmVfcmV2ZXJzZWQ6ICggeCApIC0+XG4gICAgcmV0dXJuIGZhbHNlIHVubGVzcyBAVC5ub25lbXB0eV90ZXh0LmlzYSB4XG5cbiAgIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBAcG1hZ19iYXJlOiAoIHggKSAtPlxuXG4gICMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgQG1hZ25pZmllcnM6ICggeCApIC0+XG4gICAgcmV0dXJuIGZhbHNlIHVubGVzcyBAVC5ub25lbXB0eV90ZXh0LmlzYSB4XG4gICAgWyBubWFnX2JhcmVfcmV2ZXJzZWQsXG4gICAgICBwbWFnX2JhcmUsICBdID0geC5zcGxpdCAvXFxzKy92XG4gICAgcmV0dXJuIGZhbHNlIHVubGVzcyBAVC5ubWFnX2JhcmVfcmV2ZXJzZWQuaXNhIG5tYWdfYmFyZV9yZXZlcnNlZFxuICAgIHJldHVybiBmYWxzZSB1bmxlc3MgQFQucG1hZ19iYXJlLmlzYSAgICAgICAgICBwbWFnX2JhcmVcbiAgICBubWFnICAgICAgICAgICAgPSAnICcgKyBubWFnX2JhcmVfcmV2ZXJzZWQucmV2ZXJzZSgpXG4gICAgcG1hZyAgICAgICAgICAgID0gJyAnICsgcG1hZ19iYXJlXG4gICAgQGNyZWF0ZSB7IG5tYWcsIHBtYWcsIH1cbiAgICByZXR1cm4gdHJ1ZVxuXG4jPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbk9iamVjdC5hc3NpZ24gbW9kdWxlLmV4cG9ydHMsXG4gIHR5cGVzOiAgICAgIG5ldyBIb2xsZXJpdGhfdHlwZXNwYWNlKClcbiAgaW50ZXJuYWxzOiB7XG4gICAgVHlwZVxuICAgIFR5cGVzcGFjZVxuICAgIEhvbGxlcml0aF90eXBlc3BhY2VcbiAgICBCb3VuZGVkX2xpc3RcbiAgICB9XG4iXX0=
