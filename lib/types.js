(function() {
  'use strict';
  var CFG, Hollerith_typespace, SFMODULES, Type, Typespace, _test_monotony, debug, freeze, get_max_integer, internals, is_positive_all_niner, is_positive_integer_power_of, regex, rpr, type_of;

  //===========================================================================================================
  SFMODULES = require('../../bricabrac-single-file-modules');

  ({type_of} = SFMODULES.unstable.require_type_of());

  ({
    show_no_colors: rpr
  } = SFMODULES.unstable.require_show());

  ({debug} = console);

  ({regex} = require('regex'));

  ({freeze} = Object);

  ({Type, Typespace, CFG} = SFMODULES.unstable.require_nanotypes());

  // get_max_niner_digit_count,
  // encode,
  // decode,
  // log_to_base,
  // get_required_digits,
  ({is_positive_integer_power_of, is_positive_all_niner, get_max_integer} = SFMODULES.unstable.require_anybase());

  //===========================================================================================================
  internals = Object.assign({Type, Typespace}, {
    //---------------------------------------------------------------------------------------------------------
    get_niners_re: function(_nova) {
      return (regex('g'))` ^ ${_nova}* (?= .+ $ ) `;
    }
  });

  Hollerith_typespace = (function() {
    //===========================================================================================================
    // HOLLERITH TYPESPACE
    //===========================================================================================================
    class Hollerith_typespace extends Typespace {
      //---------------------------------------------------------------------------------------------------------
      constructor(cfg) {
        var blank_esc, blank_splitter;
        super(cfg);
        this.blank.validate(this[CFG].blank);
        blank_esc = RegExp.escape(this[CFG].blank);
        blank_splitter = new RegExp(`(?:${blank_esc})+`, 'gv');
        this[CFG] = freeze({...this[CFG], blank_splitter});
        return void 0;
      }

      //=========================================================================================================
      static text(x) {
        return (type_of(x)) === 'text';
      }

      static nonempty_text(x) {
        return (this.T.text.isa(x)) && (x.length > 0);
      }

      static character(x) {
        return (this.T.text.isa(x)) && (/^.$/v.test(x));
      }

      static float(x) {
        return Number.isFinite(x);
      }

      static integer(x) {
        return Number.isSafeInteger(x);
      }

      static pinteger(x) {
        return (this.T.integer.isa(x)) && (x > 0);
      }

      static zpinteger(x) {
        return (this.T.integer.isa(x)) && (x >= 0);
      }

      static cardinal(x) {
        return this.T.zpinteger.isa(x);
      }

      //---------------------------------------------------------------------------------------------------------
      /* NOTE requiring `x` to be both a character and equal to `@[CFG].blank` means `@[CFG].blank` itself can be tested */
      static blank(x) {
        return (this.T.character.isa(x)) && (x === this[CFG].blank);
      }

      // @blank_setting:   ( x ) -> ( @T.character.isa x )
      // @blank_usage:     ( x ) -> ( x is @[CFG].blank )
      static dimension(x) {
        return this.T.pinteger.isa(x);
      }

      static base(x) {
        return (this.T.pinteger.isa(x)) && (x > 1);
      }

      static digits_numof(x) {
        return (this.T.pinteger.isa(x)) && (x > 1);
      }

      //---------------------------------------------------------------------------------------------------------
      static incremental_text(x) {
        if (!this.T.text.isa(x)) {
          return false;
        }
        this.assign({
          chrs: freeze(Array.from(x))
        });
        return _test_monotony.call(this, x, '<');
      }

      //---------------------------------------------------------------------------------------------------------
      static decremental_text(x) {
        if (!this.T.text.isa(x)) {
          return false;
        }
        this.assign({
          chrs: freeze(Array.from(x))
        });
        return _test_monotony.call(this, x, '>');
      }

      //---------------------------------------------------------------------------------------------------------
      static nmag_bare_reversed(x) {
        return this.T.incremental_text.dm_isa(this.data, null, x);
      }

      static pmag_bare(x) {
        return this.T.incremental_text.dm_isa(this.data, null, x);
      }

      //---------------------------------------------------------------------------------------------------------
      static magnifiers(x) {
        var nmag, nmag_bare_reversed, nmag_chrs, parts, pmag, pmag_bare, pmag_chrs;
        if (!this.T.nonempty_text.isa(x)) {
          return this.fail("expected a magnifier, got an empty text");
        }
        parts = x.split(this[CFG].blank_splitter);
        if (parts.length !== 2) {
          return this.fail(`magnifiers must have exactly 1 blank, got ${parts.length - 1} blanks`);
        }
        [nmag_bare_reversed, pmag_bare] = parts;
        if (!this.T.nmag_bare_reversed.dm_isa(this.data, {
          chrs: 'nmag_chrs_reversed'
        }, nmag_bare_reversed)) {
          //.......................................................................................................
          // @assign { iam: 'magnifiers', }; debug 'Ωbsk___1', @data
          return this.fail("Ωbsk___2 ???");
        }
        if (!this.T.pmag_bare.dm_isa(this.data, {
          chrs: 'pmag_chrs'
        }, pmag_bare)) {
          return this.fail("Ωbsk___3 ???");
        }
        if (!this.T.incremental_text.isa(nmag_bare_reversed + pmag_bare)) {
          return this.fail("Ωbsk___4 ???");
        }
        if (nmag_bare_reversed.length !== pmag_bare.length) {
          return this.fail("Ωbsk___5 ???");
        }
        //.......................................................................................................
        nmag = this[CFG].blank + [...this.data.nmag_chrs_reversed].reverse().join('');
        pmag = this[CFG].blank + pmag_bare;
        nmag_chrs = freeze(Array.from(nmag));
        pmag_chrs = freeze(Array.from(pmag));
        this.assign({nmag, pmag, nmag_chrs, pmag_chrs});
        return true;
      }

      //---------------------------------------------------------------------------------------------------------
      static digitset(x) {
        var _naught, _nova, base, leading_niners_re;
        if (!this.T.incremental_text.dm_isa(this.data, {
          chrs: 'digits_lstof'
        }, x)) {
          return false;
        }
        base = this.data.digits_lstof.length;
        if (!this.T.base.isa(base)) {
          return this.fail("an digitset must have 2 chrs or more");
        }
        _naught = this.data.digits_lstof.at(0);
        _nova = this.data.digits_lstof.at(-1);
        leading_niners_re = internals.get_niners_re(_nova);
        this.assign({base, _naught, _nova, leading_niners_re});
        return true;
      }

      //---------------------------------------------------------------------------------------------------------
      static uniliterals(x) {
        var _cipher, nun_chrs, nuns, parts, puns, zpun_chrs, zpuns;
        if (!this.T.nonempty_text.isa(x)) {
          return false;
        }
        if (this.T.character.isa(x)) {
          nuns = '';
          zpuns = x;
          nun_chrs = freeze([]);
          zpun_chrs = freeze([x]);
          this.assign({nuns, zpuns, nun_chrs, zpun_chrs});
          return true;
        }
        parts = x.split(this[CFG].blank_splitter);
        if (parts.length !== 3) {
          return this.fail(`uniliterals that are not a single character must have exactly 2 blank2, got ${parts.length - 1} blanks`);
        }
        [nuns, _cipher, puns] = parts;
        zpuns = _cipher + puns;
        this.assign({nuns, zpuns, _cipher});
        if (!this.T.incremental_text.dm_isa(this.data, {
          chrs: 'nun_chrs'
        }, nuns)) {
          return false;
        }
        if (!this.T.incremental_text.dm_isa(this.data, {
          chrs: 'zpun_chrs'
        }, zpuns)) {
          return false;
        }
        return true;
      }

      //---------------------------------------------------------------------------------------------------------
      static TMP_alphabet(x) {
        if (!this.T.nonempty_text.dm_isa(this.data, null, x)) {
          return false;
        }
        if (!this.T.incremental_text.dm_isa(this.data, null, x)) {
          return false;
        }
        return true;
      }

      //---------------------------------------------------------------------------------------------------------
      static _max_integer_$(x, base) {
        if (!this.T.pinteger.isa(x)) {
          return this.fail("x not a positive safe integer");
        }
        if (!this.T.base.isa(base)) {
          return this.fail("base not a safe integer greater than 1");
        }
        if (!is_positive_all_niner(x, base)) {
          return this.fail("x not a positive all-niners");
        }
        return true;
      }

      //---------------------------------------------------------------------------------------------------------
      /* TAINT should be method of `T._max_integer_$` */
      create_max_integer_$({base, digits_numof}) {
        var R;
        this.base.validate(base);
        this.digits_numof.validate(digits_numof);
        R = Math.min(get_max_integer(Number.MAX_SAFE_INTEGER, base), (base ** digits_numof) - 1);
        this._max_integer_$.validate(R, base);
        return R;
      }

      //---------------------------------------------------------------------------------------------------------
      static _max_digits_per_idx_$(x, pmag_chrs) {
        if (!this.T.pinteger.isa(x)) {
          return this.fail("x not a positive safe integer");
        }
        if (!(x <= pmag_chrs.length)) {
          return this.fail(`x ${x} exceeds limit set by magnifiers`);
        }
        return true;
      }

    };

    //=========================================================================================================
    Hollerith_typespace[CFG] = {
      blank: ' '
    };

    return Hollerith_typespace;

  }).call(this);

  //===========================================================================================================
  _test_monotony = function(x, cmp) {
    var R, chr, chrs, i, idx, prv_chr, ref;
    ({chrs} = this.data); // = @create data
    if (chrs.length === 0) {
      return this.fail("empty is not monotonic");
    }
    if (chrs.length === 1) {
      return true;
    }
    for (idx = i = 1, ref = chrs.length; (1 <= ref ? i < ref : i > ref); idx = 1 <= ref ? ++i : --i) {
      prv_chr = chrs[idx - 1];
      chr = chrs[idx];
      R = (function() {
        switch (cmp) {
          case '>':
            return prv_chr > chr;
          case '<':
            return prv_chr < chr;
          default:
            throw new Error(`Ωbsk___6 (internal) expected '>' or '<', got ${rpr(cmp)}`);
        }
      })();
      if (R) {
        continue;
      }
      this.assign({
        fail: {x, idx, prv_chr, chr}
      });
      return false;
    }
    return true;
  };

  //===========================================================================================================
  Object.assign(module.exports, {
    Hollerith_typespace,
    CFG: CFG,
    internals
  });

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL3R5cGVzLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQTtFQUFBO0FBQUEsTUFBQSxHQUFBLEVBQUEsbUJBQUEsRUFBQSxTQUFBLEVBQUEsSUFBQSxFQUFBLFNBQUEsRUFBQSxjQUFBLEVBQUEsS0FBQSxFQUFBLE1BQUEsRUFBQSxlQUFBLEVBQUEsU0FBQSxFQUFBLHFCQUFBLEVBQUEsNEJBQUEsRUFBQSxLQUFBLEVBQUEsR0FBQSxFQUFBLE9BQUE7OztFQUdBLFNBQUEsR0FBNEIsT0FBQSxDQUFRLHFDQUFSOztFQUM1QixDQUFBLENBQUUsT0FBRixDQUFBLEdBQTRCLFNBQVMsQ0FBQyxRQUFRLENBQUMsZUFBbkIsQ0FBQSxDQUE1Qjs7RUFDQSxDQUFBO0lBQUUsY0FBQSxFQUFnQjtFQUFsQixDQUFBLEdBQTRCLFNBQVMsQ0FBQyxRQUFRLENBQUMsWUFBbkIsQ0FBQSxDQUE1Qjs7RUFDQSxDQUFBLENBQUUsS0FBRixDQUFBLEdBQTRCLE9BQTVCOztFQUNBLENBQUEsQ0FBRSxLQUFGLENBQUEsR0FBNEIsT0FBQSxDQUFRLE9BQVIsQ0FBNUI7O0VBQ0EsQ0FBQSxDQUFFLE1BQUYsQ0FBQSxHQUE0QixNQUE1Qjs7RUFDQSxDQUFBLENBQUUsSUFBRixFQUNFLFNBREYsRUFFRSxHQUZGLENBQUEsR0FFNEIsU0FBUyxDQUFDLFFBQVEsQ0FBQyxpQkFBbkIsQ0FBQSxDQUY1QixFQVRBOzs7Ozs7O0VBWUEsQ0FBQSxDQUFFLDRCQUFGLEVBQ0UscUJBREYsRUFFRSxlQUZGLENBQUEsR0FRNEIsU0FBUyxDQUFDLFFBQVEsQ0FBQyxlQUFuQixDQUFBLENBUjVCLEVBWkE7OztFQXdCQSxTQUFBLEdBQVksTUFBTSxDQUFDLE1BQVAsQ0FBYyxDQUFFLElBQUYsRUFBUSxTQUFSLENBQWQsRUFHVixDQUFBOztJQUFBLGFBQUEsRUFBZSxRQUFBLENBQUUsS0FBRixDQUFBO2FBQWEsQ0FBRSxLQUFBLENB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QWlCLFFBQUEsQ0FBRSxDQUFGLEVBQUssR0FBTCxDQUFBO0FBQ2pCLFFBQUEsQ0FBQSxFQUFBLEdBQUEsRUFBQSxJQUFBLEVBQUEsQ0FBQSxFQUFBLEdBQUEsRUFBQSxPQUFBLEVBQUE7SUFBRSxDQUFBLENBQUUsSUFBRixDQUFBLEdBQVksSUFBQyxDQUFBLElBQWIsRUFBRjtJQUNFLElBQTZDLElBQUksQ0FBQyxNQUFMLEtBQWUsQ0FBNUQ7QUFBQSxhQUFTLElBQUMsQ0FBQSxJQUFELENBQU0sd0JBQU4sRUFBVDs7SUFDQSxJQUE2QyxJQUFJLENBQUMsTUFBTCxLQUFlLENBQTVEO0FBQUEsYUFBTyxLQUFQOztJQUNBLEtBQVcsMEZBQVg7TUFDRSxPQUFBLEdBQVUsSUFBSSxDQUFFLEdBQUEsR0FBTSxDQUFSO01BQ2QsR0FBQSxHQUFVLElBQUksQ0FBRSxHQUFGO01BQ2QsQ0FBQTtBQUFVLGdCQUFPLEdBQVA7QUFBQSxlQUNILEdBREc7bUJBQ00sT0FBQSxHQUFVO0FBRGhCLGVBRUgsR0FGRzttQkFFTSxPQUFBLEdBQVU7QUFGaEI7WUFHSCxNQUFNLElBQUksS0FBSixDQUFVLENBQUEsNkNBQUEsQ0FBQSxDQUFnRCxHQUFBLENBQUksR0FBSixDQUFoRCxDQUFBLENBQVY7QUFISDs7TUFJVixJQUFZLENBQVo7QUFBQSxpQkFBQTs7TUFDQSxJQUFDLENBQUEsTUFBRCxDQUFRO1FBQUUsSUFBQSxFQUFNLENBQUUsQ0FBRixFQUFLLEdBQUwsRUFBVSxPQUFWLEVBQW1CLEdBQW5CO01BQVIsQ0FBUjtBQUNBLGFBQU87SUFUVDtBQVVBLFdBQU87RUFkUSxFQXhLakI7OztFQXlMQSxNQUFNLENBQUMsTUFBUCxDQUFjLE1BQU0sQ0FBQyxPQUFyQixFQUE4QjtJQUM1QixtQkFENEI7SUFFNUIsR0FBQSxFQUFzQixHQUZNO0lBRzVCO0VBSDRCLENBQTlCO0FBekxBIiwic291cmNlc0NvbnRlbnQiOlsiXG4ndXNlIHN0cmljdCdcblxuIz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5TRk1PRFVMRVMgICAgICAgICAgICAgICAgID0gcmVxdWlyZSAnLi4vLi4vYnJpY2FicmFjLXNpbmdsZS1maWxlLW1vZHVsZXMnXG57IHR5cGVfb2YsICAgICAgICAgICAgICB9ID0gU0ZNT0RVTEVTLnVuc3RhYmxlLnJlcXVpcmVfdHlwZV9vZigpXG57IHNob3dfbm9fY29sb3JzOiBycHIsICB9ID0gU0ZNT0RVTEVTLnVuc3RhYmxlLnJlcXVpcmVfc2hvdygpXG57IGRlYnVnLCAgICAgICAgICAgICAgICB9ID0gY29uc29sZVxueyByZWdleCwgICAgICAgICAgICAgICAgfSA9IHJlcXVpcmUgJ3JlZ2V4J1xueyBmcmVlemUsICAgICAgICAgICAgICAgfSA9IE9iamVjdFxueyBUeXBlLFxuICBUeXBlc3BhY2UsXG4gIENGRywgICAgICAgICAgICAgICAgICB9ID0gU0ZNT0RVTEVTLnVuc3RhYmxlLnJlcXVpcmVfbmFub3R5cGVzKClcbnsgaXNfcG9zaXRpdmVfaW50ZWdlcl9wb3dlcl9vZixcbiAgaXNfcG9zaXRpdmVfYWxsX25pbmVyLFxuICBnZXRfbWF4X2ludGVnZXIsXG4gICMgZ2V0X21heF9uaW5lcl9kaWdpdF9jb3VudCxcbiAgIyBlbmNvZGUsXG4gICMgZGVjb2RlLFxuICAjIGxvZ190b19iYXNlLFxuICAjIGdldF9yZXF1aXJlZF9kaWdpdHMsXG4gICAgICAgICAgICAgICAgICAgICAgICB9ID0gU0ZNT0RVTEVTLnVuc3RhYmxlLnJlcXVpcmVfYW55YmFzZSgpXG5cblxuIz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5pbnRlcm5hbHMgPSBPYmplY3QuYXNzaWduIHsgVHlwZSwgVHlwZXNwYWNlLCB9LFxuXG4gICMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgZ2V0X25pbmVyc19yZTogKCBfbm92YSApIC0+ICggcmVnZXggJ2cnIClcIlwiXCIgXiAje19ub3ZhfSogKD89IC4rICQgKSBcIlwiXCJcblxuXG5cbiM9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuIyBIT0xMRVJJVEggVFlQRVNQQUNFXG4jPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbmNsYXNzIEhvbGxlcml0aF90eXBlc3BhY2UgZXh0ZW5kcyBUeXBlc3BhY2VcblxuICAjLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIGNvbnN0cnVjdG9yOiAoIGNmZyApIC0+XG4gICAgc3VwZXIgY2ZnXG4gICAgQGJsYW5rLnZhbGlkYXRlIEBbQ0ZHXS5ibGFua1xuICAgIGJsYW5rX2VzYyAgICAgICA9IFJlZ0V4cC5lc2NhcGUgQFtDRkddLmJsYW5rXG4gICAgYmxhbmtfc3BsaXR0ZXIgID0gbmV3IFJlZ0V4cCBcIig/OiN7YmxhbmtfZXNjfSkrXCIsICdndidcbiAgICBAW0NGR10gICAgICAgICAgPSBmcmVlemUgeyBAW0NGR10uLi4sIGJsYW5rX3NwbGl0dGVyLCB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuXG5cbiAgIz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICBAW0NGR106XG4gICAgYmxhbms6ICcgJ1xuXG4gICM9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgQHRleHQ6ICAgICAgICAgICAgKCB4ICkgLT4gKCB0eXBlX29mIHggKSBpcyAndGV4dCdcbiAgQG5vbmVtcHR5X3RleHQ6ICAgKCB4ICkgLT4gKCBAVC50ZXh0LmlzYSB4ICkgYW5kICggeC5sZW5ndGggPiAwIClcbiAgQGNoYXJhY3RlcjogICAgICAgKCB4ICkgLT4gKCBAVC50ZXh0LmlzYSB4ICkgYW5kICggL14uJC92LnRlc3QgeCApXG4gIEBmbG9hdDogICAgICAgICAgICggeCApIC0+IE51bWJlci5pc0Zpbml0ZSB4XG4gIEBpbnRlZ2VyOiAgICAgICAgICggeCApIC0+IE51bWJlci5pc1NhZmVJbnRlZ2VyIHhcbiAgQHBpbnRlZ2VyOiAgICAgICAgKCB4ICkgLT4gKCBAVC5pbnRlZ2VyLmlzYSB4ICkgYW5kICggeCA+ICAwIClcbiAgQHpwaW50ZWdlcjogICAgICAgKCB4ICkgLT4gKCBAVC5pbnRlZ2VyLmlzYSB4ICkgYW5kICggeCA+PSAwIClcbiAgQGNhcmRpbmFsOiAgICAgICAgKCB4ICkgLT4gQFQuenBpbnRlZ2VyLmlzYSB4XG4gICMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgIyMjIE5PVEUgcmVxdWlyaW5nIGB4YCB0byBiZSBib3RoIGEgY2hhcmFjdGVyIGFuZCBlcXVhbCB0byBgQFtDRkddLmJsYW5rYCBtZWFucyBgQFtDRkddLmJsYW5rYCBpdHNlbGYgY2FuIGJlIHRlc3RlZCAjIyNcbiAgQGJsYW5rOiAgICAgICAgICAgKCB4ICkgLT4gKCBAVC5jaGFyYWN0ZXIuaXNhIHggKSBhbmQgKCB4IGlzIEBbQ0ZHXS5ibGFuayApXG4gICMgQGJsYW5rX3NldHRpbmc6ICAgKCB4ICkgLT4gKCBAVC5jaGFyYWN0ZXIuaXNhIHggKVxuICAjIEBibGFua191c2FnZTogICAgICggeCApIC0+ICggeCBpcyBAW0NGR10uYmxhbmsgKVxuICBAZGltZW5zaW9uOiAgICAgICAoIHggKSAtPiAoIEBULnBpbnRlZ2VyLmlzYSB4IClcbiAgQGJhc2U6ICAgICAgICAgICAgKCB4ICkgLT4gKCBAVC5waW50ZWdlci5pc2EgeCApIGFuZCAoIHggPiAxIClcbiAgQGRpZ2l0c19udW1vZjogICAgKCB4ICkgLT4gKCBAVC5waW50ZWdlci5pc2EgeCApIGFuZCAoIHggPiAxIClcblxuICAjLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIEBpbmNyZW1lbnRhbF90ZXh0OiAoIHggKSAtPlxuICAgIHJldHVybiBmYWxzZSB1bmxlc3MgQFQudGV4dC5pc2EgeFxuICAgIEBhc3NpZ24geyBjaHJzOiAoIGZyZWV6ZSBBcnJheS5mcm9tIHggKSwgfVxuICAgIHJldHVybiBfdGVzdF9tb25vdG9ueS5jYWxsIEAsIHgsICc8J1xuXG4gICMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgQGRlY3JlbWVudGFsX3RleHQ6ICggeCApIC0+XG4gICAgcmV0dXJuIGZhbHNlIHVubGVzcyBAVC50ZXh0LmlzYSB4XG4gICAgQGFzc2lnbiB7IGNocnM6ICggZnJlZXplIEFycmF5LmZyb20geCApLCB9XG4gICAgcmV0dXJuIF90ZXN0X21vbm90b255LmNhbGwgQCwgeCwgJz4nXG5cbiAgIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBAbm1hZ19iYXJlX3JldmVyc2VkOiAgKCB4ICkgLT4gQFQuaW5jcmVtZW50YWxfdGV4dC5kbV9pc2EgQGRhdGEsIG51bGwsIHhcbiAgQHBtYWdfYmFyZTogICAgICAgICAgICggeCApIC0+IEBULmluY3JlbWVudGFsX3RleHQuZG1faXNhIEBkYXRhLCBudWxsLCB4XG5cbiAgIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBAbWFnbmlmaWVyczogKCB4ICkgLT5cbiAgICByZXR1cm4gKCBAZmFpbCBcImV4cGVjdGVkIGEgbWFnbmlmaWVyLCBnb3QgYW4gZW1wdHkgdGV4dFwiICkgdW5sZXNzIEBULm5vbmVtcHR5X3RleHQuaXNhIHhcbiAgICBwYXJ0cyAgICAgICAgICAgICAgICAgICA9IHguc3BsaXQgQFtDRkddLmJsYW5rX3NwbGl0dGVyXG4gICAgdW5sZXNzIHBhcnRzLmxlbmd0aCBpcyAyXG4gICAgICByZXR1cm4gKCBAZmFpbCBcIm1hZ25pZmllcnMgbXVzdCBoYXZlIGV4YWN0bHkgMSBibGFuaywgZ290ICN7cGFydHMubGVuZ3RoIC0gMX0gYmxhbmtzXCIpXG4gICAgWyBubWFnX2JhcmVfcmV2ZXJzZWQsXG4gICAgICBwbWFnX2JhcmUsICAgICAgICAgIF0gPSBwYXJ0c1xuICAgICMuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uXG4gICAgIyBAYXNzaWduIHsgaWFtOiAnbWFnbmlmaWVycycsIH07IGRlYnVnICfOqWJza19fXzEnLCBAZGF0YVxuICAgIHJldHVybiAoIEBmYWlsIFwizqlic2tfX18yID8/P1wiICkgdW5sZXNzICBAVC5ubWFnX2JhcmVfcmV2ZXJzZWQuZG1faXNhIEBkYXRhLCB7IGNocnM6ICdubWFnX2NocnNfcmV2ZXJzZWQnLCB9LCAgbm1hZ19iYXJlX3JldmVyc2VkXG4gICAgcmV0dXJuICggQGZhaWwgXCLOqWJza19fXzMgPz8/XCIgKSB1bmxlc3MgIEBULnBtYWdfYmFyZS5kbV9pc2EgICAgICAgICAgQGRhdGEsIHsgY2hyczogJ3BtYWdfY2hycycsIH0sICAgICAgICAgICBwbWFnX2JhcmVcbiAgICByZXR1cm4gKCBAZmFpbCBcIs6pYnNrX19fNCA/Pz9cIiApIHVubGVzcyAgQFQuaW5jcmVtZW50YWxfdGV4dC5pc2EgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5tYWdfYmFyZV9yZXZlcnNlZCArIHBtYWdfYmFyZVxuICAgIHJldHVybiAoIEBmYWlsIFwizqlic2tfX181ID8/P1wiICkgdW5sZXNzICBubWFnX2JhcmVfcmV2ZXJzZWQubGVuZ3RoIGlzIHBtYWdfYmFyZS5sZW5ndGhcbiAgICAjLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLlxuICAgIG5tYWcgICAgICA9IEBbQ0ZHXS5ibGFuayArIFsgQGRhdGEubm1hZ19jaHJzX3JldmVyc2VkLi4uLCBdLnJldmVyc2UoKS5qb2luICcnXG4gICAgcG1hZyAgICAgID0gQFtDRkddLmJsYW5rICsgcG1hZ19iYXJlXG4gICAgbm1hZ19jaHJzID0gZnJlZXplIEFycmF5LmZyb20gbm1hZ1xuICAgIHBtYWdfY2hycyA9IGZyZWV6ZSBBcnJheS5mcm9tIHBtYWdcbiAgICBAYXNzaWduIHsgbm1hZywgcG1hZywgbm1hZ19jaHJzLCBwbWFnX2NocnMsIH1cbiAgICByZXR1cm4gdHJ1ZVxuXG4gICMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgQGRpZ2l0c2V0OiAoIHggKSAtPlxuICAgIHJldHVybiBmYWxzZSB1bmxlc3MgQFQuaW5jcmVtZW50YWxfdGV4dC5kbV9pc2EgQGRhdGEsIHsgY2hyczogJ2RpZ2l0c19sc3RvZicsIH0sIHhcbiAgICBiYXNlICAgICAgICAgICAgICA9IEBkYXRhLmRpZ2l0c19sc3RvZi5sZW5ndGhcbiAgICByZXR1cm4gQGZhaWwgXCJhbiBkaWdpdHNldCBtdXN0IGhhdmUgMiBjaHJzIG9yIG1vcmVcIiB1bmxlc3MgQFQuYmFzZS5pc2EgYmFzZVxuICAgIF9uYXVnaHQgICAgICAgICAgID0gQGRhdGEuZGlnaXRzX2xzdG9mLmF0ICAwXG4gICAgX25vdmEgICAgICAgICAgICAgPSBAZGF0YS5kaWdpdHNfbHN0b2YuYXQgLTFcbiAgICBsZWFkaW5nX25pbmVyc19yZSA9IGludGVybmFscy5nZXRfbmluZXJzX3JlIF9ub3ZhXG4gICAgQGFzc2lnbiB7IGJhc2UsIF9uYXVnaHQsIF9ub3ZhLCBsZWFkaW5nX25pbmVyc19yZSwgfVxuICAgIHJldHVybiB0cnVlXG5cbiAgIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBAdW5pbGl0ZXJhbHM6ICggeCApIC0+XG4gICAgcmV0dXJuIGZhbHNlIHVubGVzcyBAVC5ub25lbXB0eV90ZXh0LmlzYSB4XG4gICAgaWYgQFQuY2hhcmFjdGVyLmlzYSB4XG4gICAgICBudW5zICAgICAgPSAnJ1xuICAgICAgenB1bnMgICAgID0geFxuICAgICAgbnVuX2NocnMgID0gZnJlZXplIFtdXG4gICAgICB6cHVuX2NocnMgPSBmcmVlemUgWyB4LCBdXG4gICAgICBAYXNzaWduIHsgbnVucywgenB1bnMsIG51bl9jaHJzLCB6cHVuX2NocnMsIH1cbiAgICAgIHJldHVybiB0cnVlXG4gICAgcGFydHMgPSB4LnNwbGl0IEBbQ0ZHXS5ibGFua19zcGxpdHRlclxuICAgIHVubGVzcyBwYXJ0cy5sZW5ndGggaXMgM1xuICAgICAgcmV0dXJuICggQGZhaWwgXCJ1bmlsaXRlcmFscyB0aGF0IGFyZSBub3QgYSBzaW5nbGUgY2hhcmFjdGVyIG11c3QgaGF2ZSBleGFjdGx5IDIgYmxhbmsyLCBnb3QgI3twYXJ0cy5sZW5ndGggLSAxfSBibGFua3NcIilcbiAgICBbIG51bnMsXG4gICAgICBfY2lwaGVyLFxuICAgICAgcHVucywgXSA9IHBhcnRzXG4gICAgenB1bnMgICAgID0gX2NpcGhlciArIHB1bnNcbiAgICBAYXNzaWduIHsgbnVucywgenB1bnMsIF9jaXBoZXIsIH1cbiAgICByZXR1cm4gZmFsc2UgdW5sZXNzIEBULmluY3JlbWVudGFsX3RleHQuZG1faXNhIEBkYXRhLCB7IGNocnM6ICdudW5fY2hycycsIH0sICBudW5zXG4gICAgcmV0dXJuIGZhbHNlIHVubGVzcyBAVC5pbmNyZW1lbnRhbF90ZXh0LmRtX2lzYSBAZGF0YSwgeyBjaHJzOiAnenB1bl9jaHJzJywgfSwgenB1bnNcbiAgICByZXR1cm4gdHJ1ZVxuXG4gICMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgQFRNUF9hbHBoYWJldDogKCB4ICkgLT5cbiAgICByZXR1cm4gZmFsc2UgdW5sZXNzIEBULm5vbmVtcHR5X3RleHQuZG1faXNhICAgIEBkYXRhLCBudWxsLCB4XG4gICAgcmV0dXJuIGZhbHNlIHVubGVzcyBAVC5pbmNyZW1lbnRhbF90ZXh0LmRtX2lzYSBAZGF0YSwgbnVsbCwgeFxuICAgIHJldHVybiB0cnVlXG5cbiAgIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBAX21heF9pbnRlZ2VyXyQ6ICggeCwgYmFzZSApIC0+XG4gICAgcmV0dXJuIEBmYWlsIFwieCBub3QgYSBwb3NpdGl2ZSBzYWZlIGludGVnZXJcIiAgICAgICAgICAgdW5sZXNzIEBULnBpbnRlZ2VyLmlzYSAgICAgICAgeFxuICAgIHJldHVybiBAZmFpbCBcImJhc2Ugbm90IGEgc2FmZSBpbnRlZ2VyIGdyZWF0ZXIgdGhhbiAxXCIgIHVubGVzcyBAVC5iYXNlLmlzYSAgICAgICAgICAgIGJhc2VcbiAgICByZXR1cm4gQGZhaWwgXCJ4IG5vdCBhIHBvc2l0aXZlIGFsbC1uaW5lcnNcIiAgICAgICAgICAgICB1bmxlc3MgaXNfcG9zaXRpdmVfYWxsX25pbmVyICB4LCBiYXNlXG4gICAgcmV0dXJuIHRydWVcblxuICAjLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICMjIyBUQUlOVCBzaG91bGQgYmUgbWV0aG9kIG9mIGBULl9tYXhfaW50ZWdlcl8kYCAjIyNcbiAgY3JlYXRlX21heF9pbnRlZ2VyXyQ6ICh7IGJhc2UsIGRpZ2l0c19udW1vZiwgfSkgLT5cbiAgICBAYmFzZS52YWxpZGF0ZSAgICAgICAgYmFzZVxuICAgIEBkaWdpdHNfbnVtb2YudmFsaWRhdGUgZGlnaXRzX251bW9mXG4gICAgUiA9IE1hdGgubWluICggZ2V0X21heF9pbnRlZ2VyIE51bWJlci5NQVhfU0FGRV9JTlRFR0VSLCBiYXNlICksICggKCBiYXNlICoqIGRpZ2l0c19udW1vZiApIC0gMSApXG4gICAgQF9tYXhfaW50ZWdlcl8kLnZhbGlkYXRlIFIsIGJhc2VcbiAgICByZXR1cm4gUlxuXG4gICMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgQF9tYXhfZGlnaXRzX3Blcl9pZHhfJDogKCB4LCBwbWFnX2NocnMgKSAtPlxuICAgIHJldHVybiBAZmFpbCBcInggbm90IGEgcG9zaXRpdmUgc2FmZSBpbnRlZ2VyXCIgICAgICAgICAgIHVubGVzcyBAVC5waW50ZWdlci5pc2EgeFxuICAgIHJldHVybiBAZmFpbCBcInggI3t4fSBleGNlZWRzIGxpbWl0IHNldCBieSBtYWduaWZpZXJzXCIgIHVubGVzcyB4IDw9IHBtYWdfY2hycy5sZW5ndGhcbiAgICByZXR1cm4gdHJ1ZVxuXG4jPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbl90ZXN0X21vbm90b255ID0gKCB4LCBjbXAgKSAtPlxuICB7IGNocnMsIH0gPSBAZGF0YSAjID0gQGNyZWF0ZSBkYXRhXG4gIHJldHVybiAoIEBmYWlsIFwiZW1wdHkgaXMgbm90IG1vbm90b25pY1wiICkgaWYgY2hycy5sZW5ndGggaXMgMFxuICByZXR1cm4gdHJ1ZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBjaHJzLmxlbmd0aCBpcyAxXG4gIGZvciBpZHggaW4gWyAxIC4uLiBjaHJzLmxlbmd0aCBdXG4gICAgcHJ2X2NociA9IGNocnNbIGlkeCAtIDEgXVxuICAgIGNociAgICAgPSBjaHJzWyBpZHggICAgIF1cbiAgICBSICAgICAgID0gc3dpdGNoIGNtcFxuICAgICAgd2hlbiAnPicgdGhlbiBwcnZfY2hyID4gY2hyXG4gICAgICB3aGVuICc8JyB0aGVuIHBydl9jaHIgPCBjaHJcbiAgICAgIGVsc2UgdGhyb3cgbmV3IEVycm9yIFwizqlic2tfX182IChpbnRlcm5hbCkgZXhwZWN0ZWQgJz4nIG9yICc8JywgZ290ICN7cnByIGNtcH1cIlxuICAgIGNvbnRpbnVlIGlmIFJcbiAgICBAYXNzaWduIHsgZmFpbDogeyB4LCBpZHgsIHBydl9jaHIsIGNociwgfSwgfVxuICAgIHJldHVybiBmYWxzZVxuICByZXR1cm4gdHJ1ZVxuXG4jPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbk9iamVjdC5hc3NpZ24gbW9kdWxlLmV4cG9ydHMsIHtcbiAgSG9sbGVyaXRoX3R5cGVzcGFjZSxcbiAgQ0ZHOiAgICAgICAgICAgICAgICAgIENGRyxcbiAgaW50ZXJuYWxzLCB9XG4iXX0=
