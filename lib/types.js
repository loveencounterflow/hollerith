(function() {
  'use strict';
  var Hollerith_typespace, SFMODULES, Type, Typespace, _test_monotony, clean_assign, debug, hide, nameit, omit, regex, remap, rpr, set_getter, type_of;

  //===========================================================================================================
  SFMODULES = require('bricabrac-single-file-modules');

  ({type_of} = SFMODULES.unstable.require_type_of());

  ({
    show_no_colors: rpr
  } = SFMODULES.unstable.require_show());

  ({debug} = console);

  ({regex} = require('regex'));

  ({hide, set_getter} = SFMODULES.require_managed_property_tools());

  ({nameit} = SFMODULES.require_nameit());

  ({clean_assign} = SFMODULES.unstable.require_clean_assign());

  ({remap, omit} = SFMODULES.unstable.require_remap());

  //===========================================================================================================
  /* NOTE Future Single-File Module */
  Type = class Type {
    //---------------------------------------------------------------------------------------------------------
    constructor(typespace, name, isa) {
      hide(this, 'name', name);
      hide(this, 'T', typespace);
      hide(this, '_isa', isa);
      this.data = {}; // new Bounded_list()
      return void 0;
    }

    //---------------------------------------------------------------------------------------------------------
    isa(x, data = null, mapping = null) {
      var R;
      this.data = {};
      R = this._isa.call(this, x);
      //.......................................................................................................
      if (data != null) {
        if (mapping != null) {
          clean_assign(data, remap(clean_assign({}, this.data), mapping));
        } else {
          /* d1 m1 */          clean_assign(data, this.data);
        }
      } else /* d1 m0 */if (mapping != null) {
        remap(this.data, mapping);
      }
/* d0 m1 */      return R/* d0 m0 */;
    }

    //---------------------------------------------------------------------------------------------------------
    assign(...P) {
      return clean_assign(this.data, ...P);
    }

    //---------------------------------------------------------------------------------------------------------
    fail(message, ...P) {
      clean_assign(this.data, {message}, ...P);
      return false;
    }

  };

  //===========================================================================================================
  Typespace = class Typespace {
    //---------------------------------------------------------------------------------------------------------
    constructor() {
      var Typeclass, clasz, i, isa, len, name, ref;
      clasz = this.constructor;
      ref = Object.getOwnPropertyNames(clasz);
      for (i = 0, len = ref.length; i < len; i++) {
        name = ref[i];
        Typeclass = class Typeclass extends Type {};
        nameit(name, Typeclass);
        this[name] = new Typeclass(this, name, isa = clasz[name]);
      }
      return void 0;
    }

  };

  //###########################################################################################################
  // HOLLERITH TYPESPACE
  //===========================================================================================================
  Hollerith_typespace = class Hollerith_typespace extends Typespace {
    //=========================================================================================================
    static text(x) {
      return (type_of(x)) === 'text';
    }

    static nonempty_text(x) {
      return (this.T.text.isa(x)) && x.length > 0;
    }

    static float(x) {
      return Number.isFinite(x);
    }

    static integer(x) {
      return Number.isSafeInteger(x);
    }

    static pinteger(x) {
      return (this.T.integer.isa(x)) && x > 0;
    }

    static zpinteger(x) {
      return (this.T.integer.isa(x)) && x >= 0;
    }

    static cardinal(x) {
      return this.T.zpinteger.isa(x);
    }

    //---------------------------------------------------------------------------------------------------------
    static dimension(x) {
      return this.T.pinteger.isa(x);
    }

    //---------------------------------------------------------------------------------------------------------
    static incremental_text(x) {
      if (!this.T.text.isa(x)) {
        return false;
      }
      // @assign { iam: 'incremental_text', }
      this.assign({
        chrs: Array.from(x)
      });
      return _test_monotony.call(this, x, '<');
    }

    //---------------------------------------------------------------------------------------------------------
    static decremental_text(x) {
      if (!this.T.text.isa(x)) {
        return false;
      }
      this.assign({
        chrs: Array.from(x)
      });
      return _test_monotony.call(this, x, '>');
    }

    //---------------------------------------------------------------------------------------------------------
    static nmag_bare_reversed(x) {
      return this.T.incremental_text.isa(x, this.data);
    }

    static pmag_bare(x) {
      return this.T.incremental_text.isa(x, this.data);
    }

    //---------------------------------------------------------------------------------------------------------
    static magnifiers(x) {
      var nmag, nmag_bare_reversed, pmag, pmag_bare;
      if (!this.T.nonempty_text.isa(x)) {
        return this.fail("expected a magnifier, got an empty text");
      }
      [nmag_bare_reversed, pmag_bare] = x.split(/\s+/v);
      if (!this.T.nmag_bare_reversed.isa(nmag_bare_reversed, this.data, {
        chrs: 'nmag_chrs'
      })) {
        //.......................................................................................................
        // @assign { iam: 'magnifiers', }; debug 'Ωbsk___1', @data
        return this.fail("Ωbsk___2 ???");
      }
      if (!this.T.pmag_bare.isa(pmag_bare, this.data, {
        chrs: 'pmag_chrs'
      })) {
        return this.fail("Ωbsk___3 ???");
      }
      if (!this.T.incremental_text.isa(nmag_bare_reversed + pmag_bare)) {
        return this.fail("Ωbsk___4 ???");
      }
      //.......................................................................................................
      nmag = ' ' + this.data.nmag_chrs.reverse().join('');
      pmag = ' ' + pmag_bare;
      this.assign({nmag, pmag});
      return true;
    }

  };

  //===========================================================================================================
  _test_monotony = function(x, cmp) {
    var R, chr, chrs, i, idx, prv_chr, ref;
    ({chrs} = this.data); // = @create data
    if (chrs.length === 0) {
      return this.fail("empty is not monotonic");
    }
    if (chrs.length === 1) {
      return true;
    }
    for (idx = i = 1, ref = chrs.length; (1 <= ref ? i < ref : i > ref); idx = 1 <= ref ? ++i : --i) {
      prv_chr = chrs[idx - 1];
      chr = chrs[idx];
      R = (function() {
        switch (cmp) {
          case '>':
            return prv_chr > chr;
          case '<':
            return prv_chr < chr;
          default:
            throw new Error(`Ωbsk___5 (internal) expected '>' or '<', got ${rpr(cmp)}`);
        }
      })();
      if (R) {
        continue;
      }
      this.assign({
        fail: {x, idx, prv_chr, chr}
      });
      return false;
    }
    return true;
  };

  //===========================================================================================================
  Object.assign(module.exports, {
    types: new Hollerith_typespace(),
    internals: {Type, Typespace, Hollerith_typespace}
  });

  // Bounded_list

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL3R5cGVzLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQTtFQUFBO0FBQUEsTUFBQSxtQkFBQSxFQUFBLFNBQUEsRUFBQSxJQUFBLEVBQUEsU0FBQSxFQUFBLGNBQUEsRUFBQSxZQUFBLEVBQUEsS0FBQSxFQUFBLElBQUEsRUFBQSxNQUFBLEVBQUEsSUFBQSxFQUFBLEtBQUEsRUFBQSxLQUFBLEVBQUEsR0FBQSxFQUFBLFVBQUEsRUFBQSxPQUFBOzs7RUFHQSxTQUFBLEdBQTRCLE9BQUEsQ0FBUSwrQkFBUjs7RUFDNUIsQ0FBQSxDQUFFLE9BQUYsQ0FBQSxHQUE0QixTQUFTLENBQUMsUUFBUSxDQUFDLGVBQW5CLENBQUEsQ0FBNUI7O0VBQ0EsQ0FBQTtJQUFFLGNBQUEsRUFBZ0I7RUFBbEIsQ0FBQSxHQUE0QixTQUFTLENBQUMsUUFBUSxDQUFDLFlBQW5CLENBQUEsQ0FBNUI7O0VBQ0EsQ0FBQSxDQUFFLEtBQUYsQ0FBQSxHQUE0QixPQUE1Qjs7RUFDQSxDQUFBLENBQUUsS0FBRixDQUFBLEdBQTRCLE9BQUEsQ0FBUSxPQUFSLENBQTVCOztFQUNBLENBQUEsQ0FBRSxJQUFGLEVBQ0UsVUFERixDQUFBLEdBQzRCLFNBQVMsQ0FBQyw4QkFBVixDQUFBLENBRDVCOztFQUVBLENBQUEsQ0FBRSxNQUFGLENBQUEsR0FBNEIsU0FBUyxDQUFDLGNBQVYsQ0FBQSxDQUE1Qjs7RUFDQSxDQUFBLENBQUUsWUFBRixDQUFBLEdBQTRCLFNBQVMsQ0FBQyxRQUFRLENBQUMsb0JBQW5CLENBQUEsQ0FBNUI7O0VBQ0EsQ0FBQSxDQUFFLEtBQUYsRUFDRSxJQURGLENBQUEsR0FDNEIsU0FBUyxDQUFDLFFBQVEsQ0FBQyxhQUFuQixDQUFBLENBRDVCLEVBWkE7Ozs7RUFrQk0sT0FBTixNQUFBLEtBQUEsQ0FBQTs7SUFHRSxXQUFhLENBQUUsU0FBRixFQUFhLElBQWIsRUFBbUIsR0FBbkIsQ0FBQTtNQUNY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LENBQWMsTUFBTSxDQUFDLE9BQXJCLEVBQ0U7SUFBQSxLQUFBLEVBQVksSUFBSSxtQkFBSixDQUFBLENBQVo7SUFDQSxTQUFBLEVBQVcsQ0FDVCxJQURTLEVBRVQsU0FGUyxFQUdULG1CQUhTO0VBRFgsQ0FERjs7RUEvSEE7QUFBQSIsInNvdXJjZXNDb250ZW50IjpbIlxuJ3VzZSBzdHJpY3QnXG5cbiM9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuU0ZNT0RVTEVTICAgICAgICAgICAgICAgICA9IHJlcXVpcmUgJ2JyaWNhYnJhYy1zaW5nbGUtZmlsZS1tb2R1bGVzJ1xueyB0eXBlX29mLCAgICAgICAgICAgICAgfSA9IFNGTU9EVUxFUy51bnN0YWJsZS5yZXF1aXJlX3R5cGVfb2YoKVxueyBzaG93X25vX2NvbG9yczogcnByLCAgfSA9IFNGTU9EVUxFUy51bnN0YWJsZS5yZXF1aXJlX3Nob3coKVxueyBkZWJ1ZywgICAgICAgICAgICAgICAgfSA9IGNvbnNvbGVcbnsgcmVnZXgsICAgICAgICAgICAgICAgIH0gPSByZXF1aXJlICdyZWdleCdcbnsgaGlkZSxcbiAgc2V0X2dldHRlciwgICAgICAgICAgIH0gPSBTRk1PRFVMRVMucmVxdWlyZV9tYW5hZ2VkX3Byb3BlcnR5X3Rvb2xzKClcbnsgbmFtZWl0LCAgICAgICAgICAgICAgIH0gPSBTRk1PRFVMRVMucmVxdWlyZV9uYW1laXQoKVxueyBjbGVhbl9hc3NpZ24sICAgICAgICAgfSA9IFNGTU9EVUxFUy51bnN0YWJsZS5yZXF1aXJlX2NsZWFuX2Fzc2lnbigpXG57IHJlbWFwLFxuICBvbWl0LCAgICAgICAgICAgICAgICAgfSA9IFNGTU9EVUxFUy51bnN0YWJsZS5yZXF1aXJlX3JlbWFwKClcblxuXG4jPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiMjIyBOT1RFIEZ1dHVyZSBTaW5nbGUtRmlsZSBNb2R1bGUgIyMjXG5jbGFzcyBUeXBlXG5cbiAgIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBjb25zdHJ1Y3RvcjogKCB0eXBlc3BhY2UsIG5hbWUsIGlzYSApIC0+XG4gICAgaGlkZSBALCAnbmFtZScsICAgbmFtZVxuICAgIGhpZGUgQCwgJ1QnLCAgICAgIHR5cGVzcGFjZVxuICAgIGhpZGUgQCwgJ19pc2EnLCAgIGlzYVxuICAgIEBkYXRhICAgICAgICAgICA9IHt9ICMgbmV3IEJvdW5kZWRfbGlzdCgpXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuXG4gICMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgaXNhOiAoIHgsIGRhdGEgPSBudWxsLCBtYXBwaW5nID0gbnVsbCApIC0+XG4gICAgQGRhdGEgICA9IHt9XG4gICAgUiAgICAgICA9IEBfaXNhLmNhbGwgQCwgeFxuICAgICMuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uXG4gICAgaWYgZGF0YT9cbiAgICAgIGlmIG1hcHBpbmc/ICAgICB0aGVuICBjbGVhbl9hc3NpZ24gZGF0YSwgKCByZW1hcCAoIGNsZWFuX2Fzc2lnbiB7fSwgQGRhdGEgKSwgbWFwcGluZyApICAjIyMgZDEgbTEgIyMjXG4gICAgICBlbHNlICAgICAgICAgICAgICAgICAgY2xlYW5fYXNzaWduIGRhdGEsICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBkYXRhICAgICAgICAgICAgICAgIyMjIGQxIG0wICMjI1xuICAgIGVsc2UgaWYgbWFwcGluZz8gIHRoZW4gICAgICAgICAgICAgICAgICAgICAgIHJlbWFwICAgICAgICAgICAgICAgICAgICBAZGF0YSwgICBtYXBwaW5nICAgICMjIyBkMCBtMSAjIyNcbiAgICByZXR1cm4gUiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIyMgZDAgbTAgIyMjXG5cbiAgIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBhc3NpZ246ICggUC4uLiApIC0+IGNsZWFuX2Fzc2lnbiBAZGF0YSwgUC4uLlxuXG4gICMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgZmFpbDogKCBtZXNzYWdlLCBQLi4uICkgLT4gY2xlYW5fYXNzaWduIEBkYXRhLCB7IG1lc3NhZ2UsIH0sIFAuLi47IGZhbHNlXG5cblxuIz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5jbGFzcyBUeXBlc3BhY2VcblxuICAjLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIGNvbnN0cnVjdG9yOiAtPlxuICAgIGNsYXN6ID0gQGNvbnN0cnVjdG9yXG4gICAgZm9yIG5hbWUgaW4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMgY2xhc3pcbiAgICAgIGNsYXNzIFR5cGVjbGFzcyBleHRlbmRzIFR5cGVcbiAgICAgIG5hbWVpdCBuYW1lLCBUeXBlY2xhc3NcbiAgICAgIEBbIG5hbWUgXSA9IG5ldyBUeXBlY2xhc3MgQCwgbmFtZSwgaXNhID0gY2xhc3pbIG5hbWUgXVxuICAgIHJldHVybiB1bmRlZmluZWRcblxuXG4jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcbiMgSE9MTEVSSVRIIFRZUEVTUEFDRVxuIz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5jbGFzcyBIb2xsZXJpdGhfdHlwZXNwYWNlIGV4dGVuZHMgVHlwZXNwYWNlXG5cbiAgIz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICBAdGV4dDogICAgICAgICAgICggeCApIC0+ICggdHlwZV9vZiB4ICkgaXMgJ3RleHQnXG4gIEBub25lbXB0eV90ZXh0OiAgKCB4ICkgLT4gKCBAVC50ZXh0LmlzYSB4ICkgYW5kIHgubGVuZ3RoID4gMFxuICBAZmxvYXQ6ICAgICAgICAgICggeCApIC0+IE51bWJlci5pc0Zpbml0ZSB4XG4gIEBpbnRlZ2VyOiAgICAgICAgKCB4ICkgLT4gTnVtYmVyLmlzU2FmZUludGVnZXIgeFxuICBAcGludGVnZXI6ICAgICAgICggeCApIC0+ICggQFQuaW50ZWdlci5pc2EgeCApIGFuZCB4ID4gMFxuICBAenBpbnRlZ2VyOiAgICAgICggeCApIC0+ICggQFQuaW50ZWdlci5pc2EgeCApIGFuZCB4ID49IDBcbiAgQGNhcmRpbmFsOiAgICAgICAoIHggKSAtPiBAVC56cGludGVnZXIuaXNhIHhcbiAgIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBAZGltZW5zaW9uOiAgICAgICggeCApIC0+IEBULnBpbnRlZ2VyLmlzYSAgeFxuXG4gICMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgQGluY3JlbWVudGFsX3RleHQ6ICggeCApIC0+XG4gICAgcmV0dXJuIGZhbHNlIHVubGVzcyBAVC50ZXh0LmlzYSB4XG4gICAgIyBAYXNzaWduIHsgaWFtOiAnaW5jcmVtZW50YWxfdGV4dCcsIH1cbiAgICBAYXNzaWduIHsgY2hyczogKCBBcnJheS5mcm9tIHggKSwgfVxuICAgIHJldHVybiBfdGVzdF9tb25vdG9ueS5jYWxsIEAsIHgsICc8J1xuXG4gICMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgQGRlY3JlbWVudGFsX3RleHQ6ICggeCApIC0+XG4gICAgcmV0dXJuIGZhbHNlIHVubGVzcyBAVC50ZXh0LmlzYSB4XG4gICAgQGFzc2lnbiB7IGNocnM6ICggQXJyYXkuZnJvbSB4ICksIH1cbiAgICByZXR1cm4gX3Rlc3RfbW9ub3RvbnkuY2FsbCBALCB4LCAnPidcblxuICAjLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIEBubWFnX2JhcmVfcmV2ZXJzZWQ6ICAoIHggKSAtPiBAVC5pbmNyZW1lbnRhbF90ZXh0LmlzYSB4LCBAZGF0YVxuICBAcG1hZ19iYXJlOiAgICAgICAgICAgKCB4ICkgLT4gQFQuaW5jcmVtZW50YWxfdGV4dC5pc2EgeCwgQGRhdGFcblxuICAjLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIEBtYWduaWZpZXJzOiAoIHggKSAtPlxuICAgIHJldHVybiAoIEBmYWlsIFwiZXhwZWN0ZWQgYSBtYWduaWZpZXIsIGdvdCBhbiBlbXB0eSB0ZXh0XCIgKSB1bmxlc3MgQFQubm9uZW1wdHlfdGV4dC5pc2EgeFxuICAgIFsgbm1hZ19iYXJlX3JldmVyc2VkLFxuICAgICAgcG1hZ19iYXJlLCAgXSA9IHguc3BsaXQgL1xccysvdlxuICAgICMuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uXG4gICAgIyBAYXNzaWduIHsgaWFtOiAnbWFnbmlmaWVycycsIH07IGRlYnVnICfOqWJza19fXzEnLCBAZGF0YVxuICAgIHJldHVybiAoIEBmYWlsIFwizqlic2tfX18yID8/P1wiICkgdW5sZXNzICBAVC5ubWFnX2JhcmVfcmV2ZXJzZWQuaXNhIG5tYWdfYmFyZV9yZXZlcnNlZCwgQGRhdGEsIHsgY2hyczogJ25tYWdfY2hycycsIH1cbiAgICByZXR1cm4gKCBAZmFpbCBcIs6pYnNrX19fMyA/Pz9cIiApIHVubGVzcyAgQFQucG1hZ19iYXJlLmlzYSAgICAgICAgICBwbWFnX2JhcmUsICAgICAgICAgIEBkYXRhLCB7IGNocnM6ICdwbWFnX2NocnMnLCB9XG4gICAgcmV0dXJuICggQGZhaWwgXCLOqWJza19fXzQgPz8/XCIgKSB1bmxlc3MgIEBULmluY3JlbWVudGFsX3RleHQuaXNhICAgbm1hZ19iYXJlX3JldmVyc2VkICsgcG1hZ19iYXJlXG4gICAgIy4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi5cbiAgICBubWFnICAgICAgICAgICAgPSAnICcgKyBAZGF0YS5ubWFnX2NocnMucmV2ZXJzZSgpLmpvaW4gJydcbiAgICBwbWFnICAgICAgICAgICAgPSAnICcgKyBwbWFnX2JhcmVcbiAgICBAYXNzaWduIHsgbm1hZywgcG1hZywgfVxuICAgIHJldHVybiB0cnVlXG5cblxuIz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5fdGVzdF9tb25vdG9ueSA9ICggeCwgY21wICkgLT5cbiAgeyBjaHJzLCB9ID0gQGRhdGEgIyA9IEBjcmVhdGUgZGF0YVxuICByZXR1cm4gKCBAZmFpbCBcImVtcHR5IGlzIG5vdCBtb25vdG9uaWNcIiApIGlmIGNocnMubGVuZ3RoIGlzIDBcbiAgcmV0dXJuIHRydWUgICBpZiBjaHJzLmxlbmd0aCBpcyAxXG4gIGZvciBpZHggaW4gWyAxIC4uLiBjaHJzLmxlbmd0aCBdXG4gICAgcHJ2X2NociA9IGNocnNbIGlkeCAtIDEgXVxuICAgIGNociAgICAgPSBjaHJzWyBpZHggICAgIF1cbiAgICBSICAgICAgID0gc3dpdGNoIGNtcFxuICAgICAgd2hlbiAnPicgdGhlbiBwcnZfY2hyID4gY2hyXG4gICAgICB3aGVuICc8JyB0aGVuIHBydl9jaHIgPCBjaHJcbiAgICAgIGVsc2UgdGhyb3cgbmV3IEVycm9yIFwizqlic2tfX181IChpbnRlcm5hbCkgZXhwZWN0ZWQgJz4nIG9yICc8JywgZ290ICN7cnByIGNtcH1cIlxuICAgIGNvbnRpbnVlIGlmIFJcbiAgICBAYXNzaWduIHsgZmFpbDogeyB4LCBpZHgsIHBydl9jaHIsIGNociwgfSwgfVxuICAgIHJldHVybiBmYWxzZVxuICByZXR1cm4gdHJ1ZVxuXG4jPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbk9iamVjdC5hc3NpZ24gbW9kdWxlLmV4cG9ydHMsXG4gIHR5cGVzOiAgICAgIG5ldyBIb2xsZXJpdGhfdHlwZXNwYWNlKClcbiAgaW50ZXJuYWxzOiB7XG4gICAgVHlwZVxuICAgIFR5cGVzcGFjZVxuICAgIEhvbGxlcml0aF90eXBlc3BhY2VcbiAgICAjIEJvdW5kZWRfbGlzdFxuICAgIH1cbiJdfQ==
