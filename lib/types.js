(function() {
  'use strict';
  var Hollerith_typespace, SFMODULES, Type, Typespace, _test_monotony, clean_assign, debug, hide, nameit, omit, regex, remap, rpr, set_getter, type_of;

  //===========================================================================================================
  SFMODULES = require('bricabrac-single-file-modules');

  ({type_of} = SFMODULES.unstable.require_type_of());

  ({
    show_no_colors: rpr
  } = SFMODULES.unstable.require_show());

  ({debug} = console);

  ({regex} = require('regex'));

  ({hide, set_getter} = SFMODULES.require_managed_property_tools());

  ({nameit} = SFMODULES.require_nameit());

  ({clean_assign} = SFMODULES.unstable.require_clean_assign());

  ({remap, omit} = SFMODULES.unstable.require_remap());

  //===========================================================================================================
  /* NOTE Future Single-File Module */
  Type = class Type {
    //---------------------------------------------------------------------------------------------------------
    constructor(typespace, name, isa) {
      hide(this, 'name', name);
      hide(this, 'T', typespace);
      hide(this, '_isa', isa);
      this.data = {}; // new Bounded_list()
      return void 0;
    }

    //---------------------------------------------------------------------------------------------------------
    isa(x, data = null, mapping = null) {
      var R;
      this.data = {};
      R = this._isa.call(this, x);
      //.......................................................................................................
      if (data != null) {
        if (mapping != null) {
          clean_assign(data, remap(clean_assign({}, this.data), mapping));
        } else {
          /* d1 m1 */          clean_assign(data, this.data);
        }
      } else /* d1 m0 */if (mapping != null) {
        remap(this.data, mapping);
      }
/* d0 m1 */      return R/* d0 m0 */;
    }

    //---------------------------------------------------------------------------------------------------------
    assign(...P) {
      return clean_assign(this.data, ...P);
    }

    //---------------------------------------------------------------------------------------------------------
    fail(message, ...P) {
      clean_assign(this.data, {message}, ...P);
      return false;
    }

  };

  //===========================================================================================================
  Typespace = class Typespace {
    //---------------------------------------------------------------------------------------------------------
    constructor() {
      var Typeclass, clasz, i, isa, len, name, ref;
      clasz = this.constructor;
      ref = Object.getOwnPropertyNames(clasz);
      for (i = 0, len = ref.length; i < len; i++) {
        name = ref[i];
        Typeclass = class Typeclass extends Type {};
        nameit(name, Typeclass);
        this[name] = new Typeclass(this, name, isa = clasz[name]);
      }
      return void 0;
    }

  };

  //###########################################################################################################
  // HOLLERITH TYPESPACE
  //===========================================================================================================
  Hollerith_typespace = class Hollerith_typespace extends Typespace {
    //=========================================================================================================
    static text(x) {
      return (type_of(x)) === 'text';
    }

    static nonempty_text(x) {
      return (this.T.text.isa(x)) && x.length > 0;
    }

    static float(x) {
      return Number.isFinite(x);
    }

    static integer(x) {
      return Number.isSafeInteger(x);
    }

    static pinteger(x) {
      return (this.T.integer.isa(x)) && x > 0;
    }

    static zpinteger(x) {
      return (this.T.integer.isa(x)) && x >= 0;
    }

    static cardinal(x) {
      return this.T.zpinteger.isa(x);
    }

    //---------------------------------------------------------------------------------------------------------
    static dimension(x) {
      return this.T.pinteger.isa(x);
    }

    //---------------------------------------------------------------------------------------------------------
    static incremental_text(x) {
      if (!this.T.text.isa(x)) {
        return false;
      }
      // @assign { iam: 'incremental_text', }
      this.assign({
        chrs: Array.from(x)
      });
      debug('Ωbsk___5', this.data);
      return _test_monotony.call(this, x, '<');
    }

    //---------------------------------------------------------------------------------------------------------
    static decremental_text(x) {
      if (!this.T.text.isa(x)) {
        return false;
      }
      this.assign({
        chrs: Array.from(x)
      });
      return _test_monotony.call(this, x, '>');
    }

    //---------------------------------------------------------------------------------------------------------
    static nmag_bare_reversed(x) {
      return this.T.incremental_text.isa2(x, this.data);
    }

    static pmag_bare(x) {
      return this.T.incremental_text.isa2(x, this.data);
    }

    //---------------------------------------------------------------------------------------------------------
    static magnifiers(x) {
      var nmag, nmag_bare_reversed, pmag, pmag_bare;
      if (!this.T.nonempty_text.isa(x)) {
        return this.fail("expected a magnifier, got an empty text");
      }
      [nmag_bare_reversed, pmag_bare] = x.split(/\s+/v);
      if (!this.T.nmag_bare_reversed.isa2(nmag_bare_reversed, this.data, {
        chrs: 'nmag_chrs'
      })) {
        //.......................................................................................................
        // @assign { iam: 'magnifiers', }; debug 'Ωbsk___6', @data
        return this.fail("???");
      }
      if (!this.T.pmag_bare.isa2(pmag_bare, this.data, {
        chrs: 'pmag_chrs'
      })) {
        return this.fail("???");
      }
      //.......................................................................................................
      nmag = ' ' + nmag_bare_reversed.reverse();
      pmag = ' ' + pmag_bare;
      this.assign({nmag, pmag});
      return true;
    }

  };

  //===========================================================================================================
  _test_monotony = function(x, cmp) {
    var R, chr, chrs, i, idx, prv_chr, ref;
    ({chrs} = this.data); // = @create data
    if (chrs.length === 0) {
      return this.fail("empty is not monotonic");
    }
    if (chrs.length === 1) {
      return true;
    }
    for (idx = i = 1, ref = chrs.length; (1 <= ref ? i < ref : i > ref); idx = 1 <= ref ? ++i : --i) {
      prv_chr = chrs[idx - 1];
      chr = chrs[idx];
      R = (function() {
        switch (cmp) {
          case '>':
            return prv_chr > chr;
          case '<':
            return prv_chr < chr;
          default:
            throw new Error(`Ωbsk___7 (internal) expected '>' or '<', got ${rpr(cmp)}`);
        }
      })();
      if (R) {
        continue;
      }
      this.assign({
        fail: {x, idx, prv_chr, chr}
      });
      return false;
    }
    return true;
  };

  //===========================================================================================================
  Object.assign(module.exports, {
    types: new Hollerith_typespace(),
    internals: {Type, Typespace, Hollerith_typespace}
  });

  // Bounded_list

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL3R5cGVzLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQTtFQUFBO0FBQUEsTUFBQSxtQkFBQSxFQUFBLFNBQUEsRUFBQSxJQUFBLEVBQUEsU0FBQSxFQUFBLGNBQUEsRUFBQSxZQUFBLEVBQUEsS0FBQSxFQUFBLElBQUEsRUFBQSxNQUFBLEVBQUEsSUFBQSxFQUFBLEtBQUEsRUFBQSxLQUFBLEVBQUEsR0FBQSxFQUFBLFVBQUEsRUFBQSxPQUFBOzs7RUFHQSxTQUFBLEdBQTRCLE9BQUEsQ0FBUSwrQkFBUjs7RUFDNUIsQ0FBQSxDQUFFLE9BQUYsQ0FBQSxHQUE0QixTQUFTLENBQUMsUUFBUSxDQUFDLGVBQW5CLENBQUEsQ0FBNUI7O0VBQ0EsQ0FBQTtJQUFFLGNBQUEsRUFBZ0I7RUFBbEIsQ0FBQSxHQUE0QixTQUFTLENBQUMsUUFBUSxDQUFDLFlBQW5CLENBQUEsQ0FBNUI7O0VBQ0EsQ0FBQSxDQUFFLEtBQUYsQ0FBQSxHQUE0QixPQUE1Qjs7RUFDQSxDQUFBLENBQUUsS0FBRixDQUFBLEdBQTRCLE9BQUEsQ0FBUSxPQUFSLENBQTVCOztFQUNBLENBQUEsQ0FBRSxJQUFGLEVBQ0UsVUFERixDQUFBLEdBQzRCLFNBQVMsQ0FBQyw4QkFBVixDQUFBLENBRDVCOztFQUVBLENBQUEsQ0FBRSxNQUFGLENBQUEsR0FBNEIsU0FBUyxDQUFDLGNBQVYsQ0FBQSxDQUE1Qjs7RUFDQSxDQUFBLENBQUUsWUFBRixDQUFBLEdBQTRCLFNBQVMsQ0FBQyxRQUFRLENBQUMsb0JBQW5CLENBQUEsQ0FBNUI7O0VBQ0EsQ0FBQSxDQUFFLEtBQUYsRUFDRSxJQURGLENBQUEsR0FDNEIsU0FBUyxDQUFDLFFBQVEsQ0FBQyxhQUFuQixDQUFBLENBRDVCLEVBWkE7Ozs7RUFrQk0sT0FBTixNQUFBLEtBQUEsQ0FBQTs7SUFHRSxXQUFhLENBQUUsU0FBRixFQUFhLElBQWIsRUFBbUIsR0FBbkIsQ0FBQTtNQUNY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O0FBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJcbid1c2Ugc3RyaWN0J1xuXG4jPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblNGTU9EVUxFUyAgICAgICAgICAgICAgICAgPSByZXF1aXJlICdicmljYWJyYWMtc2luZ2xlLWZpbGUtbW9kdWxlcydcbnsgdHlwZV9vZiwgICAgICAgICAgICAgIH0gPSBTRk1PRFVMRVMudW5zdGFibGUucmVxdWlyZV90eXBlX29mKClcbnsgc2hvd19ub19jb2xvcnM6IHJwciwgIH0gPSBTRk1PRFVMRVMudW5zdGFibGUucmVxdWlyZV9zaG93KClcbnsgZGVidWcsICAgICAgICAgICAgICAgIH0gPSBjb25zb2xlXG57IHJlZ2V4LCAgICAgICAgICAgICAgICB9ID0gcmVxdWlyZSAncmVnZXgnXG57IGhpZGUsXG4gIHNldF9nZXR0ZXIsICAgICAgICAgICB9ID0gU0ZNT0RVTEVTLnJlcXVpcmVfbWFuYWdlZF9wcm9wZXJ0eV90b29scygpXG57IG5hbWVpdCwgICAgICAgICAgICAgICB9ID0gU0ZNT0RVTEVTLnJlcXVpcmVfbmFtZWl0KClcbnsgY2xlYW5fYXNzaWduLCAgICAgICAgIH0gPSBTRk1PRFVMRVMudW5zdGFibGUucmVxdWlyZV9jbGVhbl9hc3NpZ24oKVxueyByZW1hcCxcbiAgb21pdCwgICAgICAgICAgICAgICAgIH0gPSBTRk1PRFVMRVMudW5zdGFibGUucmVxdWlyZV9yZW1hcCgpXG5cblxuIz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4jIyMgTk9URSBGdXR1cmUgU2luZ2xlLUZpbGUgTW9kdWxlICMjI1xuY2xhc3MgVHlwZVxuXG4gICMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgY29uc3RydWN0b3I6ICggdHlwZXNwYWNlLCBuYW1lLCBpc2EgKSAtPlxuICAgIGhpZGUgQCwgJ25hbWUnLCAgIG5hbWVcbiAgICBoaWRlIEAsICdUJywgICAgICB0eXBlc3BhY2VcbiAgICBoaWRlIEAsICdfaXNhJywgICBpc2FcbiAgICBAZGF0YSAgICAgICAgICAgPSB7fSAjIG5ldyBCb3VuZGVkX2xpc3QoKVxuICAgIHJldHVybiB1bmRlZmluZWRcblxuICAjLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIGlzYTogKCB4LCBkYXRhID0gbnVsbCwgbWFwcGluZyA9IG51bGwgKSAtPlxuICAgIEBkYXRhICAgPSB7fVxuICAgIFIgICAgICAgPSBAX2lzYS5jYWxsIEAsIHhcbiAgICAjLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLlxuICAgIGlmIGRhdGE/XG4gICAgICBpZiBtYXBwaW5nPyAgICAgdGhlbiAgY2xlYW5fYXNzaWduIGRhdGEsICggcmVtYXAgKCBjbGVhbl9hc3NpZ24ge30sIEBkYXRhICksIG1hcHBpbmcgKSAgIyMjIGQxIG0xICMjI1xuICAgICAgZWxzZSAgICAgICAgICAgICAgICAgIGNsZWFuX2Fzc2lnbiBkYXRhLCAgICAgICAgICAgICAgICAgICAgICAgICAgICBAZGF0YSAgICAgICAgICAgICAgICMjIyBkMSBtMCAjIyNcbiAgICBlbHNlIGlmIG1hcHBpbmc/ICB0aGVuICAgICAgICAgICAgICAgICAgICAgICByZW1hcCAgICAgICAgICAgICAgICAgICAgQGRhdGEsICAgbWFwcGluZyAgICAjIyMgZDAgbTEgIyMjXG4gICAgcmV0dXJuIFIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyMjIGQwIG0wICMjI1xuXG4gICMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgYXNzaWduOiAoIFAuLi4gKSAtPiBjbGVhbl9hc3NpZ24gQGRhdGEsIFAuLi5cblxuICAjLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIGZhaWw6ICggbWVzc2FnZSwgUC4uLiApIC0+IGNsZWFuX2Fzc2lnbiBAZGF0YSwgeyBtZXNzYWdlLCB9LCBQLi4uOyBmYWxzZVxuXG5cbiM9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuY2xhc3MgVHlwZXNwYWNlXG5cbiAgIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBjb25zdHJ1Y3RvcjogLT5cbiAgICBjbGFzeiA9IEBjb25zdHJ1Y3RvclxuICAgIGZvciBuYW1lIGluIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzIGNsYXN6XG4gICAgICBjbGFzcyBUeXBlY2xhc3MgZXh0ZW5kcyBUeXBlXG4gICAgICBuYW1laXQgbmFtZSwgVHlwZWNsYXNzXG4gICAgICBAWyBuYW1lIF0gPSBuZXcgVHlwZWNsYXNzIEAsIG5hbWUsIGlzYSA9IGNsYXN6WyBuYW1lIF1cbiAgICByZXR1cm4gdW5kZWZpbmVkXG5cblxuIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXG4jIEhPTExFUklUSCBUWVBFU1BBQ0VcbiM9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuY2xhc3MgSG9sbGVyaXRoX3R5cGVzcGFjZSBleHRlbmRzIFR5cGVzcGFjZVxuXG4gICM9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgQHRleHQ6ICAgICAgICAgICAoIHggKSAtPiAoIHR5cGVfb2YgeCApIGlzICd0ZXh0J1xuICBAbm9uZW1wdHlfdGV4dDogICggeCApIC0+ICggQFQudGV4dC5pc2EgeCApIGFuZCB4Lmxlbmd0aCA+IDBcbiAgQGZsb2F0OiAgICAgICAgICAoIHggKSAtPiBOdW1iZXIuaXNGaW5pdGUgeFxuICBAaW50ZWdlcjogICAgICAgICggeCApIC0+IE51bWJlci5pc1NhZmVJbnRlZ2VyIHhcbiAgQHBpbnRlZ2VyOiAgICAgICAoIHggKSAtPiAoIEBULmludGVnZXIuaXNhIHggKSBhbmQgeCA+IDBcbiAgQHpwaW50ZWdlcjogICAgICAoIHggKSAtPiAoIEBULmludGVnZXIuaXNhIHggKSBhbmQgeCA+PSAwXG4gIEBjYXJkaW5hbDogICAgICAgKCB4ICkgLT4gQFQuenBpbnRlZ2VyLmlzYSB4XG4gICMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgQGRpbWVuc2lvbjogICAgICAoIHggKSAtPiBAVC5waW50ZWdlci5pc2EgIHhcblxuICAjLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIEBpbmNyZW1lbnRhbF90ZXh0OiAoIHggKSAtPlxuICAgIHJldHVybiBmYWxzZSB1bmxlc3MgQFQudGV4dC5pc2EgeFxuICAgICMgQGFzc2lnbiB7IGlhbTogJ2luY3JlbWVudGFsX3RleHQnLCB9XG4gICAgQGFzc2lnbiB7IGNocnM6ICggQXJyYXkuZnJvbSB4ICksIH1cbiAgICBkZWJ1ZyAnzqlic2tfX181JywgQGRhdGFcbiAgICByZXR1cm4gX3Rlc3RfbW9ub3RvbnkuY2FsbCBALCB4LCAnPCdcblxuICAjLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIEBkZWNyZW1lbnRhbF90ZXh0OiAoIHggKSAtPlxuICAgIHJldHVybiBmYWxzZSB1bmxlc3MgQFQudGV4dC5pc2EgeFxuICAgIEBhc3NpZ24geyBjaHJzOiAoIEFycmF5LmZyb20geCApLCB9XG4gICAgcmV0dXJuIF90ZXN0X21vbm90b255LmNhbGwgQCwgeCwgJz4nXG5cbiAgIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBAbm1hZ19iYXJlX3JldmVyc2VkOiAgKCB4ICkgLT4gQFQuaW5jcmVtZW50YWxfdGV4dC5pc2EyIHgsIEBkYXRhXG4gIEBwbWFnX2JhcmU6ICAgICAgICAgICAoIHggKSAtPiBAVC5pbmNyZW1lbnRhbF90ZXh0LmlzYTIgeCwgQGRhdGFcblxuICAjLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIEBtYWduaWZpZXJzOiAoIHggKSAtPlxuICAgIHJldHVybiAoIEBmYWlsIFwiZXhwZWN0ZWQgYSBtYWduaWZpZXIsIGdvdCBhbiBlbXB0eSB0ZXh0XCIgKSB1bmxlc3MgQFQubm9uZW1wdHlfdGV4dC5pc2EgeFxuICAgIFsgbm1hZ19iYXJlX3JldmVyc2VkLFxuICAgICAgcG1hZ19iYXJlLCAgXSA9IHguc3BsaXQgL1xccysvdlxuICAgICMuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uXG4gICAgIyBAYXNzaWduIHsgaWFtOiAnbWFnbmlmaWVycycsIH07IGRlYnVnICfOqWJza19fXzYnLCBAZGF0YVxuICAgIHJldHVybiAoIEBmYWlsIFwiPz8/XCIgKSB1bmxlc3MgIEBULm5tYWdfYmFyZV9yZXZlcnNlZC5pc2EyIG5tYWdfYmFyZV9yZXZlcnNlZCwgQGRhdGEsIHsgY2hyczogJ25tYWdfY2hycycsIH1cbiAgICByZXR1cm4gKCBAZmFpbCBcIj8/P1wiICkgdW5sZXNzICBAVC5wbWFnX2JhcmUuaXNhMiAgICAgICAgICBwbWFnX2JhcmUsICAgICAgICAgIEBkYXRhLCB7IGNocnM6ICdwbWFnX2NocnMnLCB9XG4gICAgIy4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi5cbiAgICBubWFnICAgICAgICAgICAgPSAnICcgKyBubWFnX2JhcmVfcmV2ZXJzZWQucmV2ZXJzZSgpXG4gICAgcG1hZyAgICAgICAgICAgID0gJyAnICsgcG1hZ19iYXJlXG4gICAgQGFzc2lnbiB7IG5tYWcsIHBtYWcsIH1cbiAgICByZXR1cm4gdHJ1ZVxuXG5cbiM9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuX3Rlc3RfbW9ub3RvbnkgPSAoIHgsIGNtcCApIC0+XG4gIHsgY2hycywgfSA9IEBkYXRhICMgPSBAY3JlYXRlIGRhdGFcbiAgcmV0dXJuICggQGZhaWwgXCJlbXB0eSBpcyBub3QgbW9ub3RvbmljXCIgKSBpZiBjaHJzLmxlbmd0aCBpcyAwXG4gIHJldHVybiB0cnVlICAgaWYgY2hycy5sZW5ndGggaXMgMVxuICBmb3IgaWR4IGluIFsgMSAuLi4gY2hycy5sZW5ndGggXVxuICAgIHBydl9jaHIgPSBjaHJzWyBpZHggLSAxIF1cbiAgICBjaHIgICAgID0gY2hyc1sgaWR4ICAgICBdXG4gICAgUiAgICAgICA9IHN3aXRjaCBjbXBcbiAgICAgIHdoZW4gJz4nIHRoZW4gcHJ2X2NociA+IGNoclxuICAgICAgd2hlbiAnPCcgdGhlbiBwcnZfY2hyIDwgY2hyXG4gICAgICBlbHNlIHRocm93IG5ldyBFcnJvciBcIs6pYnNrX19fNyAoaW50ZXJuYWwpIGV4cGVjdGVkICc+JyBvciAnPCcsIGdvdCAje3JwciBjbXB9XCJcbiAgICBjb250aW51ZSBpZiBSXG4gICAgQGFzc2lnbiB7IGZhaWw6IHsgeCwgaWR4LCBwcnZfY2hyLCBjaHIsIH0sIH1cbiAgICByZXR1cm4gZmFsc2VcbiAgcmV0dXJuIHRydWVcblxuIz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5PYmplY3QuYXNzaWduIG1vZHVsZS5leHBvcnRzLFxuICB0eXBlczogICAgICBuZXcgSG9sbGVyaXRoX3R5cGVzcGFjZSgpXG4gIGludGVybmFsczoge1xuICAgIFR5cGVcbiAgICBUeXBlc3BhY2VcbiAgICBIb2xsZXJpdGhfdHlwZXNwYWNlXG4gICAgIyBCb3VuZGVkX2xpc3RcbiAgICB9XG4iXX0=
