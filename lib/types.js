(function() {
  'use strict';
  var CFG, Hollerith_typespace, SFMODULES, Type, Typespace, _test_monotony, clean_assign, debug, freeze, hide, nameit, omit, regex, remap, rpr, set_getter, type_of;

  //===========================================================================================================
  SFMODULES = require('bricabrac-single-file-modules');

  ({type_of} = SFMODULES.unstable.require_type_of());

  ({
    show_no_colors: rpr
  } = SFMODULES.unstable.require_show());

  ({debug} = console);

  ({regex} = require('regex'));

  ({hide, set_getter} = SFMODULES.require_managed_property_tools());

  ({nameit} = SFMODULES.require_nameit());

  ({clean_assign} = SFMODULES.unstable.require_clean_assign());

  ({remap, omit} = SFMODULES.unstable.require_remap());

  ({freeze} = Object);

  CFG = Symbol.for('cfg');

  //===========================================================================================================
  /* NOTE Future Single-File Module */
  Type = class Type {
    //---------------------------------------------------------------------------------------------------------
    constructor(typespace, name, isa) {
      hide(this, 'name', name);
      hide(this, 'T', typespace);
      hide(this, '_isa', isa);
      set_getter(this, CFG, () => {
        return this.T[CFG];
      });
      this.data = {}; // new Bounded_list()
      return void 0;
    }

    //---------------------------------------------------------------------------------------------------------
    isa(x, data = null, mapping = null) {
      var R;
      this.data = {};
      R = this._isa.call(this, x);
      //.......................................................................................................
      if (data != null) {
        if (mapping != null) {
          clean_assign(data, remap(clean_assign({}, this.data), mapping));
        } else {
          /* d1 m1 */          clean_assign(data, this.data);
        }
      } else /* d1 m0 */if (mapping != null) {
        remap(this.data, mapping);
      }
/* d0 m1 */      return R/* d0 m0 */;
    }

    //---------------------------------------------------------------------------------------------------------
    assign(...P) {
      return clean_assign(this.data, ...P);
    }

    //---------------------------------------------------------------------------------------------------------
    fail(message, ...P) {
      clean_assign(this.data, {message}, ...P);
      return false;
    }

  };

  Typespace = (function() {
    //===========================================================================================================
    class Typespace {
      //=========================================================================================================
      constructor(cfg = null) {
        var Typeclass, clasz, i, isa, len, name, ref, ref1;
        clasz = this.constructor;
        this[CFG] = freeze(clean_assign({}, (ref = clasz[CFG]) != null ? ref : void 0, cfg != null ? cfg : void 0));
        ref1 = Object.getOwnPropertyNames(clasz);
        for (i = 0, len = ref1.length; i < len; i++) {
          name = ref1[i];
          Typeclass = class Typeclass extends Type {};
          nameit(name, Typeclass);
          this[name] = new Typeclass(this, name, isa = clasz[name]);
        }
        return void 0;
      }

    };

    //---------------------------------------------------------------------------------------------------------
    Typespace[CFG] = null;

    return Typespace;

  }).call(this);

  Hollerith_typespace = (function() {
    //###########################################################################################################
    // HOLLERITH TYPESPACE
    //===========================================================================================================
    class Hollerith_typespace extends Typespace {
      //=========================================================================================================
      static text(x) {
        return (type_of(x)) === 'text';
      }

      static nonempty_text(x) {
        return (this.T.text.isa(x)) && (x.length > 0);
      }

      static character(x) {
        return (this.T.text.isa(x)) && (/^.$/v.test(x));
      }

      static float(x) {
        return Number.isFinite(x);
      }

      static integer(x) {
        return Number.isSafeInteger(x);
      }

      static pinteger(x) {
        return (this.T.integer.isa(x)) && (x > 0);
      }

      static zpinteger(x) {
        return (this.T.integer.isa(x)) && (x >= 0);
      }

      static cardinal(x) {
        return this.T.zpinteger.isa(x);
      }

      //---------------------------------------------------------------------------------------------------------
      /* NOTE requiring `x` to be both a character and equal to `@[CFG].blank` means `@[CFG].blank` itself can be tested */
      static blank(x) {
        return (this.T.character(x)) && (x === this[CFG].blank);
      }

      static dimension(x) {
        return this.T.pinteger.isa(x);
      }

      //---------------------------------------------------------------------------------------------------------
      static incremental_text(x) {
        if (!this.T.text.isa(x)) {
          return false;
        }
        this.assign({
          chrs: freeze(Array.from(x))
        });
        return _test_monotony.call(this, x, '<');
      }

      //---------------------------------------------------------------------------------------------------------
      static decremental_text(x) {
        if (!this.T.text.isa(x)) {
          return false;
        }
        this.assign({
          chrs: freeze(Array.from(x))
        });
        return _test_monotony.call(this, x, '>');
      }

      //---------------------------------------------------------------------------------------------------------
      static nmag_bare_reversed(x) {
        return this.T.incremental_text.isa(x, this.data);
      }

      static pmag_bare(x) {
        return this.T.incremental_text.isa(x, this.data);
      }

      //---------------------------------------------------------------------------------------------------------
      static magnifiers(x) {
        var nmag, nmag_bare_reversed, pmag, pmag_bare;
        if (!this.T.nonempty_text.isa(x)) {
          return this.fail("expected a magnifier, got an empty text");
        }
        [nmag_bare_reversed, pmag_bare] = x.split(this[CFG].blank);
        if (!this.T.nmag_bare_reversed.isa(nmag_bare_reversed, this.data, {
          chrs: 'nmag_chrs_reversed'
        })) {
          //.......................................................................................................
          // @assign { iam: 'magnifiers', }; debug 'Ωbsk___1', @data
          return this.fail("Ωbsk___2 ???");
        }
        if (!this.T.pmag_bare.isa(pmag_bare, this.data, {
          chrs: 'pmag_chrs'
        })) {
          return this.fail("Ωbsk___3 ???");
        }
        if (!this.T.incremental_text.isa(nmag_bare_reversed + pmag_bare)) {
          return this.fail("Ωbsk___4 ???");
        }
        //.......................................................................................................
        nmag = this[CFG].blank + [...this.data.nmag_chrs_reversed].reverse().join('');
        pmag = this[CFG].blank + pmag_bare;
        this.assign({nmag, pmag});
        return true;
      }

    };

    //=========================================================================================================
    Hollerith_typespace[CFG] = {
      blank: ' '
    };

    return Hollerith_typespace;

  }).call(this);

  //===========================================================================================================
  _test_monotony = function(x, cmp) {
    var R, chr, chrs, i, idx, prv_chr, ref;
    ({chrs} = this.data); // = @create data
    if (chrs.length === 0) {
      return this.fail("empty is not monotonic");
    }
    if (chrs.length === 1) {
      return true;
    }
    for (idx = i = 1, ref = chrs.length; (1 <= ref ? i < ref : i > ref); idx = 1 <= ref ? ++i : --i) {
      prv_chr = chrs[idx - 1];
      chr = chrs[idx];
      R = (function() {
        switch (cmp) {
          case '>':
            return prv_chr > chr;
          case '<':
            return prv_chr < chr;
          default:
            throw new Error(`Ωbsk___5 (internal) expected '>' or '<', got ${rpr(cmp)}`);
        }
      })();
      if (R) {
        continue;
      }
      this.assign({
        fail: {x, idx, prv_chr, chr}
      });
      return false;
    }
    return true;
  };

  //===========================================================================================================
  Object.assign(module.exports, {
    Hollerith_typespace,
    CFG: CFG,
    internals: {Type, Typespace}
  });

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL3R5cGVzLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQTtFQUFBO0FBQUEsTUFBQSxHQUFBLEVBQUEsbUJBQUEsRUFBQSxTQUFBLEVBQUEsSUFBQSxFQUFBLFNBQUEsRUFBQSxjQUFBLEVBQUEsWUFBQSxFQUFBLEtBQUEsRUFBQSxNQUFBLEVBQUEsSUFBQSxFQUFBLE1BQUEsRUFBQSxJQUFBLEVBQUEsS0FBQSxFQUFBLEtBQUEsRUFBQSxHQUFBLEVBQUEsVUFBQSxFQUFBLE9BQUE7OztFQUdBLFNBQUEsR0FBNEIsT0FBQSxDQUFRLCtCQUFSOztFQUM1QixDQUFBLENBQUUsT0FBRixDQUFBLEdBQTRCLFNBQVMsQ0FBQyxRQUFRLENBQUMsZUFBbkIsQ0FBQSxDQUE1Qjs7RUFDQSxDQUFBO0lBQUUsY0FBQSxFQUFnQjtFQUFsQixDQUFBLEdBQTRCLFNBQVMsQ0FBQyxRQUFRLENBQUMsWUFBbkIsQ0FBQSxDQUE1Qjs7RUFDQSxDQUFBLENBQUUsS0FBRixDQUFBLEdBQTRCLE9BQTVCOztFQUNBLENBQUEsQ0FBRSxLQUFGLENBQUEsR0FBNEIsT0FBQSxDQUFRLE9BQVIsQ0FBNUI7O0VBQ0EsQ0FBQSxDQUFFLElBQUYsRUFDRSxVQURGLENBQUEsR0FDNEIsU0FBUyxDQUFDLDhCQUFWLENBQUEsQ0FENUI7O0VBRUEsQ0FBQSxDQUFFLE1BQUYsQ0FBQSxHQUE0QixTQUFTLENBQUMsY0FBVixDQUFBLENBQTVCOztFQUNBLENBQUEsQ0FBRSxZQUFGLENBQUEsR0FBNEIsU0FBUyxDQUFDLFFBQVEsQ0FBQyxvQkFBbkIsQ0FBQSxDQUE1Qjs7RUFDQSxDQUFBLENBQUUsS0FBRixFQUNFLElBREYsQ0FBQSxHQUM0QixTQUFTLENBQUMsUUFBUSxDQUFDLGFBQW5CLENBQUEsQ0FENUI7O0VBRUEsQ0FBQSxDQUFFLE1BQUYsQ0FBQSxHQUE0QixNQUE1Qjs7RUFDQSxHQUFBLEdBQTRCLE1BQU0sQ0FBQyxH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QUc1QixTQUFBLEVBQXNCLENBQUUsSUFBRixFQUFRLFNBQVI7RUFITSxDQUE5QjtBQTVJQSIsInNvdXJjZXNDb250ZW50IjpbIlxuJ3VzZSBzdHJpY3QnXG5cbiM9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuU0ZNT0RVTEVTICAgICAgICAgICAgICAgICA9IHJlcXVpcmUgJ2JyaWNhYnJhYy1zaW5nbGUtZmlsZS1tb2R1bGVzJ1xueyB0eXBlX29mLCAgICAgICAgICAgICAgfSA9IFNGTU9EVUxFUy51bnN0YWJsZS5yZXF1aXJlX3R5cGVfb2YoKVxueyBzaG93X25vX2NvbG9yczogcnByLCAgfSA9IFNGTU9EVUxFUy51bnN0YWJsZS5yZXF1aXJlX3Nob3coKVxueyBkZWJ1ZywgICAgICAgICAgICAgICAgfSA9IGNvbnNvbGVcbnsgcmVnZXgsICAgICAgICAgICAgICAgIH0gPSByZXF1aXJlICdyZWdleCdcbnsgaGlkZSxcbiAgc2V0X2dldHRlciwgICAgICAgICAgIH0gPSBTRk1PRFVMRVMucmVxdWlyZV9tYW5hZ2VkX3Byb3BlcnR5X3Rvb2xzKClcbnsgbmFtZWl0LCAgICAgICAgICAgICAgIH0gPSBTRk1PRFVMRVMucmVxdWlyZV9uYW1laXQoKVxueyBjbGVhbl9hc3NpZ24sICAgICAgICAgfSA9IFNGTU9EVUxFUy51bnN0YWJsZS5yZXF1aXJlX2NsZWFuX2Fzc2lnbigpXG57IHJlbWFwLFxuICBvbWl0LCAgICAgICAgICAgICAgICAgfSA9IFNGTU9EVUxFUy51bnN0YWJsZS5yZXF1aXJlX3JlbWFwKClcbnsgZnJlZXplLCAgICAgICAgICAgICAgIH0gPSBPYmplY3RcbkNGRyAgICAgICAgICAgICAgICAgICAgICAgPSBTeW1ib2wuZm9yICdjZmcnXG5cblxuIz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4jIyMgTk9URSBGdXR1cmUgU2luZ2xlLUZpbGUgTW9kdWxlICMjI1xuY2xhc3MgVHlwZVxuXG4gICMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgY29uc3RydWN0b3I6ICggdHlwZXNwYWNlLCBuYW1lLCBpc2EgKSAtPlxuICAgIGhpZGUgQCwgJ25hbWUnLCAgICAgbmFtZVxuICAgIGhpZGUgQCwgJ1QnLCAgICAgICAgdHlwZXNwYWNlXG4gICAgaGlkZSBALCAnX2lzYScsICAgICBpc2FcbiAgICBzZXRfZ2V0dGVyIEAsIENGRywgID0+IEBUW0NGR11cbiAgICBAZGF0YSAgICAgICAgICAgICA9IHt9ICMgbmV3IEJvdW5kZWRfbGlzdCgpXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuXG4gICMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgaXNhOiAoIHgsIGRhdGEgPSBudWxsLCBtYXBwaW5nID0gbnVsbCApIC0+XG4gICAgQGRhdGEgICA9IHt9XG4gICAgUiAgICAgICA9IEBfaXNhLmNhbGwgQCwgeFxuICAgICMuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uXG4gICAgaWYgZGF0YT9cbiAgICAgIGlmIG1hcHBpbmc/ICAgICB0aGVuICBjbGVhbl9hc3NpZ24gZGF0YSwgKCByZW1hcCAoIGNsZWFuX2Fzc2lnbiB7fSwgQGRhdGEgKSwgbWFwcGluZyApICAjIyMgZDEgbTEgIyMjXG4gICAgICBlbHNlICAgICAgICAgICAgICAgICAgY2xlYW5fYXNzaWduIGRhdGEsICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBkYXRhICAgICAgICAgICAgICAgIyMjIGQxIG0wICMjI1xuICAgIGVsc2UgaWYgbWFwcGluZz8gIHRoZW4gICAgICAgICAgICAgICAgICAgICAgIHJlbWFwICAgICAgICAgICAgICAgICAgICBAZGF0YSwgICBtYXBwaW5nICAgICMjIyBkMCBtMSAjIyNcbiAgICByZXR1cm4gUiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIyMgZDAgbTAgIyMjXG5cbiAgIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBhc3NpZ246ICggUC4uLiApIC0+IGNsZWFuX2Fzc2lnbiBAZGF0YSwgUC4uLlxuXG4gICMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgZmFpbDogKCBtZXNzYWdlLCBQLi4uICkgLT4gY2xlYW5fYXNzaWduIEBkYXRhLCB7IG1lc3NhZ2UsIH0sIFAuLi47IGZhbHNlXG5cblxuIz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5jbGFzcyBUeXBlc3BhY2VcblxuICAjLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIEBbQ0ZHXTogbnVsbFxuXG4gICM9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgY29uc3RydWN0b3I6ICggY2ZnID0gbnVsbCApIC0+XG4gICAgY2xhc3ogICA9IEBjb25zdHJ1Y3RvclxuICAgIEBbQ0ZHXSAgPSBmcmVlemUgY2xlYW5fYXNzaWduIHt9LCAoIGNsYXN6W0NGR10gPyB1bmRlZmluZWQgKSwgKCBjZmcgPyB1bmRlZmluZWQgKVxuICAgIGZvciBuYW1lIGluIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzIGNsYXN6XG4gICAgICBjbGFzcyBUeXBlY2xhc3MgZXh0ZW5kcyBUeXBlXG4gICAgICBuYW1laXQgbmFtZSwgVHlwZWNsYXNzXG4gICAgICBAWyBuYW1lIF0gPSBuZXcgVHlwZWNsYXNzIEAsIG5hbWUsIGlzYSA9IGNsYXN6WyBuYW1lIF1cbiAgICByZXR1cm4gdW5kZWZpbmVkXG5cblxuIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXG4jIEhPTExFUklUSCBUWVBFU1BBQ0VcbiM9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuY2xhc3MgSG9sbGVyaXRoX3R5cGVzcGFjZSBleHRlbmRzIFR5cGVzcGFjZVxuXG4gICM9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgQFtDRkddOlxuICAgIGJsYW5rOiAnICdcblxuICAjPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIEB0ZXh0OiAgICAgICAgICAgKCB4ICkgLT4gKCB0eXBlX29mIHggKSBpcyAndGV4dCdcbiAgQG5vbmVtcHR5X3RleHQ6ICAoIHggKSAtPiAoIEBULnRleHQuaXNhIHggKSBhbmQgKCB4Lmxlbmd0aCA+IDAgKVxuICBAY2hhcmFjdGVyOiAgICAgICggeCApIC0+ICggQFQudGV4dC5pc2EgeCApIGFuZCAoIC9eLiQvdi50ZXN0IHggKVxuICBAZmxvYXQ6ICAgICAgICAgICggeCApIC0+IE51bWJlci5pc0Zpbml0ZSB4XG4gIEBpbnRlZ2VyOiAgICAgICAgKCB4ICkgLT4gTnVtYmVyLmlzU2FmZUludGVnZXIgeFxuICBAcGludGVnZXI6ICAgICAgICggeCApIC0+ICggQFQuaW50ZWdlci5pc2EgeCApIGFuZCAoIHggPiAgMCApXG4gIEB6cGludGVnZXI6ICAgICAgKCB4ICkgLT4gKCBAVC5pbnRlZ2VyLmlzYSB4ICkgYW5kICggeCA+PSAwIClcbiAgQGNhcmRpbmFsOiAgICAgICAoIHggKSAtPiBAVC56cGludGVnZXIuaXNhIHhcbiAgIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAjIyMgTk9URSByZXF1aXJpbmcgYHhgIHRvIGJlIGJvdGggYSBjaGFyYWN0ZXIgYW5kIGVxdWFsIHRvIGBAW0NGR10uYmxhbmtgIG1lYW5zIGBAW0NGR10uYmxhbmtgIGl0c2VsZiBjYW4gYmUgdGVzdGVkICMjI1xuICBAYmxhbms6ICAgICAgICAgICggeCApIC0+ICggQFQuY2hhcmFjdGVyIHggKSBhbmQgKCB4IGlzIEBbQ0ZHXS5ibGFuayApXG4gIEBkaW1lbnNpb246ICAgICAgKCB4ICkgLT4gQFQucGludGVnZXIuaXNhICB4XG5cbiAgIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBAaW5jcmVtZW50YWxfdGV4dDogKCB4ICkgLT5cbiAgICByZXR1cm4gZmFsc2UgdW5sZXNzIEBULnRleHQuaXNhIHhcbiAgICBAYXNzaWduIHsgY2hyczogKCBmcmVlemUgQXJyYXkuZnJvbSB4ICksIH1cbiAgICByZXR1cm4gX3Rlc3RfbW9ub3RvbnkuY2FsbCBALCB4LCAnPCdcblxuICAjLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIEBkZWNyZW1lbnRhbF90ZXh0OiAoIHggKSAtPlxuICAgIHJldHVybiBmYWxzZSB1bmxlc3MgQFQudGV4dC5pc2EgeFxuICAgIEBhc3NpZ24geyBjaHJzOiAoIGZyZWV6ZSBBcnJheS5mcm9tIHggKSwgfVxuICAgIHJldHVybiBfdGVzdF9tb25vdG9ueS5jYWxsIEAsIHgsICc+J1xuXG4gICMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgQG5tYWdfYmFyZV9yZXZlcnNlZDogICggeCApIC0+IEBULmluY3JlbWVudGFsX3RleHQuaXNhIHgsIEBkYXRhXG4gIEBwbWFnX2JhcmU6ICAgICAgICAgICAoIHggKSAtPiBAVC5pbmNyZW1lbnRhbF90ZXh0LmlzYSB4LCBAZGF0YVxuXG4gICMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgQG1hZ25pZmllcnM6ICggeCApIC0+XG4gICAgcmV0dXJuICggQGZhaWwgXCJleHBlY3RlZCBhIG1hZ25pZmllciwgZ290IGFuIGVtcHR5IHRleHRcIiApIHVubGVzcyBAVC5ub25lbXB0eV90ZXh0LmlzYSB4XG4gICAgWyBubWFnX2JhcmVfcmV2ZXJzZWQsXG4gICAgICBwbWFnX2JhcmUsICBdID0geC5zcGxpdCBAW0NGR10uYmxhbmtcbiAgICAjLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLlxuICAgICMgQGFzc2lnbiB7IGlhbTogJ21hZ25pZmllcnMnLCB9OyBkZWJ1ZyAnzqlic2tfX18xJywgQGRhdGFcbiAgICByZXR1cm4gKCBAZmFpbCBcIs6pYnNrX19fMiA/Pz9cIiApIHVubGVzcyAgQFQubm1hZ19iYXJlX3JldmVyc2VkLmlzYSBubWFnX2JhcmVfcmV2ZXJzZWQsIEBkYXRhLCB7IGNocnM6ICdubWFnX2NocnNfcmV2ZXJzZWQnLCB9XG4gICAgcmV0dXJuICggQGZhaWwgXCLOqWJza19fXzMgPz8/XCIgKSB1bmxlc3MgIEBULnBtYWdfYmFyZS5pc2EgICAgICAgICAgcG1hZ19iYXJlLCAgICAgICAgICBAZGF0YSwgeyBjaHJzOiAncG1hZ19jaHJzJywgfVxuICAgIHJldHVybiAoIEBmYWlsIFwizqlic2tfX180ID8/P1wiICkgdW5sZXNzICBAVC5pbmNyZW1lbnRhbF90ZXh0LmlzYSAgIG5tYWdfYmFyZV9yZXZlcnNlZCArIHBtYWdfYmFyZVxuICAgICMuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uXG4gICAgbm1hZyAgICAgICAgICAgID0gQFtDRkddLmJsYW5rICsgWyBAZGF0YS5ubWFnX2NocnNfcmV2ZXJzZWQuLi4sIF0ucmV2ZXJzZSgpLmpvaW4gJydcbiAgICBwbWFnICAgICAgICAgICAgPSBAW0NGR10uYmxhbmsgKyBwbWFnX2JhcmVcbiAgICBAYXNzaWduIHsgbm1hZywgcG1hZywgfVxuICAgIHJldHVybiB0cnVlXG5cblxuIz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5fdGVzdF9tb25vdG9ueSA9ICggeCwgY21wICkgLT5cbiAgeyBjaHJzLCB9ID0gQGRhdGEgIyA9IEBjcmVhdGUgZGF0YVxuICByZXR1cm4gKCBAZmFpbCBcImVtcHR5IGlzIG5vdCBtb25vdG9uaWNcIiApIGlmIGNocnMubGVuZ3RoIGlzIDBcbiAgcmV0dXJuIHRydWUgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgY2hycy5sZW5ndGggaXMgMVxuICBmb3IgaWR4IGluIFsgMSAuLi4gY2hycy5sZW5ndGggXVxuICAgIHBydl9jaHIgPSBjaHJzWyBpZHggLSAxIF1cbiAgICBjaHIgICAgID0gY2hyc1sgaWR4ICAgICBdXG4gICAgUiAgICAgICA9IHN3aXRjaCBjbXBcbiAgICAgIHdoZW4gJz4nIHRoZW4gcHJ2X2NociA+IGNoclxuICAgICAgd2hlbiAnPCcgdGhlbiBwcnZfY2hyIDwgY2hyXG4gICAgICBlbHNlIHRocm93IG5ldyBFcnJvciBcIs6pYnNrX19fNSAoaW50ZXJuYWwpIGV4cGVjdGVkICc+JyBvciAnPCcsIGdvdCAje3JwciBjbXB9XCJcbiAgICBjb250aW51ZSBpZiBSXG4gICAgQGFzc2lnbiB7IGZhaWw6IHsgeCwgaWR4LCBwcnZfY2hyLCBjaHIsIH0sIH1cbiAgICByZXR1cm4gZmFsc2VcbiAgcmV0dXJuIHRydWVcblxuIz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5PYmplY3QuYXNzaWduIG1vZHVsZS5leHBvcnRzLCB7XG4gIEhvbGxlcml0aF90eXBlc3BhY2UsXG4gIENGRzogICAgICAgICAgICAgICAgICBDRkcsXG4gIGludGVybmFsczogICAgICAgICAgICB7IFR5cGUsIFR5cGVzcGFjZSwgfSwgfVxuIl19
