(function() {
  'use strict';
  var CFG, Hollerith_typespace, SFMODULES, Type, Typespace, _test_monotony, debug, freeze, get_max_integer, internals, is_positive_all_niner, is_positive_integer_power_of, regex, rpr, type_of;

  //===========================================================================================================
  SFMODULES = require('../../bricabrac-single-file-modules');

  ({type_of} = SFMODULES.unstable.require_type_of());

  ({
    show_no_colors: rpr
  } = SFMODULES.unstable.require_show());

  ({debug} = console);

  ({regex} = require('regex'));

  ({freeze} = Object);

  ({Type, Typespace, CFG} = SFMODULES.unstable.require_nanotypes());

  // get_max_niner_digit_count,
  // encode,
  // decode,
  // log_to_base,
  // get_required_digits,
  ({is_positive_integer_power_of, is_positive_all_niner, get_max_integer} = SFMODULES.unstable.require_anybase());

  //===========================================================================================================
  internals = Object.assign({Type, Typespace}, {
    //---------------------------------------------------------------------------------------------------------
    get_leading_novas_re: function(_nova) {
      return (regex('g'))` ^ ${_nova}* (?= .+ $ ) `;
    }
  });

  Hollerith_typespace = (function() {
    //===========================================================================================================
    // HOLLERITH TYPESPACE
    //===========================================================================================================
    class Hollerith_typespace extends Typespace {
      //---------------------------------------------------------------------------------------------------------
      constructor(cfg) {
        var blank_esc, blank_splitter;
        super(cfg);
        this.blank.validate(this[CFG].blank);
        blank_esc = RegExp.escape(this[CFG].blank);
        blank_splitter = new RegExp(`(?:${blank_esc})+`, 'gv');
        this[CFG] = freeze({...this[CFG], blank_splitter});
        return void 0;
      }

      //=========================================================================================================
      static text(x) {
        return (type_of(x)) === 'text';
      }

      static nonempty_text(x) {
        return (this.T.text.isa(x)) && (x.length > 0);
      }

      static character(x) {
        return (this.T.text.isa(x)) && (/^.$/v.test(x));
      }

      static float(x) {
        return Number.isFinite(x);
      }

      static integer(x) {
        return Number.isSafeInteger(x);
      }

      static pinteger(x) {
        return (this.T.integer.isa(x)) && (x > 0);
      }

      static zpinteger(x) {
        return (this.T.integer.isa(x)) && (x >= 0);
      }

      static cardinal(x) {
        return this.T.zpinteger.isa(x);
      }

      //---------------------------------------------------------------------------------------------------------
      /* NOTE requiring `x` to be both a character and equal to `@[CFG].blank` means `@[CFG].blank` itself can be tested */
      static blank(x) {
        return (this.T.character.isa(x)) && (x === this[CFG].blank);
      }

      static dimension(x) {
        return this.T.pinteger.isa(x);
      }

      static _base(x) {
        return (this.T.pinteger.isa(x)) && (x > 1);
      }

      // @digits_per_idx:  ( x ) -> ( @T.pinteger.isa x ) and ( x > 1 )

        //---------------------------------------------------------------------------------------------------------
      static incremental_text(x) {
        if (!this.T.text.isa(x)) {
          return false;
        }
        this.assign({
          chrs: freeze(Array.from(x))
        });
        return _test_monotony.call(this, x, '<');
      }

      //---------------------------------------------------------------------------------------------------------
      static decremental_text(x) {
        if (!this.T.text.isa(x)) {
          return false;
        }
        this.assign({
          chrs: freeze(Array.from(x))
        });
        return _test_monotony.call(this, x, '>');
      }

      //---------------------------------------------------------------------------------------------------------
      static nmag_bare_reversed(x) {
        return this.T.incremental_text.dm_isa(this.data, null, x);
      }

      static pmag_bare(x) {
        return this.T.incremental_text.dm_isa(this.data, null, x);
      }

      //---------------------------------------------------------------------------------------------------------
      static magnifiers(x) {
        var _nmag, _nmag_list, _pmag, _pmag_list, nmag_bare_reversed, parts, pmag_bare;
        if (!this.T.nonempty_text.isa(x)) {
          return this.fail("expected a magnifier, got an empty text");
        }
        if ((parts = x.split(this[CFG].blank_splitter)).length !== 2) {
          return this.fail(`magnifiers must have exactly 1 blank, got ${parts.length - 1} blanks`);
        }
        [nmag_bare_reversed, pmag_bare] = parts;
        if (!this.T.nmag_bare_reversed.dm_isa(this.data, {
          chrs: 'nmag_chrs_reversed'
        }, nmag_bare_reversed)) {
          //.......................................................................................................
          // @assign { iam: 'magnifiers', }; debug 'Ωbsk___1', @data
          return this.fail("Ωbsk___2 ???");
        }
        if (!this.T.pmag_bare.dm_isa(this.data, {
          chrs: '_pmag_list'
        }, pmag_bare)) {
          return this.fail("Ωbsk___3 ???");
        }
        if (!this.T.incremental_text.isa(nmag_bare_reversed + pmag_bare)) {
          return this.fail("Ωbsk___4 ???");
        }
        if (nmag_bare_reversed.length !== pmag_bare.length) {
          return this.fail("Ωbsk___5 ???");
        }
        //.......................................................................................................
        _nmag = this[CFG].blank + [...this.data.nmag_chrs_reversed].reverse().join('');
        _pmag = this[CFG].blank + pmag_bare;
        _nmag_list = freeze(Array.from(_nmag));
        _pmag_list = freeze(Array.from(_pmag));
        this.assign({_nmag, _pmag, _nmag_list, _pmag_list});
        return true;
      }

      //---------------------------------------------------------------------------------------------------------
      static digitset(x) {
        var _base, _leading_novas_re, _naught, _nova;
        if (!this.T.incremental_text.dm_isa(this.data, {
          chrs: '_digits_list'
        }, x)) {
          return false;
        }
        _base = this.data._digits_list.length;
        if (!this.T._base.isa(_base)) {
          return this.fail("an digitset must have 2 chrs or more");
        }
        _naught = this.data._digits_list.at(0);
        _nova = this.data._digits_list.at(-1);
        _leading_novas_re = internals.get_leading_novas_re(_nova);
        this.assign({_base, _naught, _nova, _leading_novas_re});
        return true;
      }

      //---------------------------------------------------------------------------------------------------------
      static uniliterals(x) {
        var _cipher, _nuns, _nuns_list, _puns, _zpuns, _zpuns_list, parts;
        if (!this.T.nonempty_text.isa(x)) {
          return false;
        }
        if (this.T.character.isa(x)) {
          _nuns = '';
          _zpuns = x;
          _nuns_list = freeze([]);
          _zpuns_list = freeze([x]);
          this.assign({_nuns, _zpuns, _nuns_list, _zpuns_list});
          return true;
        }
        parts = x.split(this[CFG].blank_splitter);
        if (parts.length !== 3) {
          return this.fail(`uniliterals that are not a single character must have exactly 2 blank2, got ${parts.length - 1} blanks`);
        }
        [_nuns, _cipher, _puns] = parts;
        _zpuns = _cipher + _puns;
        this.assign({_nuns, _zpuns, _cipher});
        if (!this.T.incremental_text.dm_isa(this.data, {
          chrs: '_nuns_list'
        }, _nuns)) {
          return false;
        }
        if (!this.T.incremental_text.dm_isa(this.data, {
          chrs: '_zpuns_list'
        }, _zpuns)) {
          return false;
        }
        return true;
      }

      //---------------------------------------------------------------------------------------------------------
      static _alphabet(x) {
        if (!this.T.nonempty_text.dm_isa(this.data, null, x)) {
          return false;
        }
        if (!this.T.incremental_text.dm_isa(this.data, null, x)) {
          return false;
        }
        return true;
      }

      //---------------------------------------------------------------------------------------------------------
      static _max_integer_$(x, _base) {
        if (!this.T.pinteger.isa(x)) {
          return this.fail("x not a positive safe integer");
        }
        if (!this.T._base.isa(_base)) {
          return this.fail("_base not a safe integer greater than 1");
        }
        if (!is_positive_all_niner(x, _base)) {
          return this.fail("x not a positive all-niners");
        }
        return true;
      }

      //---------------------------------------------------------------------------------------------------------
      /* TAINT should be method of `T._max_integer_$` */
      create_max_integer({_base, digits_per_idx}) {
        var R;
        this._base.validate(_base);
        this.digits_per_idx.validate(digits_per_idx);
        R = Math.min(get_max_integer(Number.MAX_SAFE_INTEGER, _base), (_base ** digits_per_idx) - 1);
        this._max_integer_$.validate(R, _base);
        return R;
      }

      //---------------------------------------------------------------------------------------------------------
      static digits_per_idx(x, _pmag_list = null) {
        if (!this.T.pinteger.isa(x)) {
          return this.fail(`${x} not a positive safe integer`);
        }
        if ((_pmag_list != null) && !(x <= _pmag_list.length)) {
          return this.fail(`${x} exceeds limit ${_pmag_list.length} set by magnifiers`);
        }
        return true;
      }

    };

    //=========================================================================================================
    Hollerith_typespace[CFG] = {
      blank: ' '
    };

    return Hollerith_typespace;

  }).call(this);

  //===========================================================================================================
  _test_monotony = function(x, cmp) {
    var R, chr, chrs, i, idx, prv_chr, ref;
    ({chrs} = this.data); // = @create data
    if (chrs.length === 0) {
      return this.fail("empty is not monotonic");
    }
    if (chrs.length === 1) {
      return true;
    }
    for (idx = i = 1, ref = chrs.length; (1 <= ref ? i < ref : i > ref); idx = 1 <= ref ? ++i : --i) {
      prv_chr = chrs[idx - 1];
      chr = chrs[idx];
      R = (function() {
        switch (cmp) {
          case '>':
            return prv_chr > chr;
          case '<':
            return prv_chr < chr;
          default:
            throw new Error(`Ωbsk___6 (internal) expected '>' or '<', got ${rpr(cmp)}`);
        }
      })();
      if (R) {
        continue;
      }
      this.assign({
        fail: {x, idx, prv_chr, chr}
      });
      return false;
    }
    return true;
  };

  //===========================================================================================================
  Object.assign(module.exports, {
    Hollerith_typespace,
    CFG: CFG,
    internals
  });

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL3R5cGVzLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQTtFQUFBO0FBQUEsTUFBQSxHQUFBLEVBQUEsbUJBQUEsRUFBQSxTQUFBLEVBQUEsSUFBQSxFQUFBLFNBQUEsRUFBQSxjQUFBLEVBQUEsS0FBQSxFQUFBLE1BQUEsRUFBQSxlQUFBLEVBQUEsU0FBQSxFQUFBLHFCQUFBLEVBQUEsNEJBQUEsRUFBQSxLQUFBLEVBQUEsR0FBQSxFQUFBLE9BQUE7OztFQUdBLFNBQUEsR0FBNEIsT0FBQSxDQUFRLHFDQUFSOztFQUM1QixDQUFBLENBQUUsT0FBRixDQUFBLEdBQTRCLFNBQVMsQ0FBQyxRQUFRLENBQUMsZUFBbkIsQ0FBQSxDQUE1Qjs7RUFDQSxDQUFBO0lBQUUsY0FBQSxFQUFnQjtFQUFsQixDQUFBLEdBQTRCLFNBQVMsQ0FBQyxRQUFRLENBQUMsWUFBbkIsQ0FBQSxDQUE1Qjs7RUFDQSxDQUFBLENBQUUsS0FBRixDQUFBLEdBQTRCLE9BQTVCOztFQUNBLENBQUEsQ0FBRSxLQUFGLENBQUEsR0FBNEIsT0FBQSxDQUFRLE9BQVIsQ0FBNUI7O0VBQ0EsQ0FBQSxDQUFFLE1BQUYsQ0FBQSxHQUE0QixNQUE1Qjs7RUFDQSxDQUFBLENBQUUsSUFBRixFQUNFLFNBREYsRUFFRSxHQUZGLENBQUEsR0FFNEIsU0FBUyxDQUFDLFFBQVEsQ0FBQyxpQkFBbkIsQ0FBQSxDQUY1QixFQVRBOzs7Ozs7O0VBWUEsQ0FBQSxDQUFFLDRCQUFGLEVBQ0UscUJBREYsRUFFRSxlQUZGLENBQUEsR0FRNEIsU0FBUyxDQUFDLFFBQVEsQ0FBQyxlQUFuQixDQUFBLENBUjVCLEVBWkE7OztFQXdCQSxTQUFBLEdBQVksTUFBTSxDQUFDLE1BQVAsQ0FBYyxDQUFFLElBQUYsRUFBUSxTQUFSLENBQWQsRUFHVixDQUFBOztJQUFBLG9CQUFBLEVBQXNCLFFBQUEsQ0FBRSxLQUFGLENBQUE7YUFBYSxDQUFFLEtBQUEs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QTtBQUNqQixRQUFBLENBQUEsRUFBQSxHQUFBLEVBQUEsSUFBQSxFQUFBLENBQUEsRUFBQSxHQUFBLEVBQUEsT0FBQSxFQUFBO0lBQUUsQ0FBQSxDQUFFLElBQUYsQ0FBQSxHQUFZLElBQUMsQ0FBQSxJQUFiLEVBQUY7SUFDRSxJQUE2QyxJQUFJLENBQUMsTUFBTCxLQUFlLENBQTVEO0FBQUEsYUFBUyxJQUFDLENBQUEsSUFBRCxDQUFNLHdCQUFOLEVBQVQ7O0lBQ0EsSUFBNkMsSUFBSSxDQUFDLE1BQUwsS0FBZSxDQUE1RDtBQUFBLGFBQU8sS0FBUDs7SUFDQSxLQUFXLDBGQUFYO01BQ0UsT0FBQSxHQUFVLElBQUksQ0FBRSxHQUFBLEdBQU0sQ0FBUjtNQUNkLEdBQUEsR0FBVSxJQUFJLENBQUUsR0FBRjtNQUNkLENBQUE7QUFBVSxnQkFBTyxHQUFQO0FBQUEsZUFDSCxHQURHO21CQUNNLE9BQUEsR0FBVTtBQURoQixlQUVILEdBRkc7bUJBRU0sT0FBQSxHQUFVO0FBRmhCO1lBR0gsTUFBTSxJQUFJLEtBQUosQ0FBVSxDQUFBLDZDQUFBLENBQUEsQ0FBZ0QsR0FBQSxDQUFJLEdBQUosQ0FBaEQsQ0FBQSxDQUFWO0FBSEg7O01BSVYsSUFBWSxDQUFaO0FBQUEsaUJBQUE7O01BQ0EsSUFBQyxDQUFBLE1BQUQsQ0FBUTtRQUFFLElBQUEsRUFBTSxDQUFFLENBQUYsRUFBSyxHQUFMLEVBQVUsT0FBVixFQUFtQixHQUFuQjtNQUFSLENBQVI7QUFDQSxhQUFPO0lBVFQ7QUFVQSxXQUFPO0VBZFEsRUFyS2pCOzs7RUFzTEEsTUFBTSxDQUFDLE1BQVAsQ0FBYyxNQUFNLENBQUMsT0FBckIsRUFBOEI7SUFDNUIsbUJBRDRCO0lBRTVCLEdBQUEsRUFBc0IsR0FGTTtJQUc1QjtFQUg0QixDQUE5QjtBQXRMQSIsInNvdXJjZXNDb250ZW50IjpbIlxuJ3VzZSBzdHJpY3QnXG5cbiM9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuU0ZNT0RVTEVTICAgICAgICAgICAgICAgICA9IHJlcXVpcmUgJy4uLy4uL2JyaWNhYnJhYy1zaW5nbGUtZmlsZS1tb2R1bGVzJ1xueyB0eXBlX29mLCAgICAgICAgICAgICAgfSA9IFNGTU9EVUxFUy51bnN0YWJsZS5yZXF1aXJlX3R5cGVfb2YoKVxueyBzaG93X25vX2NvbG9yczogcnByLCAgfSA9IFNGTU9EVUxFUy51bnN0YWJsZS5yZXF1aXJlX3Nob3coKVxueyBkZWJ1ZywgICAgICAgICAgICAgICAgfSA9IGNvbnNvbGVcbnsgcmVnZXgsICAgICAgICAgICAgICAgIH0gPSByZXF1aXJlICdyZWdleCdcbnsgZnJlZXplLCAgICAgICAgICAgICAgIH0gPSBPYmplY3RcbnsgVHlwZSxcbiAgVHlwZXNwYWNlLFxuICBDRkcsICAgICAgICAgICAgICAgICAgfSA9IFNGTU9EVUxFUy51bnN0YWJsZS5yZXF1aXJlX25hbm90eXBlcygpXG57IGlzX3Bvc2l0aXZlX2ludGVnZXJfcG93ZXJfb2YsXG4gIGlzX3Bvc2l0aXZlX2FsbF9uaW5lcixcbiAgZ2V0X21heF9pbnRlZ2VyLFxuICAjIGdldF9tYXhfbmluZXJfZGlnaXRfY291bnQsXG4gICMgZW5jb2RlLFxuICAjIGRlY29kZSxcbiAgIyBsb2dfdG9fYmFzZSxcbiAgIyBnZXRfcmVxdWlyZWRfZGlnaXRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSA9IFNGTU9EVUxFUy51bnN0YWJsZS5yZXF1aXJlX2FueWJhc2UoKVxuXG5cbiM9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuaW50ZXJuYWxzID0gT2JqZWN0LmFzc2lnbiB7IFR5cGUsIFR5cGVzcGFjZSwgfSxcblxuICAjLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIGdldF9sZWFkaW5nX25vdmFzX3JlOiAoIF9ub3ZhICkgLT4gKCByZWdleCAnZycgKVwiXCJcIiBeICN7X25vdmF9KiAoPz0gLisgJCApIFwiXCJcIlxuXG5cblxuIz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4jIEhPTExFUklUSCBUWVBFU1BBQ0VcbiM9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuY2xhc3MgSG9sbGVyaXRoX3R5cGVzcGFjZSBleHRlbmRzIFR5cGVzcGFjZVxuXG4gICMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgY29uc3RydWN0b3I6ICggY2ZnICkgLT5cbiAgICBzdXBlciBjZmdcbiAgICBAYmxhbmsudmFsaWRhdGUgQFtDRkddLmJsYW5rXG4gICAgYmxhbmtfZXNjICAgICAgID0gUmVnRXhwLmVzY2FwZSBAW0NGR10uYmxhbmtcbiAgICBibGFua19zcGxpdHRlciAgPSBuZXcgUmVnRXhwIFwiKD86I3tibGFua19lc2N9KStcIiwgJ2d2J1xuICAgIEBbQ0ZHXSAgICAgICAgICA9IGZyZWV6ZSB7IEBbQ0ZHXS4uLiwgYmxhbmtfc3BsaXR0ZXIsIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkXG5cblxuICAjPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIEBbQ0ZHXTpcbiAgICBibGFuazogJyAnXG5cbiAgIz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICBAdGV4dDogICAgICAgICAgICAoIHggKSAtPiAoIHR5cGVfb2YgeCApIGlzICd0ZXh0J1xuICBAbm9uZW1wdHlfdGV4dDogICAoIHggKSAtPiAoIEBULnRleHQuaXNhIHggKSBhbmQgKCB4Lmxlbmd0aCA+IDAgKVxuICBAY2hhcmFjdGVyOiAgICAgICAoIHggKSAtPiAoIEBULnRleHQuaXNhIHggKSBhbmQgKCAvXi4kL3YudGVzdCB4IClcbiAgQGZsb2F0OiAgICAgICAgICAgKCB4ICkgLT4gTnVtYmVyLmlzRmluaXRlIHhcbiAgQGludGVnZXI6ICAgICAgICAgKCB4ICkgLT4gTnVtYmVyLmlzU2FmZUludGVnZXIgeFxuICBAcGludGVnZXI6ICAgICAgICAoIHggKSAtPiAoIEBULmludGVnZXIuaXNhIHggKSBhbmQgKCB4ID4gIDAgKVxuICBAenBpbnRlZ2VyOiAgICAgICAoIHggKSAtPiAoIEBULmludGVnZXIuaXNhIHggKSBhbmQgKCB4ID49IDAgKVxuICBAY2FyZGluYWw6ICAgICAgICAoIHggKSAtPiBAVC56cGludGVnZXIuaXNhIHhcbiAgIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAjIyMgTk9URSByZXF1aXJpbmcgYHhgIHRvIGJlIGJvdGggYSBjaGFyYWN0ZXIgYW5kIGVxdWFsIHRvIGBAW0NGR10uYmxhbmtgIG1lYW5zIGBAW0NGR10uYmxhbmtgIGl0c2VsZiBjYW4gYmUgdGVzdGVkICMjI1xuICBAYmxhbms6ICAgICAgICAgICAoIHggKSAtPiAoIEBULmNoYXJhY3Rlci5pc2EgeCApIGFuZCAoIHggaXMgQFtDRkddLmJsYW5rIClcbiAgQGRpbWVuc2lvbjogICAgICAgKCB4ICkgLT4gKCBAVC5waW50ZWdlci5pc2EgeCApXG4gIEBfYmFzZTogICAgICAgICAgICggeCApIC0+ICggQFQucGludGVnZXIuaXNhIHggKSBhbmQgKCB4ID4gMSApXG4gICMgQGRpZ2l0c19wZXJfaWR4OiAgKCB4ICkgLT4gKCBAVC5waW50ZWdlci5pc2EgeCApIGFuZCAoIHggPiAxIClcblxuICAjLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIEBpbmNyZW1lbnRhbF90ZXh0OiAoIHggKSAtPlxuICAgIHJldHVybiBmYWxzZSB1bmxlc3MgQFQudGV4dC5pc2EgeFxuICAgIEBhc3NpZ24geyBjaHJzOiAoIGZyZWV6ZSBBcnJheS5mcm9tIHggKSwgfVxuICAgIHJldHVybiBfdGVzdF9tb25vdG9ueS5jYWxsIEAsIHgsICc8J1xuXG4gICMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgQGRlY3JlbWVudGFsX3RleHQ6ICggeCApIC0+XG4gICAgcmV0dXJuIGZhbHNlIHVubGVzcyBAVC50ZXh0LmlzYSB4XG4gICAgQGFzc2lnbiB7IGNocnM6ICggZnJlZXplIEFycmF5LmZyb20geCApLCB9XG4gICAgcmV0dXJuIF90ZXN0X21vbm90b255LmNhbGwgQCwgeCwgJz4nXG5cbiAgIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBAbm1hZ19iYXJlX3JldmVyc2VkOiAgKCB4ICkgLT4gQFQuaW5jcmVtZW50YWxfdGV4dC5kbV9pc2EgQGRhdGEsIG51bGwsIHhcbiAgQHBtYWdfYmFyZTogICAgICAgICAgICggeCApIC0+IEBULmluY3JlbWVudGFsX3RleHQuZG1faXNhIEBkYXRhLCBudWxsLCB4XG5cbiAgIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBAbWFnbmlmaWVyczogKCB4ICkgLT5cbiAgICByZXR1cm4gKCBAZmFpbCBcImV4cGVjdGVkIGEgbWFnbmlmaWVyLCBnb3QgYW4gZW1wdHkgdGV4dFwiICkgdW5sZXNzIEBULm5vbmVtcHR5X3RleHQuaXNhIHhcbiAgICB1bmxlc3MgKCBwYXJ0cyA9IHguc3BsaXQgQFtDRkddLmJsYW5rX3NwbGl0dGVyICkubGVuZ3RoIGlzIDJcbiAgICAgIHJldHVybiAoIEBmYWlsIFwibWFnbmlmaWVycyBtdXN0IGhhdmUgZXhhY3RseSAxIGJsYW5rLCBnb3QgI3twYXJ0cy5sZW5ndGggLSAxfSBibGFua3NcIilcbiAgICBbIG5tYWdfYmFyZV9yZXZlcnNlZCxcbiAgICAgIHBtYWdfYmFyZSwgICAgICAgICAgXSA9IHBhcnRzXG4gICAgIy4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi5cbiAgICAjIEBhc3NpZ24geyBpYW06ICdtYWduaWZpZXJzJywgfTsgZGVidWcgJ86pYnNrX19fMScsIEBkYXRhXG4gICAgcmV0dXJuICggQGZhaWwgXCLOqWJza19fXzIgPz8/XCIgKSB1bmxlc3MgIEBULm5tYWdfYmFyZV9yZXZlcnNlZC5kbV9pc2EgQGRhdGEsIHsgY2hyczogJ25tYWdfY2hyc19yZXZlcnNlZCcsIH0sICBubWFnX2JhcmVfcmV2ZXJzZWRcbiAgICByZXR1cm4gKCBAZmFpbCBcIs6pYnNrX19fMyA/Pz9cIiApIHVubGVzcyAgQFQucG1hZ19iYXJlLmRtX2lzYSAgICAgICAgICBAZGF0YSwgeyBjaHJzOiAnX3BtYWdfbGlzdCcsIH0sICAgICAgICAgIHBtYWdfYmFyZVxuICAgIHJldHVybiAoIEBmYWlsIFwizqlic2tfX180ID8/P1wiICkgdW5sZXNzICBAVC5pbmNyZW1lbnRhbF90ZXh0LmlzYSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm1hZ19iYXJlX3JldmVyc2VkICsgcG1hZ19iYXJlXG4gICAgcmV0dXJuICggQGZhaWwgXCLOqWJza19fXzUgPz8/XCIgKSB1bmxlc3MgIG5tYWdfYmFyZV9yZXZlcnNlZC5sZW5ndGggaXMgcG1hZ19iYXJlLmxlbmd0aFxuICAgICMuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uXG4gICAgX25tYWcgICAgICAgPSBAW0NGR10uYmxhbmsgKyBbIEBkYXRhLm5tYWdfY2hyc19yZXZlcnNlZC4uLiwgXS5yZXZlcnNlKCkuam9pbiAnJ1xuICAgIF9wbWFnICAgICAgID0gQFtDRkddLmJsYW5rICsgcG1hZ19iYXJlXG4gICAgX25tYWdfbGlzdCAgPSBmcmVlemUgQXJyYXkuZnJvbSBfbm1hZ1xuICAgIF9wbWFnX2xpc3QgID0gZnJlZXplIEFycmF5LmZyb20gX3BtYWdcbiAgICBAYXNzaWduIHsgX25tYWcsIF9wbWFnLCBfbm1hZ19saXN0LCBfcG1hZ19saXN0LCB9XG4gICAgcmV0dXJuIHRydWVcblxuICAjLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIEBkaWdpdHNldDogKCB4ICkgLT5cbiAgICByZXR1cm4gZmFsc2UgdW5sZXNzIEBULmluY3JlbWVudGFsX3RleHQuZG1faXNhIEBkYXRhLCB7IGNocnM6ICdfZGlnaXRzX2xpc3QnLCB9LCB4XG4gICAgX2Jhc2UgICAgICAgICAgICAgPSBAZGF0YS5fZGlnaXRzX2xpc3QubGVuZ3RoXG4gICAgcmV0dXJuIEBmYWlsIFwiYW4gZGlnaXRzZXQgbXVzdCBoYXZlIDIgY2hycyBvciBtb3JlXCIgdW5sZXNzIEBULl9iYXNlLmlzYSBfYmFzZVxuICAgIF9uYXVnaHQgICAgICAgICAgID0gQGRhdGEuX2RpZ2l0c19saXN0LmF0ICAwXG4gICAgX25vdmEgICAgICAgICAgICAgPSBAZGF0YS5fZGlnaXRzX2xpc3QuYXQgLTFcbiAgICBfbGVhZGluZ19ub3Zhc19yZSA9IGludGVybmFscy5nZXRfbGVhZGluZ19ub3Zhc19yZSBfbm92YVxuICAgIEBhc3NpZ24geyBfYmFzZSwgX25hdWdodCwgX25vdmEsIF9sZWFkaW5nX25vdmFzX3JlLCB9XG4gICAgcmV0dXJuIHRydWVcblxuICAjLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIEB1bmlsaXRlcmFsczogKCB4ICkgLT5cbiAgICByZXR1cm4gZmFsc2UgdW5sZXNzIEBULm5vbmVtcHR5X3RleHQuaXNhIHhcbiAgICBpZiBAVC5jaGFyYWN0ZXIuaXNhIHhcbiAgICAgIF9udW5zICAgICAgID0gJydcbiAgICAgIF96cHVucyAgICAgID0geFxuICAgICAgX251bnNfbGlzdCAgPSBmcmVlemUgW11cbiAgICAgIF96cHVuc19saXN0ID0gZnJlZXplIFsgeCwgXVxuICAgICAgQGFzc2lnbiB7IF9udW5zLCBfenB1bnMsIF9udW5zX2xpc3QsIF96cHVuc19saXN0LCB9XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIHBhcnRzID0geC5zcGxpdCBAW0NGR10uYmxhbmtfc3BsaXR0ZXJcbiAgICB1bmxlc3MgcGFydHMubGVuZ3RoIGlzIDNcbiAgICAgIHJldHVybiAoIEBmYWlsIFwidW5pbGl0ZXJhbHMgdGhhdCBhcmUgbm90IGEgc2luZ2xlIGNoYXJhY3RlciBtdXN0IGhhdmUgZXhhY3RseSAyIGJsYW5rMiwgZ290ICN7cGFydHMubGVuZ3RoIC0gMX0gYmxhbmtzXCIpXG4gICAgWyBfbnVucyxcbiAgICAgIF9jaXBoZXIsXG4gICAgICBfcHVucywgXSA9IHBhcnRzXG4gICAgX3pwdW5zICAgICA9IF9jaXBoZXIgKyBfcHVuc1xuICAgIEBhc3NpZ24geyBfbnVucywgX3pwdW5zLCBfY2lwaGVyLCB9XG4gICAgcmV0dXJuIGZhbHNlIHVubGVzcyBAVC5pbmNyZW1lbnRhbF90ZXh0LmRtX2lzYSBAZGF0YSwgeyBjaHJzOiAnX251bnNfbGlzdCcsIH0sICBfbnVuc1xuICAgIHJldHVybiBmYWxzZSB1bmxlc3MgQFQuaW5jcmVtZW50YWxfdGV4dC5kbV9pc2EgQGRhdGEsIHsgY2hyczogJ196cHVuc19saXN0JywgfSwgX3pwdW5zXG4gICAgcmV0dXJuIHRydWVcblxuICAjLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIEBfYWxwaGFiZXQ6ICggeCApIC0+XG4gICAgcmV0dXJuIGZhbHNlIHVubGVzcyBAVC5ub25lbXB0eV90ZXh0LmRtX2lzYSAgICBAZGF0YSwgbnVsbCwgeFxuICAgIHJldHVybiBmYWxzZSB1bmxlc3MgQFQuaW5jcmVtZW50YWxfdGV4dC5kbV9pc2EgQGRhdGEsIG51bGwsIHhcbiAgICByZXR1cm4gdHJ1ZVxuXG4gICMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgQF9tYXhfaW50ZWdlcl8kOiAoIHgsIF9iYXNlICkgLT5cbiAgICByZXR1cm4gQGZhaWwgXCJ4IG5vdCBhIHBvc2l0aXZlIHNhZmUgaW50ZWdlclwiICAgICAgICAgICB1bmxlc3MgQFQucGludGVnZXIuaXNhICAgICAgICB4XG4gICAgcmV0dXJuIEBmYWlsIFwiX2Jhc2Ugbm90IGEgc2FmZSBpbnRlZ2VyIGdyZWF0ZXIgdGhhbiAxXCIgIHVubGVzcyBAVC5fYmFzZS5pc2EgICAgICAgICAgICBfYmFzZVxuICAgIHJldHVybiBAZmFpbCBcInggbm90IGEgcG9zaXRpdmUgYWxsLW5pbmVyc1wiICAgICAgICAgICAgIHVubGVzcyBpc19wb3NpdGl2ZV9hbGxfbmluZXIgIHgsIF9iYXNlXG4gICAgcmV0dXJuIHRydWVcblxuICAjLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICMjIyBUQUlOVCBzaG91bGQgYmUgbWV0aG9kIG9mIGBULl9tYXhfaW50ZWdlcl8kYCAjIyNcbiAgY3JlYXRlX21heF9pbnRlZ2VyOiAoeyBfYmFzZSwgZGlnaXRzX3Blcl9pZHgsIH0pIC0+XG4gICAgQF9iYXNlLnZhbGlkYXRlICAgICAgICAgICBfYmFzZVxuICAgIEBkaWdpdHNfcGVyX2lkeC52YWxpZGF0ZSAgZGlnaXRzX3Blcl9pZHhcbiAgICBSID0gTWF0aC5taW4gKCBnZXRfbWF4X2ludGVnZXIgTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIsIF9iYXNlICksICggKCBfYmFzZSAqKiBkaWdpdHNfcGVyX2lkeCApIC0gMSApXG4gICAgQF9tYXhfaW50ZWdlcl8kLnZhbGlkYXRlIFIsIF9iYXNlXG4gICAgcmV0dXJuIFJcblxuICAjLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIEBkaWdpdHNfcGVyX2lkeDogKCB4LCBfcG1hZ19saXN0ID0gbnVsbCApIC0+XG4gICAgcmV0dXJuIEBmYWlsIFwiI3t4fSBub3QgYSBwb3NpdGl2ZSBzYWZlIGludGVnZXJcIiAgICAgICAgICAgICAgICAgICAgICAgICAgIHVubGVzcyBAVC5waW50ZWdlci5pc2EgeFxuICAgIHJldHVybiBAZmFpbCBcIiN7eH0gZXhjZWVkcyBsaW1pdCAje19wbWFnX2xpc3QubGVuZ3RofSBzZXQgYnkgbWFnbmlmaWVyc1wiICBpZiBfcG1hZ19saXN0PyBhbmQgbm90ICggeCA8PSBfcG1hZ19saXN0Lmxlbmd0aCApXG4gICAgcmV0dXJuIHRydWVcblxuIz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5fdGVzdF9tb25vdG9ueSA9ICggeCwgY21wICkgLT5cbiAgeyBjaHJzLCB9ID0gQGRhdGEgIyA9IEBjcmVhdGUgZGF0YVxuICByZXR1cm4gKCBAZmFpbCBcImVtcHR5IGlzIG5vdCBtb25vdG9uaWNcIiApIGlmIGNocnMubGVuZ3RoIGlzIDBcbiAgcmV0dXJuIHRydWUgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgY2hycy5sZW5ndGggaXMgMVxuICBmb3IgaWR4IGluIFsgMSAuLi4gY2hycy5sZW5ndGggXVxuICAgIHBydl9jaHIgPSBjaHJzWyBpZHggLSAxIF1cbiAgICBjaHIgICAgID0gY2hyc1sgaWR4ICAgICBdXG4gICAgUiAgICAgICA9IHN3aXRjaCBjbXBcbiAgICAgIHdoZW4gJz4nIHRoZW4gcHJ2X2NociA+IGNoclxuICAgICAgd2hlbiAnPCcgdGhlbiBwcnZfY2hyIDwgY2hyXG4gICAgICBlbHNlIHRocm93IG5ldyBFcnJvciBcIs6pYnNrX19fNiAoaW50ZXJuYWwpIGV4cGVjdGVkICc+JyBvciAnPCcsIGdvdCAje3JwciBjbXB9XCJcbiAgICBjb250aW51ZSBpZiBSXG4gICAgQGFzc2lnbiB7IGZhaWw6IHsgeCwgaWR4LCBwcnZfY2hyLCBjaHIsIH0sIH1cbiAgICByZXR1cm4gZmFsc2VcbiAgcmV0dXJuIHRydWVcblxuIz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5PYmplY3QuYXNzaWduIG1vZHVsZS5leHBvcnRzLCB7XG4gIEhvbGxlcml0aF90eXBlc3BhY2UsXG4gIENGRzogICAgICAgICAgICAgICAgICBDRkcsXG4gIGludGVybmFscywgfVxuIl19
