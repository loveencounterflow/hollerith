(function() {
  'use strict';
  var Bounded_list, SFMODULES, Type, Typespace, debug, hide, nameit, regex, rpr, set_getter, type_of;

  //===========================================================================================================
  SFMODULES = require('bricabrac-single-file-modules');

  ({type_of} = SFMODULES.unstable.require_type_of());

  ({
    show_no_colors: rpr
  } = SFMODULES.unstable.require_show());

  ({debug} = console);

  ({regex} = require('regex'));

  ({hide, set_getter} = SFMODULES.require_managed_property_tools());

  ({nameit} = SFMODULES.require_nameit());

  Bounded_list = (function() {
    //===========================================================================================================
    /* NOTE Future Single-File Module */
    class Bounded_list {
      //---------------------------------------------------------------------------------------------------------
      constructor(max_size = 3) {
        this.max_size = max_size;
        this.data = [];
        return void 0;
      }

      //---------------------------------------------------------------------------------------------------------
      create(...P) {
        this.data.push({...P});
        if (this.size > this.max_size) {
          this.data.shift();
        }
        return this.current;
      }

      //---------------------------------------------------------------------------------------------------------
      at(idx) {
        return this.data.at(idx);
      }

    };

    //---------------------------------------------------------------------------------------------------------
    set_getter(Bounded_list.prototype, 'size', function() {
      return this.data.length;
    });

    set_getter(Bounded_list.prototype, 'is_empty', function() {
      return this.data.length === 0;
    });

    //---------------------------------------------------------------------------------------------------------
    set_getter(Bounded_list.prototype, 'current', function() {
      if (this.is_empty) {
        this.create();
      }
      return this.at(-1);
    });

    return Bounded_list;

  }).call(this);

  //===========================================================================================================
  /* NOTE Future Single-File Module */
  Type = class Type {
    //---------------------------------------------------------------------------------------------------------
    constructor(typespace, name, isa) {
      hide(this, 'name', name);
      hide(this, 'T', typespace);
      hide(this, '_isa', isa);
      this.data = {};
      hide(this, '_ctx', {
        T: typespace,
        me: this,
        data: this.data
      });
      return void 0;
    }

    //---------------------------------------------------------------------------------------------------------
    isa(x) {
      var key;
      for (key in this.data) {
        delete this.data[key];
      }
      return this._isa.call(this._ctx, x);
    }

  };

  //===========================================================================================================
  Typespace = class Typespace {
    //---------------------------------------------------------------------------------------------------------
    constructor() {
      var Typeclass, clasz, i, isa, len, name, ref;
      clasz = this.constructor;
      ref = Object.getOwnPropertyNames(clasz);
      for (i = 0, len = ref.length; i < len; i++) {
        name = ref[i];
        Typeclass = class Typeclass extends Type {};
        nameit(name, Typeclass);
        this[name] = new Typeclass(this, name, isa = clasz[name]);
      }
      return void 0;
    }

    //=========================================================================================================
    static text(x) {
      return (type_of(x)) === 'text';
    }

    static nonempty_text(x) {
      return (this.T.text.isa(x)) && x.length > 0;
    }

    static float(x) {
      return Number.isFinite(x);
    }

    static integer(x) {
      return Number.isSafeInteger(x);
    }

    static pinteger(x) {
      return (this.T.integer.isa(x)) && x > 0;
    }

    static zpinteger(x) {
      return (this.T.integer.isa(x)) && x >= 0;
    }

    static cardinal(x) {
      return this.T.zpinteger.isa(x);
    }

    //---------------------------------------------------------------------------------------------------------
    static dimension(x) {
      return this.T.pinteger.isa(x);
    }

    //---------------------------------------------------------------------------------------------------------
    static incremental_text(x) {
      var chr, chrs, i, idx, prv_chr, ref;
      if (!this.T.nonempty_text.isa(x)) {
        /* TAINT code duplication */
        return false;
      }
      this.data.chrs = chrs = Array.from(x);
      if (chrs.length === 1) {
        return true;
      }
      for (idx = i = 1, ref = chrs.length; (1 <= ref ? i < ref : i > ref); idx = 1 <= ref ? ++i : --i) {
        if (!((prv_chr = chrs[idx - 1]) < (chr = chrs[idx]))) {
          this.data.fail = {x, idx, prv_chr, chr};
          return false;
        }
      }
      return true;
    }

    //---------------------------------------------------------------------------------------------------------
    static decremental_text(x) {
      var chr, chrs, i, idx, prv_chr, ref;
      if (!this.T.nonempty_text.isa(x)) {
        /* TAINT code duplication */
        return false;
      }
      this.data.chrs = chrs = Array.from(x);
      if (chrs.length === 1) {
        return true;
      }
      for (idx = i = 1, ref = chrs.length; (1 <= ref ? i < ref : i > ref); idx = 1 <= ref ? ++i : --i) {
        if (!((prv_chr = chrs[idx - 1]) > (chr = chrs[idx]))) {
          this.data.fail = {x, idx, prv_chr, chr};
          return false;
        }
      }
      return true;
    }

    //---------------------------------------------------------------------------------------------------------
    static nmag_bare_reversed(x) {
      if (!this.T.nonempty_text(x)) {
        return false;
      }
    }

    //---------------------------------------------------------------------------------------------------------
    static pmag_bare(x) {}

    //---------------------------------------------------------------------------------------------------------
    static magnifiers(x) {
      var nmag, nmag_bare_reversed, pmag, pmag_bare;
      if (!this.T.nonempty_text.isa(x)) {
        return false;
      }
      [nmag_bare_reversed, pmag_bare] = x.split(/\s+/v);
      if (!this.T.nmag_bare_reversed.isa(nmag_bare_reversed)) {
        return false;
      }
      if (!this.T.pmag_bare.isa(pmag_bare)) {
        return false;
      }
      nmag = ' ' + nmag_bare_reversed.reverse();
      return pmag = ' ' + pmag_bare;
    }

  };

  //===========================================================================================================
  module.exports = {
    types: new Typespace(),
    internals: {Type, Typespace, Bounded_list}
  };

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL3R5cGVzLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQTtFQUFBO0FBQUEsTUFBQSxZQUFBLEVBQUEsU0FBQSxFQUFBLElBQUEsRUFBQSxTQUFBLEVBQUEsS0FBQSxFQUFBLElBQUEsRUFBQSxNQUFBLEVBQUEsS0FBQSxFQUFBLEdBQUEsRUFBQSxVQUFBLEVBQUEsT0FBQTs7O0VBR0EsU0FBQSxHQUE0QixPQUFBLENBQVEsK0JBQVI7O0VBQzVCLENBQUEsQ0FBRSxPQUFGLENBQUEsR0FBNEIsU0FBUyxDQUFDLFFBQVEsQ0FBQyxlQUFuQixDQUFBLENBQTVCOztFQUNBLENBQUE7SUFBRSxjQUFBLEVBQWdCO0VBQWxCLENBQUEsR0FBNEIsU0FBUyxDQUFDLFFBQVEsQ0FBQyxZQUFuQixDQUFBLENBQTVCOztFQUNBLENBQUEsQ0FBRSxLQUFGLENBQUEsR0FBNEIsT0FBNUI7O0VBQ0EsQ0FBQSxDQUFFLEtBQUYsQ0FBQSxHQUE0QixPQUFBLENBQVEsT0FBUixDQUE1Qjs7RUFDQSxDQUFBLENBQUUsSUFBRixFQUNFLFVBREYsQ0FBQSxHQUM0QixTQUFTLENBQUMsOEJBQVYsQ0FBQSxDQUQ1Qjs7RUFFQSxDQUFBLENBQUUsTUFBRixDQUFBLEdBQTRCLFNBQVMsQ0FBQyxjQUFWLENBQUEsQ0FBNUI7O0VBS007OztJQUFOLE1BQUEsYUFBQSxDQUFBOztNQUdFLFdBQWEsQ0FBRSxXQUFXLENBQWIsQ0FBQTtRQUNYLElBQUMsQ0FBQSxRQUFELEdBQWM7UUFDZCxJQUFDLENBQUEsSUFBRCxHQUFjO0FBQ2QsZUFBTztNQUhJLENBRGY7OztNQU9FLE1BQVEsQ0FBQSxHQUFFLENBQUYsQ0FBQTtRQUNOLElBQUMsQ0FBQSxJQUFJLENBQUMsSUFBTixDQUFXLENBQUUsR0FBQSxDQUFGLENBQVg7UUFDQSxJQUFpQixJQUFDLENBQUEsSUFBRCxHQUFRLElBQUMsQ0FBQSxRQUExQjtVQUFBLElBQUMsQ0FBQSxJQUFJLENBQUMsS0FBTixDQUFBLEVBQUE7O0FBQ0EsZUFBTyxJQUFDLENBQUE7TUFIRixDQVBWOzs7TUFhRSxFQUFJLENBQUUsR0FBRixDQUFBO2VBQVcsSUFBQyxDQUFBLElBQUksQ0FBQyxFQUFOLENBQVMsR0FBVDtNQUFYOztJQWZOOzs7SUFrQkUsVUFBQSxDQUFXLFlBQUMsQ0FBQSxTQUFaLEVBQWdCLE1BQWhCLEVBQTRCLFFBQUEsQ0FBQSxDQUFBO2FBQUcsSUFBQyxDQUFBLElBQUksQ0FBQztJQUFULENBQTVCOztJQUNBLFVBQUEsQ0FBVyxZQUFDLENBQUEsU0FBWixFQUFnQixVQUFoQixFQUE0QixRQUFBLENBQUEsQ0FBQTthQUFHLElBQUMsQ0FBQSxJQUFJLENBQUMsTUFBTixLQUFnQjtJQUFuQixDQUE1Qjs7O0lBR0EsVUFBQSxDQUFXLFlBQUMsQ0FBQSxTQUFaLEVBQWdCLFNBQWhCLEVBQTJCLFFBQUEsQ0FBQSxDQUFBO01BQ3pCLElBQWEsSUFBQyxDQUFBLFFBQWQ7UUFBQSxJQUFDLENBQUEsTUFBRCxDQUFBLEVBQUE7O0FBQ0EsYUFBTyxJQUFDLENBQUEsRUFBRCxDQUFJLENBQUMsQ0FBTDtJQUZrQixDQUEzQjs7OztnQkFyQ0Y7Ozs7RUE0Q00sT0FBTixNQUFBLEtBQUEsQ0FBQTs7SUFHRSxXQUFhLENBQUUsU0FBRixFQUFhLElBQWIsRUFBbUIsR0FBbkIsQ0FBQTtNQUNYLElBQUEsQ0FBSyxJQUFMLEVBQVEsTUFBUixFQUFrQixJQUFsQjtNQUNBLElBQUEsQ0FBSyxJQUFMLEVBQVEsR0FBUixFQUFrQixTQUFsQjtNQUNBLElBQUEsQ0FBSyxJQUFMLEVBQVEsTUFBUixFQUFrQixHQUFsQjtNQUNBLElBQUMsQ0FBQSxJQUFELEdBQWtCLENBQUE7TUFDbEIsSUFBQSxDQUFLLElBQUwsRUFBUSxNQUFSLEVBQWtCO1FBQUUsQ0FBQSxFQUFHLFNBQUw7UUFBZ0IsRUFBQSxFQUFJLElBQXBCO1FBQXVCLElBQUEsRUFBTSxJQUFDLENBQUE7TUFBOUIsQ0FBbEI7QUFDQSxhQUFPO0lBTkksQ0FEZjs7O0lBVUUsR0FBSyxDQUFFLENBQUYsQ0FBQTtBQUNQLFVBQUE7TUFBSSxLQUFBLGdCQUFBO1FBQUEsT0FBTyxJQUFDLENBQUEsSUFBSSxDQUFFLEdBQUY7TUFBWjtBQUNBLGFBQU8sSUFBQyxDQUFBLElBQUksQ0FBQyxJQUFOLENBQVcsSUFBQyxDQUFBLElBQVosRUFBa0IsQ0FBbEI7SUFGSjs7RUFaUCxFQTVDQTs7O0VBOERNLFlBQU4sTUFBQSxVQUFBLENBQUE7O0lBR0UsV0FBYSxDQUFBLENBQUE7QUFDZixVQUFBLFNBQUEsRUFBQSxLQUFBLEVBQUEsQ0FBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsSUFBQSxFQUFBO01BQUksS0FBQSxHQUFRLElBQUMsQ0FBQTtBQUNUO01BQUEsS0FBQSxxQ0FBQTs7UUFDUSxZQUFOLE1BQUEsVUFBQSxRQUF3QixLQUF4QixDQUFBO1FBQ0EsTUFBQSxDQUFPLElBQVAsRUFBYSxTQUFiO1FBQ0EsSUFBQyxDQUFFLElBQUYsQ0FBRCxHQUFZLElBQUksU0FBSixDQUFjLElBQWQsRUFBaUIsSUFBakIsRUFBdUIsR0FBQSxHQUFNLEtBQUssQ0FBRSxJQUFGLENBQWxDO01BSGQ7QUFJQSxhQUFPO0lBTkksQ0FEZjs7O0lBVW1CLE9BQWhCLElBQWdCLENBQUUsQ0FBRixDQUFBO2FBQVMsQ0FBRSxPQUFBLENBQVEsQ0FBUixDQUFGLENBQUEsS0FBaUI7SUFBMUI7O0lBQ0EsT0FBaEIsYUFBZ0IsQ0FBRSxDQUFGLENBQUE7YUFBUyxDQUFFLElBQUMsQ0FBQSxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQVIsQ0FBWSxDQUFaLENBQUYsQ0FBQSxJQUFzQixDQUFDLENBQUMsTUFBRixHQUFXO0lBQTFDOztJQUNBLE9BQWhCLEtBQWdCLENBQUUsQ0FBRixDQUFBO2FBQVMsTUFBTSxDQUFDLFFBQVAsQ0FBZ0IsQ0FBaEI7SUFBVDs7SUFDQSxPQUFoQixPQUFnQixDQUFFLENBQUYsQ0FBQTthQUFTLE1BQU0sQ0FBQyxhQUFQLENBQXFCLENBQXJCO0lBQVQ7O0lBQ0EsT0FBaEIsUUFBZ0IsQ0FBRSxDQUFGLENBQUE7YUFBUyxDQUFFLElBQUMsQ0FBQSxDQUFDLENBQUMsT0FBTyxDQUFDLEdBQVgsQ0FBZSxDQUFmLENBQUYsQ0FBQSxJQUF5QixDQUFBLEdBQUk7SUFBdEM7O0lBQ0EsT0FBaEIsU0FBZ0IsQ0FBRSxDQUFGLENBQUE7YUFBUyxDQUFFLElBQUMsQ0FBQSxDQUFDLENBQUMsT0FBTyxDQUFDLEdBQVgsQ0FBZSxDQUFmLENBQUYsQ0FBQSxJQUF5QixDQUFBLElBQUs7SUFBdkM7O0lBQ0EsT0FBaEIsUUFBZ0IsQ0FBRSxDQUFGLENBQUE7YUFBUyxJQUFDLENBQUEsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxHQUFiLENBQWlCLENBQWpCO0lBQVQsQ0FoQm5COzs7SUFrQm1CLE9BQWhCLFNBQWdCLENBQUUsQ0FBRixDQUFBO2FBQVMsSUFBQyxDQUFBLENBQUMsQ0FBQyxRQUFRLENBQUMsR0FBWixDQUFpQixDQUFqQjtJQUFULENBbEJuQjs7O0lBcUJxQixPQUFsQixnQkFBa0IsQ0FBRSxDQUFGLENBQUE7QUFDckIsVUFBQSxHQUFBLEVBQUEsSUFBQSxFQUFBLENBQUEsRUFBQSxHQUFBLEVBQUEsT0FBQSxFQUFBO01BQ0ksS0FBb0IsSUFBQyxDQUFBLENBQUMsQ0FBQyxhQUFhLENBQUMsR0FBakIsQ0FBcUIsQ0FBckIsQ0FBcEI7O0FBQUEsZUFBTyxNQUFQOztNQUNBLElBQUMsQ0FBQSxJQUFJLENBQUMsSUFBTixHQUFhLElBQUEsR0FBTyxLQUFLLENBQUMsSUFBTixDQUFXLENBQVg7TUFDcEIsSUFBZSxJQUFJLENBQUMsTUFBTCxLQUFlLENBQTlCO0FBQUEsZUFBTyxLQUFQOztNQUNBLEtBQVcsMEZBQVg7UUFDRSxNQUFPLENBQUUsT0FBQSxHQUFVLElBQUksQ0FBRSxHQUFBLEdBQU0sQ0FBUixDQUFoQixDQUFBLEdBQWdDLENBQUUsR0FBQSxHQUFNLElBQUksQ0FBRSxHQUFGLENBQVosRUFBdkM7VUFDRSxJQUFDLENBQUEsSUFBSSxDQUFDLElBQU4sR0FBYSxDQUFFLENBQUYsRUFBSyxHQUFMLEVBQVUsT0FBVixFQUFtQixHQUFuQjtBQUNiLGlCQUFPLE1BRlQ7O01BREY7QUFJQSxhQUFPO0lBVFUsQ0FyQnJCOzs7SUFpQ3FCLE9BQWxCLGdCQUFrQixDQUFFLENBQUYsQ0FBQTtBQUNyQixVQUFBLEdBQUEsRUFBQSxJQUFBLEVBQUEsQ0FBQSxFQUFBLEdBQUEsRUFBQSxPQUFBLEVBQUE7TUFDSSxLQUFvQixJQUFDLENBQUEsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxHQUFqQixDQUFxQixDQUFyQixDQUFwQjs7QUFBQSxlQUFPLE1BQVA7O01BQ0EsSUFBQyxDQUFBLElBQUksQ0FBQyxJQUFOLEdBQWEsSUFBQSxHQUFPLEtBQUssQ0FBQyxJQUFOLENBQVcsQ0FBWDtNQUNwQixJQUFlLElBQUksQ0FBQyxNQUFMLEtBQWUsQ0FBOUI7QUFBQSxlQUFPLEtBQVA7O01BQ0EsS0FBVywwRkFBWDtRQUNFLE1BQU8sQ0FBRSxPQUFBLEdBQVUsSUFBSSxDQUFFLEdBQUEsR0FBTSxDQUFSLENBQWhCLENBQUEsR0FBZ0MsQ0FBRSxHQUFBLEdBQU0sSUFBSSxDQUFFLEdBQUYsQ0FBWixFQUF2QztVQUNFLElBQUMsQ0FBQSxJQUFJLENBQUMsSUFBTixHQUFhLENBQUUsQ0FBRixFQUFLLEdBQUwsRUFBVSxPQUFWLEVBQW1CLEdBQW5CO0FBQ2IsaUJBQU8sTUFGVDs7TUFERjtBQUlBLGFBQU87SUFUVSxDQWpDckI7OztJQTZDdUIsT0FBcEIsa0JBQW9CLENBQUUsQ0FBRixDQUFBO01BQ25CLEtBQW9CLElBQUMsQ0FBQSxDQUFDLENBQUMsYUFBSCxDQUFpQixDQUFqQixDQUFwQjtBQUFBLGVBQU8sTUFBUDs7SUFEbUIsQ0E3Q3ZCOzs7SUFpRGMsT0FBWCxTQUFXLENBQUUsQ0FBRixDQUFBLEVBQUEsQ0FqRGQ7OztJQW9EZSxPQUFaLFVBQVksQ0FBRSxDQUFGLENBQUE7QUFDZixVQUFBLElBQUEsRUFBQSxrQkFBQSxFQUFBLElBQUEsRUFBQTtNQUFJLEtBQW9CLElBQUMsQ0FBQSxDQUFDLENBQUMsYUFBYSxDQUFDLEdBQWpCLENBQXFCLENBQXJCLENBQXBCO0FBQUEsZUFBTyxNQUFQOztNQUNBLENBQUUsa0JBQUYsRUFDRSxTQURGLENBQUEsR0FDa0IsQ0FBQyxDQUFDLEtBQUYsQ0FBUSxNQUFSO01BQ2xCLEtBQW9CLElBQUMsQ0FBQSxDQUFDLENBQUMsa0JBQWtCLENBQUMsR0FBdEIsQ0FBMEIsa0JBQTFCLENBQXBCO0FBQUEsZUFBTyxNQUFQOztNQUNBLEtBQW9CLElBQUMsQ0FBQSxDQUFDLENBQUMsU0FBUyxDQUFDLEdBQWIsQ0FBMEIsU0FBMUIsQ0FBcEI7QUFBQSxlQUFPLE1BQVA7O01BQ0EsSUFBQSxHQUFrQixHQUFBLEdBQU0sa0JBQWtCLENBQUMsT0FBbkIsQ0FBQTthQUN4QixJQUFBLEdBQWtCLEdBQUEsR0FBTTtJQVBiOztFQXREZixFQTlEQTs7O0VBK0hBLE1BQU0sQ0FBQyxPQUFQLEdBQWlCO0lBQUUsS0FBQSxFQUFPLElBQUksU0FBSixDQUFBLENBQVQ7SUFBMEIsU0FBQSxFQUFXLENBQUUsSUFBRixFQUFRLFNBQVIsRUFBbUIsWUFBbkI7RUFBckM7QUEvSGpCIiwic291cmNlc0NvbnRlbnQiOlsiXG4ndXNlIHN0cmljdCdcblxuIz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5TRk1PRFVMRVMgICAgICAgICAgICAgICAgID0gcmVxdWlyZSAnYnJpY2FicmFjLXNpbmdsZS1maWxlLW1vZHVsZXMnXG57IHR5cGVfb2YsICAgICAgICAgICAgICB9ID0gU0ZNT0RVTEVTLnVuc3RhYmxlLnJlcXVpcmVfdHlwZV9vZigpXG57IHNob3dfbm9fY29sb3JzOiBycHIsICB9ID0gU0ZNT0RVTEVTLnVuc3RhYmxlLnJlcXVpcmVfc2hvdygpXG57IGRlYnVnLCAgICAgICAgICAgICAgICB9ID0gY29uc29sZVxueyByZWdleCwgICAgICAgICAgICAgICAgfSA9IHJlcXVpcmUgJ3JlZ2V4J1xueyBoaWRlLFxuICBzZXRfZ2V0dGVyLCAgICAgICAgICAgfSA9IFNGTU9EVUxFUy5yZXF1aXJlX21hbmFnZWRfcHJvcGVydHlfdG9vbHMoKVxueyBuYW1laXQsICAgICAgICAgICAgICAgfSA9IFNGTU9EVUxFUy5yZXF1aXJlX25hbWVpdCgpXG5cblxuIz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4jIyMgTk9URSBGdXR1cmUgU2luZ2xlLUZpbGUgTW9kdWxlICMjI1xuY2xhc3MgQm91bmRlZF9saXN0XG5cbiAgIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBjb25zdHJ1Y3RvcjogKCBtYXhfc2l6ZSA9IDMgKSAtPlxuICAgIEBtYXhfc2l6ZSAgID0gbWF4X3NpemVcbiAgICBAZGF0YSAgICAgICA9IFtdXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuXG4gICMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgY3JlYXRlOiAoIFAuLi4gKSAtPlxuICAgIEBkYXRhLnB1c2ggeyBQLi4uLCB9XG4gICAgQGRhdGEuc2hpZnQoKSBpZiBAc2l6ZSA+IEBtYXhfc2l6ZVxuICAgIHJldHVybiBAY3VycmVudFxuXG4gICMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgYXQ6ICggaWR4ICkgLT4gQGRhdGEuYXQgaWR4XG5cbiAgIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBzZXRfZ2V0dGVyIEA6OiwgJ3NpemUnLCAgICAgLT4gQGRhdGEubGVuZ3RoXG4gIHNldF9nZXR0ZXIgQDo6LCAnaXNfZW1wdHknLCAtPiBAZGF0YS5sZW5ndGggaXMgMFxuXG4gICMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgc2V0X2dldHRlciBAOjosICdjdXJyZW50JywgLT5cbiAgICBAY3JlYXRlKCkgaWYgQGlzX2VtcHR5XG4gICAgcmV0dXJuIEBhdCAtMVxuXG5cbiM9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuIyMjIE5PVEUgRnV0dXJlIFNpbmdsZS1GaWxlIE1vZHVsZSAjIyNcbmNsYXNzIFR5cGVcblxuICAjLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIGNvbnN0cnVjdG9yOiAoIHR5cGVzcGFjZSwgbmFtZSwgaXNhICkgLT5cbiAgICBoaWRlIEAsICduYW1lJywgICBuYW1lXG4gICAgaGlkZSBALCAnVCcsICAgICAgdHlwZXNwYWNlXG4gICAgaGlkZSBALCAnX2lzYScsICAgaXNhXG4gICAgQGRhdGEgICAgICAgICAgID0ge31cbiAgICBoaWRlIEAsICdfY3R4JywgICB7IFQ6IHR5cGVzcGFjZSwgbWU6IEAsIGRhdGE6IEBkYXRhLCB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuXG4gICMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgaXNhOiAoIHggKSAtPlxuICAgIGRlbGV0ZSBAZGF0YVsga2V5IF0gZm9yIGtleSBvZiBAZGF0YVxuICAgIHJldHVybiBAX2lzYS5jYWxsIEBfY3R4LCB4XG5cblxuIz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5jbGFzcyBUeXBlc3BhY2VcblxuICAjLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIGNvbnN0cnVjdG9yOiAtPlxuICAgIGNsYXN6ID0gQGNvbnN0cnVjdG9yXG4gICAgZm9yIG5hbWUgaW4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMgY2xhc3pcbiAgICAgIGNsYXNzIFR5cGVjbGFzcyBleHRlbmRzIFR5cGVcbiAgICAgIG5hbWVpdCBuYW1lLCBUeXBlY2xhc3NcbiAgICAgIEBbIG5hbWUgXSA9IG5ldyBUeXBlY2xhc3MgQCwgbmFtZSwgaXNhID0gY2xhc3pbIG5hbWUgXVxuICAgIHJldHVybiB1bmRlZmluZWRcblxuICAjPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIEB0ZXh0OiAgICAgICAgICAgKCB4ICkgLT4gKCB0eXBlX29mIHggKSBpcyAndGV4dCdcbiAgQG5vbmVtcHR5X3RleHQ6ICAoIHggKSAtPiAoIEBULnRleHQuaXNhIHggKSBhbmQgeC5sZW5ndGggPiAwXG4gIEBmbG9hdDogICAgICAgICAgKCB4ICkgLT4gTnVtYmVyLmlzRmluaXRlIHhcbiAgQGludGVnZXI6ICAgICAgICAoIHggKSAtPiBOdW1iZXIuaXNTYWZlSW50ZWdlciB4XG4gIEBwaW50ZWdlcjogICAgICAgKCB4ICkgLT4gKCBAVC5pbnRlZ2VyLmlzYSB4ICkgYW5kIHggPiAwXG4gIEB6cGludGVnZXI6ICAgICAgKCB4ICkgLT4gKCBAVC5pbnRlZ2VyLmlzYSB4ICkgYW5kIHggPj0gMFxuICBAY2FyZGluYWw6ICAgICAgICggeCApIC0+IEBULnpwaW50ZWdlci5pc2EgeFxuICAjLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIEBkaW1lbnNpb246ICAgICAgKCB4ICkgLT4gQFQucGludGVnZXIuaXNhICB4XG5cbiAgIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBAaW5jcmVtZW50YWxfdGV4dDogKCB4ICkgLT5cbiAgICAjIyMgVEFJTlQgY29kZSBkdXBsaWNhdGlvbiAjIyNcbiAgICByZXR1cm4gZmFsc2UgdW5sZXNzIEBULm5vbmVtcHR5X3RleHQuaXNhIHhcbiAgICBAZGF0YS5jaHJzID0gY2hycyA9IEFycmF5LmZyb20geFxuICAgIHJldHVybiB0cnVlIGlmIGNocnMubGVuZ3RoIGlzIDFcbiAgICBmb3IgaWR4IGluIFsgMSAuLi4gY2hycy5sZW5ndGggXVxuICAgICAgdW5sZXNzICggcHJ2X2NociA9IGNocnNbIGlkeCAtIDEgXSApIDwgKCBjaHIgPSBjaHJzWyBpZHggXSApXG4gICAgICAgIEBkYXRhLmZhaWwgPSB7IHgsIGlkeCwgcHJ2X2NociwgY2hyLCB9XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgIHJldHVybiB0cnVlXG5cbiAgIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBAZGVjcmVtZW50YWxfdGV4dDogKCB4ICkgLT5cbiAgICAjIyMgVEFJTlQgY29kZSBkdXBsaWNhdGlvbiAjIyNcbiAgICByZXR1cm4gZmFsc2UgdW5sZXNzIEBULm5vbmVtcHR5X3RleHQuaXNhIHhcbiAgICBAZGF0YS5jaHJzID0gY2hycyA9IEFycmF5LmZyb20geFxuICAgIHJldHVybiB0cnVlIGlmIGNocnMubGVuZ3RoIGlzIDFcbiAgICBmb3IgaWR4IGluIFsgMSAuLi4gY2hycy5sZW5ndGggXVxuICAgICAgdW5sZXNzICggcHJ2X2NociA9IGNocnNbIGlkeCAtIDEgXSApID4gKCBjaHIgPSBjaHJzWyBpZHggXSApXG4gICAgICAgIEBkYXRhLmZhaWwgPSB7IHgsIGlkeCwgcHJ2X2NociwgY2hyLCB9XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgIHJldHVybiB0cnVlXG5cbiAgIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBAbm1hZ19iYXJlX3JldmVyc2VkOiAoIHggKSAtPlxuICAgIHJldHVybiBmYWxzZSB1bmxlc3MgQFQubm9uZW1wdHlfdGV4dCB4XG5cbiAgIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBAcG1hZ19iYXJlOiAoIHggKSAtPlxuXG4gICMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgQG1hZ25pZmllcnM6ICggeCApIC0+XG4gICAgcmV0dXJuIGZhbHNlIHVubGVzcyBAVC5ub25lbXB0eV90ZXh0LmlzYSB4XG4gICAgWyBubWFnX2JhcmVfcmV2ZXJzZWQsXG4gICAgICBwbWFnX2JhcmUsICBdID0geC5zcGxpdCAvXFxzKy92XG4gICAgcmV0dXJuIGZhbHNlIHVubGVzcyBAVC5ubWFnX2JhcmVfcmV2ZXJzZWQuaXNhIG5tYWdfYmFyZV9yZXZlcnNlZFxuICAgIHJldHVybiBmYWxzZSB1bmxlc3MgQFQucG1hZ19iYXJlLmlzYSAgICAgICAgICBwbWFnX2JhcmVcbiAgICBubWFnICAgICAgICAgICAgPSAnICcgKyBubWFnX2JhcmVfcmV2ZXJzZWQucmV2ZXJzZSgpXG4gICAgcG1hZyAgICAgICAgICAgID0gJyAnICsgcG1hZ19iYXJlXG5cblxuIz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5tb2R1bGUuZXhwb3J0cyA9IHsgdHlwZXM6IG5ldyBUeXBlc3BhY2UoKSwgaW50ZXJuYWxzOiB7IFR5cGUsIFR5cGVzcGFjZSwgQm91bmRlZF9saXN0LCB9LCB9XG4iXX0=
