(function() {
  'use strict';
  var Bounded_list, Hollerith_typespace, SFMODULES, Type, Typespace, _test_monotony, clean_assign, debug, hide, nameit, omit, regex, remap, rpr, set_getter, type_of;

  //===========================================================================================================
  SFMODULES = require('bricabrac-single-file-modules');

  ({type_of} = SFMODULES.unstable.require_type_of());

  ({
    show_no_colors: rpr
  } = SFMODULES.unstable.require_show());

  ({debug} = console);

  ({regex} = require('regex'));

  ({hide, set_getter} = SFMODULES.require_managed_property_tools());

  ({nameit} = SFMODULES.require_nameit());

  ({clean_assign} = SFMODULES.unstable.require_clean_assign());

  ({remap, omit} = SFMODULES.unstable.require_remap());

  Bounded_list = (function() {
    //===========================================================================================================
    /* NOTE Future Single-File Module */
    class Bounded_list {
      //---------------------------------------------------------------------------------------------------------
      constructor(max_size = 3) {
        this.max_size = max_size;
        this.data = [];
        return void 0;
      }

      //---------------------------------------------------------------------------------------------------------
      create(...P) {
        this.data.push(clean_assign({}, ...P));
        if (this.size > this.max_size) {
          this.data.shift();
        }
        return this.current;
      }

      //---------------------------------------------------------------------------------------------------------
      assign(...P) {
        return clean_assign(this.current, ...P);
      }

      at(idx) {
        return this.data.at(idx);
      }

    };

    //---------------------------------------------------------------------------------------------------------
    set_getter(Bounded_list.prototype, 'size', function() {
      return this.data.length;
    });

    set_getter(Bounded_list.prototype, 'is_empty', function() {
      return this.data.length === 0;
    });

    set_getter(Bounded_list.prototype, 'current', function() {
      if (this.is_empty) {
        return this.create();
      } else {
        return this.at(-1);
      }
    });

    return Bounded_list;

  }).call(this);

  //===========================================================================================================
  /* NOTE Future Single-File Module */
  Type = class Type {
    //---------------------------------------------------------------------------------------------------------
    constructor(typespace, name, isa) {
      var assign, fail;
      hide(this, 'name', name);
      hide(this, 'T', typespace);
      hide(this, '_isa', isa);
      this.data = {}; // new Bounded_list()
      // create          = (           P... ) => @data.create P...
      assign = (...P) => {
        return clean_assign(this.data, ...P);
      };
      fail = (message, ...P) => {
        clean_assign(this.data, {message}, ...P);
        return false;
      };
      // absorb          = ( type,     x    ) => R = type.isa x; @data.assign type.data.current; R
      hide(this, '_ctx', {
        T: typespace,
        me: this,
        assign,
        fail // create, absorb, }
      });
      set_getter(this._ctx, 'data', () => {
        return this.data; // .current
      });
      return void 0;
    }

    //---------------------------------------------------------------------------------------------------------
    isa(x) {
      var R;
      // try
      //   ( new Test guytest_cfg ).test { types: @hollerith.types, }
      // finally
      //   debug 'Ωhllt___1', "error"
      this.data = {};
      R = this._isa.call(this._ctx, x);
      return R;
    }

    //---------------------------------------------------------------------------------------------------------
    isame(ctx, mapping, x) {
      var R, arity, tmp_ctx;
      // try
      //   ( new Test guytest_cfg ).test { types: @hollerith.types, }
      // finally
      //   debug 'Ωhllt___2', "error"
      switch (arity = arguments.length) {
        case 2:
          R = this._isa.call(ctx, x);
          break;
        case 3:
          tmp_ctx = Object.assign({}, ctx);
          tmp_ctx.data = Object.assign({}, ctx.data);
          R = this._isa.call(tmp_ctx, x);
          remap(ctx.data, mapping);
          break;
        default:
          throw new Error(`Ωbsk___6 expected 2 or 3 arguments, got ${arity}`);
      }
      return R;
    }

  };

  // isok: ( x ) -> { data: @data.create(), ok: ( @_isa.call @_ctx, x ), }

    //===========================================================================================================
  Typespace = class Typespace {
    //---------------------------------------------------------------------------------------------------------
    constructor() {
      var Typeclass, clasz, i, isa, len, name, ref;
      clasz = this.constructor;
      ref = Object.getOwnPropertyNames(clasz);
      for (i = 0, len = ref.length; i < len; i++) {
        name = ref[i];
        Typeclass = class Typeclass extends Type {};
        nameit(name, Typeclass);
        this[name] = new Typeclass(this, name, isa = clasz[name]);
      }
      return void 0;
    }

  };

  //###########################################################################################################
  // HOLLERITH TYPESPACE
  //===========================================================================================================
  Hollerith_typespace = class Hollerith_typespace extends Typespace {
    //=========================================================================================================
    static text(x) {
      return (type_of(x)) === 'text';
    }

    static nonempty_text(x) {
      return (this.T.text.isa(x)) && x.length > 0;
    }

    static float(x) {
      return Number.isFinite(x);
    }

    static integer(x) {
      return Number.isSafeInteger(x);
    }

    static pinteger(x) {
      return (this.T.integer.isa(x)) && x > 0;
    }

    static zpinteger(x) {
      return (this.T.integer.isa(x)) && x >= 0;
    }

    static cardinal(x) {
      return this.T.zpinteger.isa(x);
    }

    //---------------------------------------------------------------------------------------------------------
    static dimension(x) {
      return this.T.pinteger.isa(x);
    }

    //---------------------------------------------------------------------------------------------------------
    static incremental_text(x) {
      if (!this.T.text.isa(x)) {
        return false;
      }
      // @assign { iam: 'incremental_text', }
      this.assign({
        chrs: Array.from(x)
      });
      debug('Ωbsk___3', this.data);
      return _test_monotony.call(this, x, '<');
    }

    //---------------------------------------------------------------------------------------------------------
    static decremental_text(x) {
      if (!this.T.text.isa(x)) {
        return false;
      }
      this.assign({
        chrs: Array.from(x)
      });
      return _test_monotony.call(this, x, '>');
    }

    //---------------------------------------------------------------------------------------------------------
    static nmag_bare_reversed(x) {
      return this.T.incremental_text.isame(this, x);
    }

    static pmag_bare(x) {
      return this.T.incremental_text.isame(this, x);
    }

    //---------------------------------------------------------------------------------------------------------
    static magnifiers(x) {
      var nmag, nmag_bare_reversed, pmag, pmag_bare;
      if (!this.T.nonempty_text.isa(x)) {
        return this.fail("expected a magnifier, got an empty text");
      }
      [nmag_bare_reversed, pmag_bare] = x.split(/\s+/v);
      if (!this.T.nmag_bare_reversed.isame(this, {
        chrs: 'nmag_chrs'
      }, nmag_bare_reversed)) {
        //.......................................................................................................
        // @assign { iam: 'magnifiers', }; debug 'Ωbsk___4', @data
        return this.fail("???");
      }
      if (!this.T.pmag_bare.isame(this, {
        chrs: 'pmag_chrs'
      }, pmag_bare)) {
        return this.fail("???");
      }
      //.......................................................................................................
      nmag = ' ' + nmag_bare_reversed.reverse();
      pmag = ' ' + pmag_bare;
      this.assign({nmag, pmag});
      return true;
    }

  };

  //===========================================================================================================
  _test_monotony = function(x, cmp) {
    var R, chr, chrs, i, idx, prv_chr, ref;
    ({chrs} = this.data); // = @create data
    if (chrs.length === 0) {
      return this.fail("empty is not monotonic");
    }
    if (chrs.length === 1) {
      return true;
    }
    for (idx = i = 1, ref = chrs.length; (1 <= ref ? i < ref : i > ref); idx = 1 <= ref ? ++i : --i) {
      prv_chr = chrs[idx - 1];
      chr = chrs[idx];
      R = (function() {
        switch (cmp) {
          case '>':
            return prv_chr > chr;
          case '<':
            return prv_chr < chr;
          default:
            throw new Error(`Ωbsk___6 (internal) expected '>' or '<', got ${rpr(cmp)}`);
        }
      })();
      if (R) {
        continue;
      }
      this.assign({
        fail: {x, idx, prv_chr, chr}
      });
      return false;
    }
    return true;
  };

  //===========================================================================================================
  Object.assign(module.exports, {
    types: new Hollerith_typespace(),
    internals: {Type, Typespace, Hollerith_typespace, Bounded_list}
  });

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL3R5cGVzLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQTtFQUFBO0FBQUEsTUFBQSxZQUFBLEVBQUEsbUJBQUEsRUFBQSxTQUFBLEVBQUEsSUFBQSxFQUFBLFNBQUEsRUFBQSxjQUFBLEVBQUEsWUFBQSxFQUFBLEtBQUEsRUFBQSxJQUFBLEVBQUEsTUFBQSxFQUFBLElBQUEsRUFBQSxLQUFBLEVBQUEsS0FBQSxFQUFBLEdBQUEsRUFBQSxVQUFBLEVBQUEsT0FBQTs7O0VBR0EsU0FBQSxHQUE0QixPQUFBLENBQVEsK0JBQVI7O0VBQzVCLENBQUEsQ0FBRSxPQUFGLENBQUEsR0FBNEIsU0FBUyxDQUFDLFFBQVEsQ0FBQyxlQUFuQixDQUFBLENBQTVCOztFQUNBLENBQUE7SUFBRSxjQUFBLEVBQWdCO0VBQWxCLENBQUEsR0FBNEIsU0FBUyxDQUFDLFFBQVEsQ0FBQyxZQUFuQixDQUFBLENBQTVCOztFQUNBLENBQUEsQ0FBRSxLQUFGLENBQUEsR0FBNEIsT0FBNUI7O0VBQ0EsQ0FBQSxDQUFFLEtBQUYsQ0FBQSxHQUE0QixPQUFBLENBQVEsT0FBUixDQUE1Qjs7RUFDQSxDQUFBLENBQUUsSUFBRixFQUNFLFVBREYsQ0FBQSxHQUM0QixTQUFTLENBQUMsOEJBQVYsQ0FBQSxDQUQ1Qjs7RUFFQSxDQUFBLENBQUUsTUFBRixDQUFBLEdBQTRCLFNBQVMsQ0FBQyxjQUFWLENBQUEsQ0FBNUI7O0VBQ0EsQ0FBQSxDQUFFLFlBQUYsQ0FBQSxHQUE0QixTQUFTLENBQUMsUUFBUSxDQUFDLG9CQUFuQixDQUFBLENBQTVCOztFQUNBLENBQUEsQ0FBRSxLQUFGLEVBQ0UsSUFERixDQUFBLEdBQzRCLFNBQVMsQ0FBQyxRQUFRLENBQUMsYUFBbkIsQ0FBQSxDQUQ1Qjs7RUFNTTs7O0lBQU4sTUFBQSxhQUFBLENBQUE7O01BR0UsV0FBYSxDQUFFLFdBQVcsQ0FBYixDQUFBO1FBQ1gsSUFBQyxDQUFBLFFB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O01BQ2QsQ0FBQTtBQUFVLGdCQUFPLEdBQVA7QUFBQSxlQUNILEdBREc7bUJBQ00sT0FBQSxHQUFVO0FBRGhCLGVBRUgsR0FGRzttQkFFTSxPQUFBLEdBQVU7QUFGaEI7WUFHSCxNQUFNLElBQUksS0FBSixDQUFVLENBQUEsNkNBQUEsQ0FBQSxDQUFnRCxHQUFBLENBQUksR0FBSixDQUFoRCxDQUFBLENBQVY7QUFISDs7TUFJVixJQUFZLENBQVo7QUFBQSxpQkFBQTs7TUFDQSxJQUFDLENBQUEsTUFBRCxDQUFRO1FBQUUsSUFBQSxFQUFNLENBQUUsQ0FBRixFQUFLLEdBQUwsRUFBVSxPQUFWLEVBQW1CLEdBQW5CO01BQVIsQ0FBUjtBQUNBLGFBQU87SUFUVDtBQVVBLFdBQU87RUFkUSxFQTFKakI7OztFQTJLQSxNQUFNLENBQUMsTUFBUCxDQUFjLE1BQU0sQ0FBQyxPQUFyQixFQUNFO0lBQUEsS0FBQSxFQUFZLElBQUksbUJBQUosQ0FBQSxDQUFaO0lBQ0EsU0FBQSxFQUFXLENBQ1QsSUFEUyxFQUVULFNBRlMsRUFHVCxtQkFIUyxFQUlULFlBSlM7RUFEWCxDQURGO0FBM0tBIiwic291cmNlc0NvbnRlbnQiOlsiXG4ndXNlIHN0cmljdCdcblxuIz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5TRk1PRFVMRVMgICAgICAgICAgICAgICAgID0gcmVxdWlyZSAnYnJpY2FicmFjLXNpbmdsZS1maWxlLW1vZHVsZXMnXG57IHR5cGVfb2YsICAgICAgICAgICAgICB9ID0gU0ZNT0RVTEVTLnVuc3RhYmxlLnJlcXVpcmVfdHlwZV9vZigpXG57IHNob3dfbm9fY29sb3JzOiBycHIsICB9ID0gU0ZNT0RVTEVTLnVuc3RhYmxlLnJlcXVpcmVfc2hvdygpXG57IGRlYnVnLCAgICAgICAgICAgICAgICB9ID0gY29uc29sZVxueyByZWdleCwgICAgICAgICAgICAgICAgfSA9IHJlcXVpcmUgJ3JlZ2V4J1xueyBoaWRlLFxuICBzZXRfZ2V0dGVyLCAgICAgICAgICAgfSA9IFNGTU9EVUxFUy5yZXF1aXJlX21hbmFnZWRfcHJvcGVydHlfdG9vbHMoKVxueyBuYW1laXQsICAgICAgICAgICAgICAgfSA9IFNGTU9EVUxFUy5yZXF1aXJlX25hbWVpdCgpXG57IGNsZWFuX2Fzc2lnbiwgICAgICAgICB9ID0gU0ZNT0RVTEVTLnVuc3RhYmxlLnJlcXVpcmVfY2xlYW5fYXNzaWduKClcbnsgcmVtYXAsXG4gIG9taXQsICAgICAgICAgICAgICAgICB9ID0gU0ZNT0RVTEVTLnVuc3RhYmxlLnJlcXVpcmVfcmVtYXAoKVxuXG5cbiM9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuIyMjIE5PVEUgRnV0dXJlIFNpbmdsZS1GaWxlIE1vZHVsZSAjIyNcbmNsYXNzIEJvdW5kZWRfbGlzdFxuXG4gICMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgY29uc3RydWN0b3I6ICggbWF4X3NpemUgPSAzICkgLT5cbiAgICBAbWF4X3NpemUgICA9IG1heF9zaXplXG4gICAgQGRhdGEgICAgICAgPSBbXVxuICAgIHJldHVybiB1bmRlZmluZWRcblxuICAjLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIGNyZWF0ZTogKCBQLi4uICkgLT5cbiAgICBAZGF0YS5wdXNoIGNsZWFuX2Fzc2lnbiB7fSwgUC4uLlxuICAgIEBkYXRhLnNoaWZ0KCkgaWYgQHNpemUgPiBAbWF4X3NpemVcbiAgICByZXR1cm4gQGN1cnJlbnRcblxuICAjLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIGFzc2lnbjogKCBQLi4uICApIC0+IGNsZWFuX2Fzc2lnbiBAY3VycmVudCwgUC4uLlxuICBhdDogICAgICggaWR4ICAgKSAtPiBAZGF0YS5hdCBpZHhcblxuICAjLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIHNldF9nZXR0ZXIgQDo6LCAnc2l6ZScsICAgICAtPiBAZGF0YS5sZW5ndGhcbiAgc2V0X2dldHRlciBAOjosICdpc19lbXB0eScsIC0+IEBkYXRhLmxlbmd0aCBpcyAwXG4gIHNldF9nZXR0ZXIgQDo6LCAnY3VycmVudCcsICAtPiBpZiBAaXNfZW1wdHkgdGhlbiBAY3JlYXRlKCkgZWxzZSBAYXQgLTFcblxuXG4jPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiMjIyBOT1RFIEZ1dHVyZSBTaW5nbGUtRmlsZSBNb2R1bGUgIyMjXG5jbGFzcyBUeXBlXG5cbiAgIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBjb25zdHJ1Y3RvcjogKCB0eXBlc3BhY2UsIG5hbWUsIGlzYSApIC0+XG4gICAgaGlkZSBALCAnbmFtZScsICAgbmFtZVxuICAgIGhpZGUgQCwgJ1QnLCAgICAgIHR5cGVzcGFjZVxuICAgIGhpZGUgQCwgJ19pc2EnLCAgIGlzYVxuICAgIEBkYXRhICAgICAgICAgICA9IHt9ICMgbmV3IEJvdW5kZWRfbGlzdCgpXG4gICAgIyBjcmVhdGUgICAgICAgICAgPSAoICAgICAgICAgICBQLi4uICkgPT4gQGRhdGEuY3JlYXRlIFAuLi5cbiAgICBhc3NpZ24gICAgICAgICAgPSAoICAgICAgICAgICBQLi4uICkgPT4gY2xlYW5fYXNzaWduIEBkYXRhLCBQLi4uXG4gICAgZmFpbCAgICAgICAgICAgID0gKCBtZXNzYWdlLCAgUC4uLiApID0+IGNsZWFuX2Fzc2lnbiBAZGF0YSwgeyBtZXNzYWdlLCB9LCBQLi4uOyBmYWxzZVxuICAgICMgYWJzb3JiICAgICAgICAgID0gKCB0eXBlLCAgICAgeCAgICApID0+IFIgPSB0eXBlLmlzYSB4OyBAZGF0YS5hc3NpZ24gdHlwZS5kYXRhLmN1cnJlbnQ7IFJcbiAgICBoaWRlIEAsICdfY3R4JywgeyBUOiB0eXBlc3BhY2UsIG1lOiBALCBhc3NpZ24sIGZhaWwsIH0gIyBjcmVhdGUsIGFic29yYiwgfVxuICAgIHNldF9nZXR0ZXIgQF9jdHgsICdkYXRhJywgPT4gQGRhdGEgIyAuY3VycmVudFxuICAgIHJldHVybiB1bmRlZmluZWRcblxuICAjLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIGlzYTogICggeCApIC0+XG4gICAgIyB0cnlcbiAgICAjICAgKCBuZXcgVGVzdCBndXl0ZXN0X2NmZyApLnRlc3QgeyB0eXBlczogQGhvbGxlcml0aC50eXBlcywgfVxuICAgICMgZmluYWxseVxuICAgICMgICBkZWJ1ZyAnzqlobGx0X19fMScsIFwiZXJyb3JcIlxuICAgIEBkYXRhID0ge307IFIgPSBAX2lzYS5jYWxsIEBfY3R4LCB4XG4gICAgcmV0dXJuIFJcblxuICAjLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIGlzYW1lOiAgKCBjdHgsIG1hcHBpbmcsIHggKSAtPlxuICAgICMgdHJ5XG4gICAgIyAgICggbmV3IFRlc3QgZ3V5dGVzdF9jZmcgKS50ZXN0IHsgdHlwZXM6IEBob2xsZXJpdGgudHlwZXMsIH1cbiAgICAjIGZpbmFsbHlcbiAgICAjICAgZGVidWcgJ86paGxsdF9fXzInLCBcImVycm9yXCJcbiAgICBzd2l0Y2ggYXJpdHkgPSBhcmd1bWVudHMubGVuZ3RoXG4gICAgICB3aGVuIDJcbiAgICAgICAgUiA9IEBfaXNhLmNhbGwgY3R4LCB4XG4gICAgICB3aGVuIDNcbiAgICAgICAgdG1wX2N0eCAgICAgICA9IE9iamVjdC5hc3NpZ24ge30sIGN0eFxuICAgICAgICB0bXBfY3R4LmRhdGEgID0gT2JqZWN0LmFzc2lnbiB7fSwgY3R4LmRhdGFcbiAgICAgICAgUiAgICAgICAgICAgICA9IEBfaXNhLmNhbGwgdG1wX2N0eCwgeFxuICAgICAgICByZW1hcCBjdHguZGF0YSwgbWFwcGluZ1xuICAgICAgZWxzZVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IgXCLOqWJza19fXzYgZXhwZWN0ZWQgMiBvciAzIGFyZ3VtZW50cywgZ290ICN7YXJpdHl9XCJcbiAgICByZXR1cm4gUlxuXG4gICMgaXNvazogKCB4ICkgLT4geyBkYXRhOiBAZGF0YS5jcmVhdGUoKSwgb2s6ICggQF9pc2EuY2FsbCBAX2N0eCwgeCApLCB9XG5cblxuIz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5jbGFzcyBUeXBlc3BhY2VcblxuICAjLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIGNvbnN0cnVjdG9yOiAtPlxuICAgIGNsYXN6ID0gQGNvbnN0cnVjdG9yXG4gICAgZm9yIG5hbWUgaW4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMgY2xhc3pcbiAgICAgIGNsYXNzIFR5cGVjbGFzcyBleHRlbmRzIFR5cGVcbiAgICAgIG5hbWVpdCBuYW1lLCBUeXBlY2xhc3NcbiAgICAgIEBbIG5hbWUgXSA9IG5ldyBUeXBlY2xhc3MgQCwgbmFtZSwgaXNhID0gY2xhc3pbIG5hbWUgXVxuICAgIHJldHVybiB1bmRlZmluZWRcblxuXG4jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcbiMgSE9MTEVSSVRIIFRZUEVTUEFDRVxuIz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5jbGFzcyBIb2xsZXJpdGhfdHlwZXNwYWNlIGV4dGVuZHMgVHlwZXNwYWNlXG5cbiAgIz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICBAdGV4dDogICAgICAgICAgICggeCApIC0+ICggdHlwZV9vZiB4ICkgaXMgJ3RleHQnXG4gIEBub25lbXB0eV90ZXh0OiAgKCB4ICkgLT4gKCBAVC50ZXh0LmlzYSB4ICkgYW5kIHgubGVuZ3RoID4gMFxuICBAZmxvYXQ6ICAgICAgICAgICggeCApIC0+IE51bWJlci5pc0Zpbml0ZSB4XG4gIEBpbnRlZ2VyOiAgICAgICAgKCB4ICkgLT4gTnVtYmVyLmlzU2FmZUludGVnZXIgeFxuICBAcGludGVnZXI6ICAgICAgICggeCApIC0+ICggQFQuaW50ZWdlci5pc2EgeCApIGFuZCB4ID4gMFxuICBAenBpbnRlZ2VyOiAgICAgICggeCApIC0+ICggQFQuaW50ZWdlci5pc2EgeCApIGFuZCB4ID49IDBcbiAgQGNhcmRpbmFsOiAgICAgICAoIHggKSAtPiBAVC56cGludGVnZXIuaXNhIHhcbiAgIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBAZGltZW5zaW9uOiAgICAgICggeCApIC0+IEBULnBpbnRlZ2VyLmlzYSAgeFxuXG4gICMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgQGluY3JlbWVudGFsX3RleHQ6ICggeCApIC0+XG4gICAgcmV0dXJuIGZhbHNlIHVubGVzcyBAVC50ZXh0LmlzYSB4XG4gICAgIyBAYXNzaWduIHsgaWFtOiAnaW5jcmVtZW50YWxfdGV4dCcsIH1cbiAgICBAYXNzaWduIHsgY2hyczogKCBBcnJheS5mcm9tIHggKSwgfVxuICAgIGRlYnVnICfOqWJza19fXzMnLCBAZGF0YVxuICAgIHJldHVybiBfdGVzdF9tb25vdG9ueS5jYWxsIEAsIHgsICc8J1xuXG4gICMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgQGRlY3JlbWVudGFsX3RleHQ6ICggeCApIC0+XG4gICAgcmV0dXJuIGZhbHNlIHVubGVzcyBAVC50ZXh0LmlzYSB4XG4gICAgQGFzc2lnbiB7IGNocnM6ICggQXJyYXkuZnJvbSB4ICksIH1cbiAgICByZXR1cm4gX3Rlc3RfbW9ub3RvbnkuY2FsbCBALCB4LCAnPidcblxuICAjLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIEBubWFnX2JhcmVfcmV2ZXJzZWQ6ICAoIHggKSAtPiBAVC5pbmNyZW1lbnRhbF90ZXh0LmlzYW1lIEAsIHhcbiAgQHBtYWdfYmFyZTogICAgICAgICAgICggeCApIC0+IEBULmluY3JlbWVudGFsX3RleHQuaXNhbWUgQCwgeFxuXG4gICMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgQG1hZ25pZmllcnM6ICggeCApIC0+XG4gICAgcmV0dXJuICggQGZhaWwgXCJleHBlY3RlZCBhIG1hZ25pZmllciwgZ290IGFuIGVtcHR5IHRleHRcIiApIHVubGVzcyBAVC5ub25lbXB0eV90ZXh0LmlzYSB4XG4gICAgWyBubWFnX2JhcmVfcmV2ZXJzZWQsXG4gICAgICBwbWFnX2JhcmUsICBdID0geC5zcGxpdCAvXFxzKy92XG4gICAgIy4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi5cbiAgICAjIEBhc3NpZ24geyBpYW06ICdtYWduaWZpZXJzJywgfTsgZGVidWcgJ86pYnNrX19fNCcsIEBkYXRhXG4gICAgcmV0dXJuICggQGZhaWwgXCI/Pz9cIiApIHVubGVzcyAgQFQubm1hZ19iYXJlX3JldmVyc2VkLmlzYW1lICBALCB7IGNocnM6ICdubWFnX2NocnMnLCB9LCBubWFnX2JhcmVfcmV2ZXJzZWRcbiAgICByZXR1cm4gKCBAZmFpbCBcIj8/P1wiICkgdW5sZXNzICBAVC5wbWFnX2JhcmUuaXNhbWUgICAgICAgICAgIEAsIHsgY2hyczogJ3BtYWdfY2hycycsIH0sIHBtYWdfYmFyZVxuICAgICMuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uXG4gICAgbm1hZyAgICAgICAgICAgID0gJyAnICsgbm1hZ19iYXJlX3JldmVyc2VkLnJldmVyc2UoKVxuICAgIHBtYWcgICAgICAgICAgICA9ICcgJyArIHBtYWdfYmFyZVxuICAgIEBhc3NpZ24geyBubWFnLCBwbWFnLCB9XG4gICAgcmV0dXJuIHRydWVcblxuXG4jPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbl90ZXN0X21vbm90b255ID0gKCB4LCBjbXAgKSAtPlxuICB7IGNocnMsIH0gPSBAZGF0YSAjID0gQGNyZWF0ZSBkYXRhXG4gIHJldHVybiAoIEBmYWlsIFwiZW1wdHkgaXMgbm90IG1vbm90b25pY1wiICkgaWYgY2hycy5sZW5ndGggaXMgMFxuICByZXR1cm4gdHJ1ZSAgIGlmIGNocnMubGVuZ3RoIGlzIDFcbiAgZm9yIGlkeCBpbiBbIDEgLi4uIGNocnMubGVuZ3RoIF1cbiAgICBwcnZfY2hyID0gY2hyc1sgaWR4IC0gMSBdXG4gICAgY2hyICAgICA9IGNocnNbIGlkeCAgICAgXVxuICAgIFIgICAgICAgPSBzd2l0Y2ggY21wXG4gICAgICB3aGVuICc+JyB0aGVuIHBydl9jaHIgPiBjaHJcbiAgICAgIHdoZW4gJzwnIHRoZW4gcHJ2X2NociA8IGNoclxuICAgICAgZWxzZSB0aHJvdyBuZXcgRXJyb3IgXCLOqWJza19fXzYgKGludGVybmFsKSBleHBlY3RlZCAnPicgb3IgJzwnLCBnb3QgI3tycHIgY21wfVwiXG4gICAgY29udGludWUgaWYgUlxuICAgIEBhc3NpZ24geyBmYWlsOiB7IHgsIGlkeCwgcHJ2X2NociwgY2hyLCB9LCB9XG4gICAgcmV0dXJuIGZhbHNlXG4gIHJldHVybiB0cnVlXG5cbiM9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuT2JqZWN0LmFzc2lnbiBtb2R1bGUuZXhwb3J0cyxcbiAgdHlwZXM6ICAgICAgbmV3IEhvbGxlcml0aF90eXBlc3BhY2UoKVxuICBpbnRlcm5hbHM6IHtcbiAgICBUeXBlXG4gICAgVHlwZXNwYWNlXG4gICAgSG9sbGVyaXRoX3R5cGVzcGFjZVxuICAgIEJvdW5kZWRfbGlzdFxuICAgIH1cbiJdfQ==
