(function() {
  'use strict';
  var CFG, Hollerith_typespace, SFMODULES, Type, Typespace, _test_monotony, debug, freeze, internals, regex, rpr, type_of;

  //===========================================================================================================
  SFMODULES = require('../../bricabrac-single-file-modules');

  ({type_of} = SFMODULES.unstable.require_type_of());

  ({
    show_no_colors: rpr
  } = SFMODULES.unstable.require_show());

  ({debug} = console);

  ({regex} = require('regex'));

  ({freeze} = Object);

  ({Type, Typespace, CFG} = SFMODULES.unstable.require_nanotypes());

  //===========================================================================================================
  internals = Object.assign({Type, Typespace}, {
    //---------------------------------------------------------------------------------------------------------
    get_niners_re: function(niner) {
      return (regex('g'))` ^ ${niner}* (?= .+ $ ) `;
    }
  });

  Hollerith_typespace = (function() {
    //===========================================================================================================
    // HOLLERITH TYPESPACE
    //===========================================================================================================
    class Hollerith_typespace extends Typespace {
      //---------------------------------------------------------------------------------------------------------
      constructor(cfg) {
        var blank_esc, blank_splitter;
        super(cfg);
        this.blank.validate(this[CFG].blank);
        blank_esc = RegExp.escape(this[CFG].blank);
        blank_splitter = new RegExp(`(?:${blank_esc})+`, 'gv');
        this[CFG] = freeze({...this[CFG], blank_splitter});
        return void 0;
      }

      //=========================================================================================================
      static text(x) {
        return (type_of(x)) === 'text';
      }

      static nonempty_text(x) {
        return (this.T.text.isa(x)) && (x.length > 0);
      }

      static character(x) {
        return (this.T.text.isa(x)) && (/^.$/v.test(x));
      }

      static float(x) {
        return Number.isFinite(x);
      }

      static integer(x) {
        return Number.isSafeInteger(x);
      }

      static pinteger(x) {
        return (this.T.integer.isa(x)) && (x > 0);
      }

      static zpinteger(x) {
        return (this.T.integer.isa(x)) && (x >= 0);
      }

      static cardinal(x) {
        return this.T.zpinteger.isa(x);
      }

      //---------------------------------------------------------------------------------------------------------
      /* NOTE requiring `x` to be both a character and equal to `@[CFG].blank` means `@[CFG].blank` itself can be tested */
      static blank(x) {
        return (this.T.character.isa(x)) && (x === this[CFG].blank);
      }

      // @blank_setting:   ( x ) -> ( @T.character.isa x )
      // @blank_usage:     ( x ) -> ( x is @[CFG].blank )
      static dimension(x) {
        return this.T.pinteger.isa(x);
      }

      static base(x) {
        return (this.T.pinteger.isa(x)) && (x > 1);
      }

      //---------------------------------------------------------------------------------------------------------
      static incremental_text(x) {
        if (!this.T.text.isa(x)) {
          return false;
        }
        this.assign({
          chrs: freeze(Array.from(x))
        });
        return _test_monotony.call(this, x, '<');
      }

      //---------------------------------------------------------------------------------------------------------
      static decremental_text(x) {
        if (!this.T.text.isa(x)) {
          return false;
        }
        this.assign({
          chrs: freeze(Array.from(x))
        });
        return _test_monotony.call(this, x, '>');
      }

      //---------------------------------------------------------------------------------------------------------
      static nmag_bare_reversed(x) {
        return this.T.incremental_text.isa(x, this.data);
      }

      static pmag_bare(x) {
        return this.T.incremental_text.isa(x, this.data);
      }

      //---------------------------------------------------------------------------------------------------------
      static magnifiers(x) {
        var nmag, nmag_bare_reversed, nmag_chrs, parts, pmag, pmag_bare, pmag_chrs;
        if (!this.T.nonempty_text.isa(x)) {
          return this.fail("expected a magnifier, got an empty text");
        }
        parts = x.split(this[CFG].blank_splitter);
        if (parts.length !== 2) {
          return this.fail(`Ωbsk___1 magnifiers must have exactly 1 blank, got ${parts.length - 1} blanks`);
        }
        [nmag_bare_reversed, pmag_bare] = parts;
        if (!this.T.nmag_bare_reversed.isa(nmag_bare_reversed, this.data, {
          chrs: 'nmag_chrs_reversed'
        })) {
          //.......................................................................................................
          // @assign { iam: 'magnifiers', }; debug 'Ωbsk___2', @data
          return this.fail("Ωbsk___3 ???");
        }
        if (!this.T.pmag_bare.isa(pmag_bare, this.data, {
          chrs: 'pmag_chrs'
        })) {
          return this.fail("Ωbsk___4 ???");
        }
        if (!this.T.incremental_text.isa(nmag_bare_reversed + pmag_bare)) {
          return this.fail("Ωbsk___5 ???");
        }
        if (nmag_bare_reversed.length !== pmag_bare.length) {
          return this.fail("Ωbsk___6 ???");
        }
        //.......................................................................................................
        nmag = this[CFG].blank + [...this.data.nmag_chrs_reversed].reverse().join('');
        pmag = this[CFG].blank + pmag_bare;
        nmag_chrs = freeze(Array.from(nmag));
        pmag_chrs = freeze(Array.from(pmag));
        this.assign({nmag, pmag, nmag_chrs, pmag_chrs});
        return true;
      }

      //---------------------------------------------------------------------------------------------------------
      static alphabet(x) {
        var base, leading_niners_re, niner;
        if (!this.T.incremental_text.isa(x, this.data, {
          chrs: 'alphabet_chrs'
        })) {
          return false;
        }
        base = this.data.alphabet_chrs.length;
        if (!this.T.base.isa(base)) {
          return this.fail("an alphabet must have 2 chrs or more");
        }
        niner = this.data.alphabet_chrs.at(-1);
        leading_niners_re = internals.get_niners_re(niner);
        this.assign({base, niner, leading_niners_re});
        return true;
      }

      //---------------------------------------------------------------------------------------------------------
      static uniliterals(x) {
        var nun_chrs, nuns, parts, puns, zero, zpun_chrs, zpuns;
        if (!this.T.nonempty_text.isa(x)) {
          return false;
        }
        if (this.T.character.isa(x)) {
          nuns = '';
          zpuns = x;
          nun_chrs = freeze([]);
          zpun_chrs = freeze([x]);
          this.assign({nuns, zpuns, nun_chrs, zpun_chrs});
          return true;
        }
        parts = x.split(this[CFG].blank_splitter);
        if (parts.length !== 3) {
          return this.fail(`Ωbsk___7 uniliterals that are not a single character must have exactly 2 blank2, got ${parts.length - 1} blanks`);
        }
        [nuns, zero, puns] = parts;
        zpuns = zero + puns;
        this.assign({nuns, zpuns});
        if (!this.T.incremental_text.isa(nuns, this.data, {
          chrs: 'nun_chrs'
        })) {
          return false;
        }
        if (!this.T.incremental_text.isa(zpuns, this.data, {
          chrs: 'zpun_chrs'
        })) {
          return false;
        }
        return true;
      }

      //---------------------------------------------------------------------------------------------------------
      static TMP_alphabet(x) {
        if (!this.T.nonempty_text.isa(x, this.data)) {
          return false;
        }
        if (!this.T.incremental_text.isa(x, this.data)) {
          return false;
        }
        return true;
      }

    };

    //=========================================================================================================
    Hollerith_typespace[CFG] = {
      blank: ' '
    };

    return Hollerith_typespace;

  }).call(this);

  //===========================================================================================================
  _test_monotony = function(x, cmp) {
    var R, chr, chrs, i, idx, prv_chr, ref;
    ({chrs} = this.data); // = @create data
    if (chrs.length === 0) {
      return this.fail("empty is not monotonic");
    }
    if (chrs.length === 1) {
      return true;
    }
    for (idx = i = 1, ref = chrs.length; (1 <= ref ? i < ref : i > ref); idx = 1 <= ref ? ++i : --i) {
      prv_chr = chrs[idx - 1];
      chr = chrs[idx];
      R = (function() {
        switch (cmp) {
          case '>':
            return prv_chr > chr;
          case '<':
            return prv_chr < chr;
          default:
            throw new Error(`Ωbsk___8 (internal) expected '>' or '<', got ${rpr(cmp)}`);
        }
      })();
      if (R) {
        continue;
      }
      this.assign({
        fail: {x, idx, prv_chr, chr}
      });
      return false;
    }
    return true;
  };

  //===========================================================================================================
  Object.assign(module.exports, {
    Hollerith_typespace,
    CFG: CFG,
    internals
  });

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL3R5cGVzLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQTtFQUFBO0FBQUEsTUFBQSxHQUFBLEVBQUEsbUJBQUEsRUFBQSxTQUFBLEVBQUEsSUFBQSxFQUFBLFNBQUEsRUFBQSxjQUFBLEVBQUEsS0FBQSxFQUFBLE1BQUEsRUFBQSxTQUFBLEVBQUEsS0FBQSxFQUFBLEdBQUEsRUFBQSxPQUFBOzs7RUFHQSxTQUFBLEdBQTRCLE9BQUEsQ0FBUSxxQ0FBUjs7RUFDNUIsQ0FBQSxDQUFFLE9BQUYsQ0FBQSxHQUE0QixTQUFTLENBQUMsUUFBUSxDQUFDLGVBQW5CLENBQUEsQ0FBNUI7O0VBQ0EsQ0FBQTtJQUFFLGNBQUEsRUFBZ0I7RUFBbEIsQ0FBQSxHQUE0QixTQUFTLENBQUMsUUFBUSxDQUFDLFlBQW5CLENBQUEsQ0FBNUI7O0VBQ0EsQ0FBQSxDQUFFLEtBQUYsQ0FBQSxHQUE0QixPQUE1Qjs7RUFDQSxDQUFBLENBQUUsS0FBRixDQUFBLEdBQTRCLE9BQUEsQ0FBUSxPQUFSLENBQTVCOztFQUNBLENBQUEsQ0FBRSxNQUFGLENBQUEsR0FBNEIsTUFBNUI7O0VBQ0EsQ0FBQSxDQUFFLElBQUYsRUFDRSxTQURGLEVBRUUsR0FGRixDQUFBLEdBRTRCLFNBQVMsQ0FBQyxRQUFRLENBQUMsaUJBQW5CLENBQUEsQ0FGNUIsRUFUQTs7O0VBZUEsU0FBQSxHQUFZLE1BQU0sQ0FBQyxNQUFQLENBQWMsQ0FBRSxJQUFGLEVBQVEsU0FBUixDQUFkLEVBR1YsQ0FBQTs7SUFBQSxhQUFBLEVBQWUsUUFBQSxDQUFFLEtBQUYsQ0FBQTthQUFhLENBQUUsS0FBQSxDQUFNLEdBQU4sQ0FBRixDQUFhLENBQUEsR0FBQSxDQUFBLENBQVEsS0FBUixDQUFBLGFBQUE7SUFBMUI7RUFBZixDQUhVOztFQVVOOzs7O0lBQU4sTUFBQSxvQkFBQSxRQUFrQyxVQUFsQyxDQUFBOztNQUdFLFdBQWEsQ0FBRSxHQUFGLENBQUE7QUFDZixZQUFBLFNBQUEsRUFBQTthQUFJLENBQU0sR0FBTjtRQUNBLElBQUMsQ0FBQSxLQUFLLENBQUMsUUFBUCxDQUFnQixJQUFDLENBQUMsR0FBRCxDQUFLLENBQUMsS0FBdkI7UUFDQSxTQUFBLEdBQWtCLE1BQU0sQ0FBQyxNQUFQLENBQWMsSUFBQyxDQUFDLEdBQUQsQ0FBSyxDQUFDLEtBQXJCO1FBQ2xCLGNBQUEsR0FBa0IsSUFBSSxNQUFKLENBQVcsQ0FBQSxHQUFBLENBQUEsQ0FBTSxTQUFOLENBQUEsRUFBQSxDQUFYLEVBQWdDLElBQWhDO1FBQ2xCLElBQUMsQ0FBQyxHQUFELENBQUQsR0FBa0IsTUFBQSxDQUFPLENBQUUsR0FBQSxJQUFDLENBQUMsR0FBRCxDQUFILEVBQWEsY0FBYixDQUFQO0FBQ2xCLGVBQU87TUFOSSxDQURmOzs7TUFlb0IsT0FBakIsSUFBaUIsQ0FBRSxDQUFGLENBQUE7ZUFBUyxDQUFFLE9BQUEsQ0FBUSxDQUFSLENBQUYsQ0FBQSxLQUFpQjtNQUExQjs7TUFDQSxPQUFqQixhQUFpQixDQUFFLENBQUYsQ0FBQTtlQUFTLENBQUUsSUFBQyxDQUFBLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBUixDQUFZLENBQVosQ0FBRixDQUFBLElBQXNCLENBQUUsQ0FBQyxDQUFDLE1BQUYsR0FBVyxDQUFiO01BQS9COztNQUNBLE9BQWpCLFNBQWlCLENBQUUsQ0FBRixDQUFBO2VBQVMsQ0FBRSxJQUFDLENBQUEsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFSLENBQVksQ0FBWixDQUFGLENBQUEsSUFBc0IsQ0FBRSxNQUFNLENBQUMsSUFBUCxDQUFZLENBQVosQ0FBRjtNQUEvQjs7TUFDQSxPQUFqQixLQUFpQixDQUFFLENBQUYsQ0FBQTtlQUFTLE1BQU0sQ0FBQyxRQUFQLENBQWdCLENBQWhCO01BQVQ7O01BQ0EsT0FBakIsT0FBaUIsQ0FBRSxDQUFGLENBQUE7ZUFBUyxNQUFNLENBQUMsYUFBUCxDQUFxQixDQUFyQjtNQUFUOztNQUNBLE9BQWpCLFFBQWlCLENBQUUsQ0FBRixDQUFBO2VBQVMsQ0FBRSxJQUFDLENBQUEsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxHQUFYLENBQWUsQ0FBZixDQUFGLENBQUEsSUFBeUIsQ0FBRSxDQUFBLEdBQUssQ0FBUDtNQUFsQzs7TUFDQSxPQUFqQixTQUFpQixDQUFFLENBQUYsQ0FBQTtlQUFTLENBQUUsSUFBQyxDQUFBLENBQUMsQ0FBQyxPQUFPLENBQUMsR0FBWCxDQUFlLENBQWYsQ0FBRixDQUFBLElBQXlCLENBQUUsQ0FBQSxJQUFLLENBQVA7TUFBbEM7O01BQ0EsT0FBakIsUUFBaUIsQ0FBRSxDQUFGLENBQUE7ZUFBUyxJQUFDLENBQUEsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxHQUFiLENBQWlCLENBQWpCO01BQVQsQ0F0QnBCOzs7O01BeUJvQixPQUFqQixLQUFpQixDQUFFLENBQUYsQ0FBQTtlQUFTLENBQUUsSUFBQyxDQUFBLENBQUMsQ0FBQyxTQUFTLENBQUMsR0FBYixDQUFpQixDQUFqQixDQUFGLENBQUEsSUFBMkIsQ0FBRSxDQUFBLEtBQUssSUFBQyxDQUFDLEdBQUQsQ0FBSyxDQUFDLEtBQWQ7TUFBcEMsQ0F6QnBCOzs7O01BNEJvQixPQUFqQixTQUFpQixDQUFFLENBQUYsQ0FBQTtlQUFXLElBQUMsQ0FBQSxDQUFDLENBQUMsUUFBUSxDQUFDLEdBQVosQ0FBZ0IsQ0FBaEI7TUFBWDs7TUFDQSxPQUFqQixJQUFpQixDQUFFLENBQUYsQ0FBQTtlQUFTLENBQUUsSUFBQyxDQUFBLENBQUMsQ0FBQyxRQUFRLENBQUMsR0FBWixDQUFnQixDQUFoQixDQUFGLENBQUEsSUFBMEIsQ0FBRSxDQUFBLEdBQUksQ0FBTjtNQUFuQyxDQTdCcEI7OztNQWdDcUIsT0FBbEIsZ0JBQWtCLENBQUUsQ0FBRixDQUFBO1FBQ2pCLEtBQW9CLElBQUMsQ0FBQSxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQVIsQ0FBWSxDQUFaLENBQXBCO0FBQUEsaUJBQU8sTUFBUDs7UUFDQSxJQUFDLENBQUEsTUFBRCxDQUFRO1VBQUUsSUFBQSxFQUFRLE1BQUEsQ0FBTyxLQUFLLENBQUMsSUFBTixDQUFXLENBQVgsQ0FBUDtRQUFWLENBQVI7QUFDQSxlQUFPLGNBQWMsQ0FBQyxJQUFmLENBQW9CLElBQXBCLEVBQXVCLENBQXZCLEVBQTBCLEdBQTFCO01BSFUsQ0FoQ3JCOzs7TUFzQ3FCLE9BQWxCLGdCQUFrQixDQUFFLENBQUYsQ0FBQTtRQUNqQixLQUFvQixJQUFDLENBQUEsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFSLENBQVksQ0FBWixDQUFwQjtBQUFBLGlCQUFPLE1BQVA7O1FBQ0EsSUFBQyxDQUFBLE1BQUQsQ0FBUTtVQUFFLElBQUEsRUFBUSxNQUFBLENBQU8sS0FBSyxDQUFDLElBQU4sQ0FBVyxDQUFYLENBQVA7UUFBVixDQUFSO0FBQ0EsZUFBTyxjQUFjLENBQUMsSUFBZixDQUFvQixJQUFwQixFQUF1QixDQUF2QixFQUEwQixHQUExQjtNQUhVLENBdENyQjs7O01BNEN3QixPQUFyQixrQkFBcUIsQ0FBRSxDQUFGLENBQUE7ZUFBUyxJQUFDLENBQUEsQ0FBQyxDQUFDLGdCQUFnQixDQUFDLEdBQXBCLENBQXdCLENBQXhCLEVBQTJCLElBQUMsQ0FBQSxJQUE1QjtNQUFUOztNQUNBLE9BQXJCLFNBQXFCLENBQUUsQ0FBRixDQUFBO2VBQVMsSUFBQyxDQUFBLENBQUMsQ0FBQyxnQkFBZ0IsQ0FBQyxHQUFwQixDQUF3QixDQUF4QixFQUEyQixJQUFDLENBQUEsSUFBNUI7TUFBVCxDQTdDeEI7OztNQWdEZSxPQUFaLFVBQVksQ0FBRSxDQUFGLENBQUE7QUFDZixZQUFBLElBQUEsRUFBQSxrQkFBQSxFQUFBLFNBQUEsRUFBQSxLQUFBLEVBQUEsSUFBQSxFQUFBLFNBQUEsRUFBQTtRQUFJLEtBQWtFLElBQUMsQ0FBQSxDQUFDLENBQUMsYUFBYSxDQUFDLEdBQWpCLENBQXFCLENBQXJCLENBQWxFO0FBQUEsaUJBQVMsSUFBQyxDQUFBLElBQUQsQ0FBTSx5Q0FBTixFQUFUOztRQUNBLEtBQUEsR0FBMEIsQ0FBQyxDQUFDLEtBQUYsQ0FBUSxJQUFDLENBQUMsR0FBRCxDQUFLLENBQUMsY0FBZjtRQUMxQixJQUFPLEtBQUssQ0FBQyxNQUFOLEtBQWdCLENBQXZCO0FBQ0UsaUJBQVMsSUFBQyxDQUFBLElBQUQsQ0FBTSxDQUFBLG1EQUFBLENBQUEsQ0FBc0QsS0FBSyxDQUFDLE1BQU4sR0FBZSxDQUFyRSxDQUFBLE9BQUEsQ0FBTixFQURYOztRQUVBLENBQUUsa0JBQUYsRUFDRSxTQURGLENBQUEsR0FDMEI7UUFHMUIsS0FBd0MsSUFBQyxDQUFBLENBQUMsQ0FBQyxrQkFBa0IsQ0FBQyxHQUF0QixDQUEwQixrQkFBMUIsRUFBOEMsSUFBQyxDQUFBLElBQS9DLEVBQXFEO1VBQUUsSUFBQSxFQUFNO1FBQVIsQ0FBckQsQ0FBeEM7OztBQUFBLGlCQUFTLElBQUMsQ0FBQSxJQUFELENBQU0sY0FBTixFQUFUOztRQUNBLEtBQXdDLElBQUMsQ0FBQSxDQUFDLENBQUMsU0FBUyxDQUFDLEdBQWIsQ0FBMEIsU0FBMUIsRUFBOEMsSUFBQyxDQUFBLElBQS9DLEVBQXFEO1VBQUUsSUFBQSxFQUFNO1FBQVIsQ0FBckQsQ0FBeEM7QUFBQSxpQkFBUyxJQUFDLENBQUEsSUFBRCxDQUFNLGNBQU4sRUFBVDs7UUFDQSxLQUF3QyxJQUFDLENBQUEsQ0FBQyxDQUFDLGdCQUFnQixDQUFDLEdBQXBCLENBQTBCLGtCQUFBLEdBQXFCLFNBQS9DLENBQXhDO0FBQUEsaUJBQVMsSUFBQyxDQUFBLElBQUQsQ0FBTSxjQUFOLEVBQVQ7O1FBQ0EsSUFBd0Msa0JBQWtCLENBQUMsTUFBbkIsS0FBNkIsU0FBUyxDQUFDLE1BQS9FO0FBQUEsaUJBQVMsSUFBQyxDQUFBLElBQUQsQ0FBTSxjQUFOLEVBQVQ7U0FYSjs7UUFhSSxJQUFBLEdBQVksSUFBQyxDQUFDLEdBQUQsQ0FBSyxDQUFDLEtBQVAsR0FBZSxDQUFFLEdBQUEsSUFBQyxDQUFBLElBQUksQ0FBQyxrQkFBUixDQUFnQyxDQUFDLE9BQWpDLENBQUEsQ0FBMEMsQ0FBQyxJQUEzQyxDQUFnRCxFQUFoRDtRQUMzQixJQUFBLEdBQVksSUFBQyxDQUFDLEdBQUQsQ0FBSyxDQUFDLEtBQVAsR0FBZTtRQUMzQixTQUFBLEdBQVksTUFBQSxDQUFPLEtBQUssQ0FBQyxJQUFOLENBQVcsSUFBWCxDQUFQO1FBQ1osU0FBQSxHQUFZLE1BQUEsQ0FBTyxLQUFLLENBQUMsSUFBTixDQUFXLElBQVgsQ0FBUDtRQUNaLElBQUMsQ0FBQSxNQUFELENBQVEsQ0FBRSxJQUFGLEVBQVEsSUFBUixFQUFjLFNBQWQsRUFBeUIsU0FBekIsQ0FBUjtBQUNBLGVBQU87TUFuQkksQ0FoRGY7OztNQXNFYSxPQUFWLFFBQVUsQ0FBRSxDQUFGLENBQUE7QUFDYixZQUFBLElBQUEsRUFBQSxpQkFBQSxFQUFBO1FBQUksS0FBb0IsSUFBQyxDQUFBLENBQUMsQ0FBQyxnQkFBZ0IsQ0FBQyxHQUFwQixDQUF3QixDQUF4QixFQUEyQixJQUFDLENBQUEsSUFBNUIsRUFBa0M7VUFBRSxJQUFBLEVBQU07UUFBUixDQUFsQyxDQUFwQjtBQUFBLGlCQUFPLE1BQVA7O1FBQ0EsSUFBQSxHQUFvQixJQUFDLENBQUEsSUFBSSxDQUFDLGFBQWEsQ0FBQztRQUN4QyxLQUEyRCxJQUFDLENBQUEsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFSLENBQVksSUFBWixDQUEzRDtBQUFBLGlCQUFPLElBQUMsQ0FBQSxJQUFELENBQU0sc0NBQU4sRUFBUDs7UUFDQSxLQUFBLEdBQW9CLElBQUMsQ0FBQSxJQUFJLENBQUMsYUFBYSxDQUFDLEVBQXBCLENBQXVCLENBQUMsQ0FBeEI7UUFDcEIsaUJBQUEsR0FBb0IsU0FBUyxDQUFDLGFBQVYsQ0FBd0IsS0FBeEI7UUFDcEIsSUFBQyxDQUFBLE1BQUQsQ0FBUSxDQUFFLElBQUYsRUFBUSxLQUFSLEVBQWUsaUJBQWYsQ0FBUjtBQUNBLGVBQU87TUFQRSxDQXRFYjs7O01BZ0ZnQixPQUFiLFdBQWEsQ0FBRSxDQUFGLENBQUE7QUFDaEIsWUFBQSxRQUFBLEVBQUEsSUFBQSxFQUFBLEtBQUEsRUFBQSxJQUFBLEVBQUEsSUFBQSxFQUFBLFNBQUEsRUFBQTtRQUFJLEtBQW9CLElBQUMsQ0FBQSxDQUFDLENBQUMsYUFBYSxDQUFDLEdBQWpCLENBQXFCLENBQXJCLENBQXBCO0FBQUEsaUJBQU8sTUFBUDs7UUFDQSxJQUFHLElBQUMsQ0FBQSxDQUFDLENBQUMsU0FBUyxDQUFDLEdBQWIsQ0FBaUIsQ0FBakIsQ0FBSDtVQUNFLElBQUEsR0FBWTtVQUNaLEtBQUEsR0FBWTtVQUNaLFFBQUEsR0FBWSxNQUFBLENBQU8sRUFBUDtVQUNaLFNBQUEsR0FBWSxNQUFBLENBQU8sQ0FBRSxDQUFGLENBQVA7VUFDWixJQUFDLENBQUEsTUFBRCxDQUFRLENBQUUsSUFBRixFQUFRLEtBQVIsRUFBZSxRQUFmLEVBQXlCLFNBQXpCLENBQVI7QUFDQSxpQkFBTyxLQU5UOztRQU9BLEtBQUEsR0FBUSxDQUFDLENBQUMsS0FBRixDQUFRLElBQUMsQ0FBQyxHQUFELENBQUssQ0FBQyxjQUFmO1FBQ1IsSUFBTyxLQUFLLENBQUMsTUFBTixLQUFnQixDQUF2QjtBQUNFLGlCQUFTLElBQUMsQ0FBQSxJQUFELENBQU0sQ0FBQSxxRkFBQSxDQUFBLENBQXdGLEtBQUssQ0FBQyxNQUFOLEdBQWUsQ0FBdkcsQ0FBQSxPQUFBLENBQU4sRUFEWDs7UUFFQSxDQUFFLElBQUYsRUFDRSxJQURGLEVBRUUsSUFGRixDQUFBLEdBRVk7UUFDWixLQUFBLEdBQVksSUFBQSxHQUFPO1FBQ25CLElBQUMsQ0FBQSxNQUFELENBQVEsQ0FBRSxJQUFGLEVBQVEsS0FBUixDQUFSO1FBQ0EsS0FBb0IsSUFBQyxDQUFBLENBQUMsQ0FBQyxnQkFBZ0IsQ0FBQyxHQUFwQixDQUF3QixJQUF4QixFQUErQixJQUFDLENBQUEsSUFBaEMsRUFBc0M7VUFBRSxJQUFBLEVBQU07UUFBUixDQUF0QyxDQUFwQjtBQUFBLGlCQUFPLE1BQVA7O1FBQ0EsS0FBb0IsSUFBQyxDQUFBLENBQUMsQ0FBQyxnQkFBZ0IsQ0FBQyxHQUFwQixDQUF3QixLQUF4QixFQUErQixJQUFDLENBQUEsSUFBaEMsRUFBc0M7VUFBRSxJQUFBLEVBQU07UUFBUixDQUF0QyxDQUFwQjtBQUFBLGlCQUFPLE1BQVA7O0FBQ0EsZUFBTztNQW5CSyxDQWhGaEI7OztNQXNHaUIsT0FBZCxZQUFjLENBQUUsQ0FBRixDQUFBO1FBQ2IsS0FBb0IsSUFBQyxDQUFBLENBQUMsQ0FBQyxhQUFhLENBQUMsR0FBakIsQ0FBd0IsQ0FBeEIsRUFBMkIsSUFBQyxDQUFBLElBQTVCLENBQXBCO0FBQUEsaUJBQU8sTUFBUDs7UUFDQSxLQUFvQixJQUFDLENBQUEsQ0FBQyxDQUFDLGdCQUFnQixDQUFDLEdBQXBCLENBQXdCLENBQXhCLEVBQTJCLElBQUMsQ0FBQSxJQUE1QixDQUFwQjtBQUFBLGlCQUFPLE1BQVA7O0FBQ0EsZUFBTztNQUhNOztJQXhHakI7OztJQWFFLG1CQUFFLENBQUEsR0FBQSxDQUFGLEdBQ0U7TUFBQSxLQUFBLEVBQU87SUFBUDs7OztnQkF2Q0o7OztFQXdJQSxjQUFBLEdBQWlCLFFBQUEsQ0FBRSxDQUFGLEVBQUssR0FBTCxDQUFBO0FBQ2pCLFFBQUEsQ0FBQSxFQUFBLEdBQUEsRUFBQSxJQUFBLEVBQUEsQ0FBQSxFQUFBLEdBQUEsRUFBQSxPQUFBLEVBQUE7SUFBRSxDQUFBLENBQUUsSUFBRixDQUFBLEdBQVksSUFBQyxDQUFBLElBQWIsRUFBRjtJQUNFLElBQTZDLElBQUksQ0FBQyxNQUFMLEtBQWUsQ0FBNUQ7QUFBQSxhQUFTLElBQUMsQ0FBQSxJQUFELENBQU0sd0JBQU4sRUFBVDs7SUFDQSxJQUE2QyxJQUFJLENBQUMsTUFBTCxLQUFlLENBQTVEO0FBQUEsYUFBTyxLQUFQOztJQUNBLEtBQVcsMEZBQVg7TUFDRSxPQUFBLEdBQVUsSUFBSSxDQUFFLEdBQUEsR0FBTSxDQUFSO01BQ2QsR0FBQSxHQUFVLElBQUksQ0FBRSxHQUFGO01BQ2QsQ0FBQTtBQUFVLGdCQUFPLEdBQVA7QUFBQSxlQUNILEdBREc7bUJBQ00sT0FBQSxHQUFVO0FBRGhCLGVBRUgsR0FGRzttQkFFTSxPQUFBLEdBQVU7QUFGaEI7WUFHSCxNQUFNLElBQUksS0FBSixDQUFVLENBQUEsNkNBQUEsQ0FBQSxDQUFnRCxHQUFBLENBQUksR0FBSixDQUFoRCxDQUFBLENBQVY7QUFISDs7TUFJVixJQUFZLENBQVo7QUFBQSxpQkFBQTs7TUFDQSxJQUFDLENBQUEsTUFBRCxDQUFRO1FBQUUsSUFBQSxFQUFNLENBQUUsQ0FBRixFQUFLLEdBQUwsRUFBVSxPQUFWLEVBQW1CLEdBQW5CO01BQVIsQ0FBUjtBQUNBLGFBQU87SUFUVDtBQVVBLFdBQU87RUFkUSxFQXhJakI7OztFQXlKQSxNQUFNLENBQUMsTUFBUCxDQUFjLE1BQU0sQ0FBQyxPQUFyQixFQUE4QjtJQUM1QixtQkFENEI7SUFFNUIsR0FBQSxFQUFzQixHQUZNO0lBRzVCO0VBSDRCLENBQTlCO0FBekpBIiwic291cmNlc0NvbnRlbnQiOlsiXG4ndXNlIHN0cmljdCdcblxuIz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5TRk1PRFVMRVMgICAgICAgICAgICAgICAgID0gcmVxdWlyZSAnLi4vLi4vYnJpY2FicmFjLXNpbmdsZS1maWxlLW1vZHVsZXMnXG57IHR5cGVfb2YsICAgICAgICAgICAgICB9ID0gU0ZNT0RVTEVTLnVuc3RhYmxlLnJlcXVpcmVfdHlwZV9vZigpXG57IHNob3dfbm9fY29sb3JzOiBycHIsICB9ID0gU0ZNT0RVTEVTLnVuc3RhYmxlLnJlcXVpcmVfc2hvdygpXG57IGRlYnVnLCAgICAgICAgICAgICAgICB9ID0gY29uc29sZVxueyByZWdleCwgICAgICAgICAgICAgICAgfSA9IHJlcXVpcmUgJ3JlZ2V4J1xueyBmcmVlemUsICAgICAgICAgICAgICAgfSA9IE9iamVjdFxueyBUeXBlLFxuICBUeXBlc3BhY2UsXG4gIENGRywgICAgICAgICAgICAgICAgICB9ID0gU0ZNT0RVTEVTLnVuc3RhYmxlLnJlcXVpcmVfbmFub3R5cGVzKClcblxuXG4jPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbmludGVybmFscyA9IE9iamVjdC5hc3NpZ24geyBUeXBlLCBUeXBlc3BhY2UsIH0sXG5cbiAgIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBnZXRfbmluZXJzX3JlOiAoIG5pbmVyICkgLT4gKCByZWdleCAnZycgKVwiXCJcIiBeICN7bmluZXJ9KiAoPz0gLisgJCApIFwiXCJcIlxuXG5cblxuIz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4jIEhPTExFUklUSCBUWVBFU1BBQ0VcbiM9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuY2xhc3MgSG9sbGVyaXRoX3R5cGVzcGFjZSBleHRlbmRzIFR5cGVzcGFjZVxuXG4gICMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgY29uc3RydWN0b3I6ICggY2ZnICkgLT5cbiAgICBzdXBlciBjZmdcbiAgICBAYmxhbmsudmFsaWRhdGUgQFtDRkddLmJsYW5rXG4gICAgYmxhbmtfZXNjICAgICAgID0gUmVnRXhwLmVzY2FwZSBAW0NGR10uYmxhbmtcbiAgICBibGFua19zcGxpdHRlciAgPSBuZXcgUmVnRXhwIFwiKD86I3tibGFua19lc2N9KStcIiwgJ2d2J1xuICAgIEBbQ0ZHXSAgICAgICAgICA9IGZyZWV6ZSB7IEBbQ0ZHXS4uLiwgYmxhbmtfc3BsaXR0ZXIsIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkXG5cblxuICAjPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIEBbQ0ZHXTpcbiAgICBibGFuazogJyAnXG5cbiAgIz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICBAdGV4dDogICAgICAgICAgICAoIHggKSAtPiAoIHR5cGVfb2YgeCApIGlzICd0ZXh0J1xuICBAbm9uZW1wdHlfdGV4dDogICAoIHggKSAtPiAoIEBULnRleHQuaXNhIHggKSBhbmQgKCB4Lmxlbmd0aCA+IDAgKVxuICBAY2hhcmFjdGVyOiAgICAgICAoIHggKSAtPiAoIEBULnRleHQuaXNhIHggKSBhbmQgKCAvXi4kL3YudGVzdCB4IClcbiAgQGZsb2F0OiAgICAgICAgICAgKCB4ICkgLT4gTnVtYmVyLmlzRmluaXRlIHhcbiAgQGludGVnZXI6ICAgICAgICAgKCB4ICkgLT4gTnVtYmVyLmlzU2FmZUludGVnZXIgeFxuICBAcGludGVnZXI6ICAgICAgICAoIHggKSAtPiAoIEBULmludGVnZXIuaXNhIHggKSBhbmQgKCB4ID4gIDAgKVxuICBAenBpbnRlZ2VyOiAgICAgICAoIHggKSAtPiAoIEBULmludGVnZXIuaXNhIHggKSBhbmQgKCB4ID49IDAgKVxuICBAY2FyZGluYWw6ICAgICAgICAoIHggKSAtPiBAVC56cGludGVnZXIuaXNhIHhcbiAgIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAjIyMgTk9URSByZXF1aXJpbmcgYHhgIHRvIGJlIGJvdGggYSBjaGFyYWN0ZXIgYW5kIGVxdWFsIHRvIGBAW0NGR10uYmxhbmtgIG1lYW5zIGBAW0NGR10uYmxhbmtgIGl0c2VsZiBjYW4gYmUgdGVzdGVkICMjI1xuICBAYmxhbms6ICAgICAgICAgICAoIHggKSAtPiAoIEBULmNoYXJhY3Rlci5pc2EgeCApIGFuZCAoIHggaXMgQFtDRkddLmJsYW5rIClcbiAgIyBAYmxhbmtfc2V0dGluZzogICAoIHggKSAtPiAoIEBULmNoYXJhY3Rlci5pc2EgeCApXG4gICMgQGJsYW5rX3VzYWdlOiAgICAgKCB4ICkgLT4gKCB4IGlzIEBbQ0ZHXS5ibGFuayApXG4gIEBkaW1lbnNpb246ICAgICAgICggeCApIC0+ICggQFQucGludGVnZXIuaXNhIHggKVxuICBAYmFzZTogICAgICAgICAgICAoIHggKSAtPiAoIEBULnBpbnRlZ2VyLmlzYSB4ICkgYW5kICggeCA+IDEgKVxuXG4gICMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgQGluY3JlbWVudGFsX3RleHQ6ICggeCApIC0+XG4gICAgcmV0dXJuIGZhbHNlIHVubGVzcyBAVC50ZXh0LmlzYSB4XG4gICAgQGFzc2lnbiB7IGNocnM6ICggZnJlZXplIEFycmF5LmZyb20geCApLCB9XG4gICAgcmV0dXJuIF90ZXN0X21vbm90b255LmNhbGwgQCwgeCwgJzwnXG5cbiAgIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBAZGVjcmVtZW50YWxfdGV4dDogKCB4ICkgLT5cbiAgICByZXR1cm4gZmFsc2UgdW5sZXNzIEBULnRleHQuaXNhIHhcbiAgICBAYXNzaWduIHsgY2hyczogKCBmcmVlemUgQXJyYXkuZnJvbSB4ICksIH1cbiAgICByZXR1cm4gX3Rlc3RfbW9ub3RvbnkuY2FsbCBALCB4LCAnPidcblxuICAjLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIEBubWFnX2JhcmVfcmV2ZXJzZWQ6ICAoIHggKSAtPiBAVC5pbmNyZW1lbnRhbF90ZXh0LmlzYSB4LCBAZGF0YVxuICBAcG1hZ19iYXJlOiAgICAgICAgICAgKCB4ICkgLT4gQFQuaW5jcmVtZW50YWxfdGV4dC5pc2EgeCwgQGRhdGFcblxuICAjLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIEBtYWduaWZpZXJzOiAoIHggKSAtPlxuICAgIHJldHVybiAoIEBmYWlsIFwiZXhwZWN0ZWQgYSBtYWduaWZpZXIsIGdvdCBhbiBlbXB0eSB0ZXh0XCIgKSB1bmxlc3MgQFQubm9uZW1wdHlfdGV4dC5pc2EgeFxuICAgIHBhcnRzICAgICAgICAgICAgICAgICAgID0geC5zcGxpdCBAW0NGR10uYmxhbmtfc3BsaXR0ZXJcbiAgICB1bmxlc3MgcGFydHMubGVuZ3RoIGlzIDJcbiAgICAgIHJldHVybiAoIEBmYWlsIFwizqlic2tfX18xIG1hZ25pZmllcnMgbXVzdCBoYXZlIGV4YWN0bHkgMSBibGFuaywgZ290ICN7cGFydHMubGVuZ3RoIC0gMX0gYmxhbmtzXCIpXG4gICAgWyBubWFnX2JhcmVfcmV2ZXJzZWQsXG4gICAgICBwbWFnX2JhcmUsICAgICAgICAgIF0gPSBwYXJ0c1xuICAgICMuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uXG4gICAgIyBAYXNzaWduIHsgaWFtOiAnbWFnbmlmaWVycycsIH07IGRlYnVnICfOqWJza19fXzInLCBAZGF0YVxuICAgIHJldHVybiAoIEBmYWlsIFwizqlic2tfX18zID8/P1wiICkgdW5sZXNzICBAVC5ubWFnX2JhcmVfcmV2ZXJzZWQuaXNhIG5tYWdfYmFyZV9yZXZlcnNlZCwgQGRhdGEsIHsgY2hyczogJ25tYWdfY2hyc19yZXZlcnNlZCcsIH1cbiAgICByZXR1cm4gKCBAZmFpbCBcIs6pYnNrX19fNCA/Pz9cIiApIHVubGVzcyAgQFQucG1hZ19iYXJlLmlzYSAgICAgICAgICBwbWFnX2JhcmUsICAgICAgICAgIEBkYXRhLCB7IGNocnM6ICdwbWFnX2NocnMnLCB9XG4gICAgcmV0dXJuICggQGZhaWwgXCLOqWJza19fXzUgPz8/XCIgKSB1bmxlc3MgIEBULmluY3JlbWVudGFsX3RleHQuaXNhICAgbm1hZ19iYXJlX3JldmVyc2VkICsgcG1hZ19iYXJlXG4gICAgcmV0dXJuICggQGZhaWwgXCLOqWJza19fXzYgPz8/XCIgKSB1bmxlc3MgIG5tYWdfYmFyZV9yZXZlcnNlZC5sZW5ndGggaXMgcG1hZ19iYXJlLmxlbmd0aFxuICAgICMuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uXG4gICAgbm1hZyAgICAgID0gQFtDRkddLmJsYW5rICsgWyBAZGF0YS5ubWFnX2NocnNfcmV2ZXJzZWQuLi4sIF0ucmV2ZXJzZSgpLmpvaW4gJydcbiAgICBwbWFnICAgICAgPSBAW0NGR10uYmxhbmsgKyBwbWFnX2JhcmVcbiAgICBubWFnX2NocnMgPSBmcmVlemUgQXJyYXkuZnJvbSBubWFnXG4gICAgcG1hZ19jaHJzID0gZnJlZXplIEFycmF5LmZyb20gcG1hZ1xuICAgIEBhc3NpZ24geyBubWFnLCBwbWFnLCBubWFnX2NocnMsIHBtYWdfY2hycywgfVxuICAgIHJldHVybiB0cnVlXG5cbiAgIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBAYWxwaGFiZXQ6ICggeCApIC0+XG4gICAgcmV0dXJuIGZhbHNlIHVubGVzcyBAVC5pbmNyZW1lbnRhbF90ZXh0LmlzYSB4LCBAZGF0YSwgeyBjaHJzOiAnYWxwaGFiZXRfY2hycycsIH1cbiAgICBiYXNlICAgICAgICAgICAgICA9IEBkYXRhLmFscGhhYmV0X2NocnMubGVuZ3RoXG4gICAgcmV0dXJuIEBmYWlsIFwiYW4gYWxwaGFiZXQgbXVzdCBoYXZlIDIgY2hycyBvciBtb3JlXCIgdW5sZXNzIEBULmJhc2UuaXNhIGJhc2VcbiAgICBuaW5lciAgICAgICAgICAgICA9IEBkYXRhLmFscGhhYmV0X2NocnMuYXQgLTFcbiAgICBsZWFkaW5nX25pbmVyc19yZSA9IGludGVybmFscy5nZXRfbmluZXJzX3JlIG5pbmVyXG4gICAgQGFzc2lnbiB7IGJhc2UsIG5pbmVyLCBsZWFkaW5nX25pbmVyc19yZSwgfVxuICAgIHJldHVybiB0cnVlXG5cbiAgIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBAdW5pbGl0ZXJhbHM6ICggeCApIC0+XG4gICAgcmV0dXJuIGZhbHNlIHVubGVzcyBAVC5ub25lbXB0eV90ZXh0LmlzYSB4XG4gICAgaWYgQFQuY2hhcmFjdGVyLmlzYSB4XG4gICAgICBudW5zICAgICAgPSAnJ1xuICAgICAgenB1bnMgICAgID0geFxuICAgICAgbnVuX2NocnMgID0gZnJlZXplIFtdXG4gICAgICB6cHVuX2NocnMgPSBmcmVlemUgWyB4LCBdXG4gICAgICBAYXNzaWduIHsgbnVucywgenB1bnMsIG51bl9jaHJzLCB6cHVuX2NocnMsIH1cbiAgICAgIHJldHVybiB0cnVlXG4gICAgcGFydHMgPSB4LnNwbGl0IEBbQ0ZHXS5ibGFua19zcGxpdHRlclxuICAgIHVubGVzcyBwYXJ0cy5sZW5ndGggaXMgM1xuICAgICAgcmV0dXJuICggQGZhaWwgXCLOqWJza19fXzcgdW5pbGl0ZXJhbHMgdGhhdCBhcmUgbm90IGEgc2luZ2xlIGNoYXJhY3RlciBtdXN0IGhhdmUgZXhhY3RseSAyIGJsYW5rMiwgZ290ICN7cGFydHMubGVuZ3RoIC0gMX0gYmxhbmtzXCIpXG4gICAgWyBudW5zLFxuICAgICAgemVybyxcbiAgICAgIHB1bnMsIF0gPSBwYXJ0c1xuICAgIHpwdW5zICAgICA9IHplcm8gKyBwdW5zXG4gICAgQGFzc2lnbiB7IG51bnMsIHpwdW5zLCB9XG4gICAgcmV0dXJuIGZhbHNlIHVubGVzcyBAVC5pbmNyZW1lbnRhbF90ZXh0LmlzYSBudW5zLCAgQGRhdGEsIHsgY2hyczogJ251bl9jaHJzJywgfVxuICAgIHJldHVybiBmYWxzZSB1bmxlc3MgQFQuaW5jcmVtZW50YWxfdGV4dC5pc2EgenB1bnMsIEBkYXRhLCB7IGNocnM6ICd6cHVuX2NocnMnLCB9XG4gICAgcmV0dXJuIHRydWVcblxuICAjLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIEBUTVBfYWxwaGFiZXQ6ICggeCApIC0+XG4gICAgcmV0dXJuIGZhbHNlIHVubGVzcyBAVC5ub25lbXB0eV90ZXh0LmlzYSAgICB4LCBAZGF0YVxuICAgIHJldHVybiBmYWxzZSB1bmxlc3MgQFQuaW5jcmVtZW50YWxfdGV4dC5pc2EgeCwgQGRhdGFcbiAgICByZXR1cm4gdHJ1ZVxuXG5cbiM9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuX3Rlc3RfbW9ub3RvbnkgPSAoIHgsIGNtcCApIC0+XG4gIHsgY2hycywgfSA9IEBkYXRhICMgPSBAY3JlYXRlIGRhdGFcbiAgcmV0dXJuICggQGZhaWwgXCJlbXB0eSBpcyBub3QgbW9ub3RvbmljXCIgKSBpZiBjaHJzLmxlbmd0aCBpcyAwXG4gIHJldHVybiB0cnVlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGNocnMubGVuZ3RoIGlzIDFcbiAgZm9yIGlkeCBpbiBbIDEgLi4uIGNocnMubGVuZ3RoIF1cbiAgICBwcnZfY2hyID0gY2hyc1sgaWR4IC0gMSBdXG4gICAgY2hyICAgICA9IGNocnNbIGlkeCAgICAgXVxuICAgIFIgICAgICAgPSBzd2l0Y2ggY21wXG4gICAgICB3aGVuICc+JyB0aGVuIHBydl9jaHIgPiBjaHJcbiAgICAgIHdoZW4gJzwnIHRoZW4gcHJ2X2NociA8IGNoclxuICAgICAgZWxzZSB0aHJvdyBuZXcgRXJyb3IgXCLOqWJza19fXzggKGludGVybmFsKSBleHBlY3RlZCAnPicgb3IgJzwnLCBnb3QgI3tycHIgY21wfVwiXG4gICAgY29udGludWUgaWYgUlxuICAgIEBhc3NpZ24geyBmYWlsOiB7IHgsIGlkeCwgcHJ2X2NociwgY2hyLCB9LCB9XG4gICAgcmV0dXJuIGZhbHNlXG4gIHJldHVybiB0cnVlXG5cbiM9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuT2JqZWN0LmFzc2lnbiBtb2R1bGUuZXhwb3J0cywge1xuICBIb2xsZXJpdGhfdHlwZXNwYWNlLFxuICBDRkc6ICAgICAgICAgICAgICAgICAgQ0ZHLFxuICBpbnRlcm5hbHMsIH1cbiJdfQ==
